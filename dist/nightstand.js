/*
  Weather
  homepage: <https://github.com/vladmandic/weather>
  author: <https://github.com/vladmandic>'
*/

var Hm=Object.create;var Ur=Object.defineProperty;var Wm=Object.getOwnPropertyDescriptor;var Zm=Object.getOwnPropertyNames;var Vm=Object.getPrototypeOf,$m=Object.prototype.hasOwnProperty;var jm=(e,t,i)=>t in e?Ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Uc=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Um=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Zm(t))!$m.call(e,s)&&s!==i&&Ur(e,s,{get:()=>t[s],enumerable:!(n=Wm(t,s))||n.enumerable});return e};var Yr=(e,t,i)=>(i=e!=null?Hm(Vm(e)):{},Um(t||!e||!e.__esModule?Ur(i,"default",{value:e,enumerable:!0}):i,e));var is=(e,t,i)=>(jm(e,typeof t!="symbol"?t+"":t,i),i);var Yc=Uc((qr,Gr)=>{(function(e,t){typeof qr=="object"&&typeof Gr!="undefined"?Gr.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.PullToRefresh=t())})(qr,function(){"use strict";var e={pullStartY:null,pullMoveY:null,handlers:[],styleEl:null,events:null,dist:0,state:"pending",timeout:null,distResisted:0,supportsPassive:!1,supportsPointerEvents:typeof window!="undefined"&&!!window.PointerEvent};try{window.addEventListener("test",null,{get passive(){e.supportsPassive=!0}})}catch(d){}function t(d){if(!d.ptrElement){var p=document.createElement("div");d.mainElement!==document.body?d.mainElement.parentNode.insertBefore(p,d.mainElement):document.body.insertBefore(p,document.body.firstChild),p.classList.add(d.classPrefix+"ptr"),p.innerHTML=d.getMarkup().replace(/__PREFIX__/g,d.classPrefix),d.ptrElement=p,typeof d.onInit=="function"&&d.onInit(d),e.styleEl||(e.styleEl=document.createElement("style"),e.styleEl.setAttribute("id","pull-to-refresh-js-style"),document.head.appendChild(e.styleEl)),e.styleEl.textContent=d.getStyles().replace(/__PREFIX__/g,d.classPrefix).replace(/\s+/g," ")}return d}function i(d){!d.ptrElement||(d.ptrElement.classList.remove(d.classPrefix+"refresh"),d.ptrElement.style[d.cssProp]="0px",setTimeout(function(){d.ptrElement&&d.ptrElement.parentNode&&(d.ptrElement.parentNode.removeChild(d.ptrElement),d.ptrElement=null),e.state="pending"},d.refreshTimeout))}function n(d){var p=d.ptrElement.querySelector("."+d.classPrefix+"icon"),g=d.ptrElement.querySelector("."+d.classPrefix+"text");p&&(e.state==="refreshing"?p.innerHTML=d.iconRefreshing:p.innerHTML=d.iconArrow),g&&(e.state==="releasing"&&(g.innerHTML=d.instructionsReleaseToRefresh),(e.state==="pulling"||e.state==="pending")&&(g.innerHTML=d.instructionsPullToRefresh),e.state==="refreshing"&&(g.innerHTML=d.instructionsRefreshing))}var s={setupDOM:t,onReset:i,update:n},o,r=function(p){return e.pointerEventsEnabled&&e.supportsPointerEvents?p.screenY:p.touches[0].screenY},a=function(){var d;function p(v){var b=e.handlers.filter(function(M){return M.contains(v.target)})[0];e.enable=!!b,b&&e.state==="pending"&&(d=s.setupDOM(b),b.shouldPullToRefresh()&&(e.pullStartY=r(v)),clearTimeout(e.timeout),s.update(b))}function g(v){if(!!(d&&d.ptrElement&&e.enable)){if(e.pullStartY?e.pullMoveY=r(v):d.shouldPullToRefresh()&&(e.pullStartY=r(v)),e.state==="refreshing"){v.cancelable&&d.shouldPullToRefresh()&&e.pullStartY<e.pullMoveY&&v.preventDefault();return}e.state==="pending"&&(d.ptrElement.classList.add(d.classPrefix+"pull"),e.state="pulling",s.update(d)),e.pullStartY&&e.pullMoveY&&(e.dist=e.pullMoveY-e.pullStartY),e.distExtra=e.dist-d.distIgnore,e.distExtra>0&&(v.cancelable&&v.preventDefault(),d.ptrElement.style[d.cssProp]=e.distResisted+"px",e.distResisted=d.resistanceFunction(e.distExtra/d.distThreshold)*Math.min(d.distMax,e.distExtra),e.state==="pulling"&&e.distResisted>d.distThreshold&&(d.ptrElement.classList.add(d.classPrefix+"release"),e.state="releasing",s.update(d)),e.state==="releasing"&&e.distResisted<d.distThreshold&&(d.ptrElement.classList.remove(d.classPrefix+"release"),e.state="pulling",s.update(d)))}}function _(){if(!!(d&&d.ptrElement&&e.enable)){if(clearTimeout(o),o=setTimeout(function(){d&&d.ptrElement&&e.state==="pending"&&s.onReset(d)},500),e.state==="releasing"&&e.distResisted>d.distThreshold)e.state="refreshing",d.ptrElement.style[d.cssProp]=d.distReload+"px",d.ptrElement.classList.add(d.classPrefix+"refresh"),e.timeout=setTimeout(function(){var v=d.onRefresh(function(){return s.onReset(d)});v&&typeof v.then=="function"&&v.then(function(){return s.onReset(d)}),!v&&!d.onRefresh.length&&s.onReset(d)},d.refreshTimeout);else{if(e.state==="refreshing")return;d.ptrElement.style[d.cssProp]="0px",e.state="pending"}s.update(d),d.ptrElement.classList.remove(d.classPrefix+"release"),d.ptrElement.classList.remove(d.classPrefix+"pull"),e.pullStartY=e.pullMoveY=null,e.dist=e.distResisted=0}}function y(){d&&d.mainElement.classList.toggle(d.classPrefix+"top",d.shouldPullToRefresh())}var x=e.supportsPassive?{passive:e.passive||!1}:void 0;return e.pointerEventsEnabled&&e.supportsPointerEvents?(window.addEventListener("pointerup",_),window.addEventListener("pointerdown",p),window.addEventListener("pointermove",g,x)):(window.addEventListener("touchend",_),window.addEventListener("touchstart",p),window.addEventListener("touchmove",g,x)),window.addEventListener("scroll",y),{onTouchEnd:_,onTouchStart:p,onTouchMove:g,onScroll:y,destroy:function(){e.pointerEventsEnabled&&e.supportsPointerEvents?(window.removeEventListener("pointerdown",p),window.removeEventListener("pointerup",_),window.removeEventListener("pointermove",g,x)):(window.removeEventListener("touchstart",p),window.removeEventListener("touchend",_),window.removeEventListener("touchmove",g,x)),window.removeEventListener("scroll",y)}}},l=`
<div class="__PREFIX__box">
  <div class="__PREFIX__content">
    <div class="__PREFIX__icon"></div>
    <div class="__PREFIX__text"></div>
  </div>
</div>
`,c=`
.__PREFIX__ptr {
  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);
  pointer-events: none;
  font-size: 0.85em;
  font-weight: bold;
  top: 0;
  height: 0;
  transition: height 0.3s, min-height 0.3s;
  text-align: center;
  width: 100%;
  overflow: hidden;
  display: flex;
  align-items: flex-end;
  align-content: stretch;
}

.__PREFIX__box {
  padding: 10px;
  flex-basis: 100%;
}

.__PREFIX__pull {
  transition: none;
}

.__PREFIX__text {
  margin-top: .33em;
  color: rgba(0, 0, 0, 0.3);
}

.__PREFIX__icon {
  color: rgba(0, 0, 0, 0.3);
  transition: transform .3s;
}

/*
When at the top of the page, disable vertical overscroll so passive touch
listeners can take over.
*/
.__PREFIX__top {
  touch-action: pan-x pan-down pinch-zoom;
}

.__PREFIX__release .__PREFIX__icon {
  transform: rotate(180deg);
}
`,h={distThreshold:60,distMax:80,distReload:50,distIgnore:0,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"Pull down to refresh",instructionsReleaseToRefresh:"Release to refresh",instructionsRefreshing:"Refreshing",refreshTimeout:500,getMarkup:function(){return l},getStyles:function(){return c},onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(d){return Math.min(1,d/2.5)},shouldPullToRefresh:function(){return!window.scrollY}},u=["mainElement","ptrElement","triggerElement"],f=function(d){var p={};return Object.keys(h).forEach(function(g){p[g]=d[g]||h[g]}),p.refreshTimeout=typeof d.refreshTimeout=="number"?d.refreshTimeout:h.refreshTimeout,u.forEach(function(g){typeof p[g]=="string"&&(p[g]=document.querySelector(p[g]))}),e.events||(e.events=a()),p.contains=function(g){return p.triggerElement.contains(g)},p.destroy=function(){clearTimeout(e.timeout);var g=e.handlers.indexOf(p);e.handlers.splice(g,1)},p},m={setPassiveMode:function(p){e.passive=p},setPointerEventsMode:function(p){e.pointerEventsEnabled=p},destroyAll:function(){e.events&&(e.events.destroy(),e.events=null),e.handlers.forEach(function(p){p.destroy()})},init:function(p){p===void 0&&(p={});var g=f(p);return e.handlers.push(g),g},_:{setupHandler:f,setupEvents:a,setupDOM:s.setupDOM,onReset:s.onReset,update:s.update}};return m})});var Fa=Uc((Jh,za)=>{(function(){"use strict";var e=Math.PI,t=Math.sin,i=Math.cos,n=Math.tan,s=Math.asin,o=Math.atan2,r=Math.acos,a=e/180,l=1e3*60*60*24,c=2440588,h=2451545;function u(E){return E.valueOf()/l-.5+c}function f(E){return new Date((E+.5-c)*l)}function m(E){return u(E)-h}var d=a*23.4397;function p(E,C){return o(t(E)*i(d)-n(C)*t(d),i(E))}function g(E,C){return s(t(C)*i(d)+i(C)*t(d)*t(E))}function _(E,C,D){return o(t(E),i(E)*t(C)-n(D)*i(C))}function y(E,C,D){return s(t(C)*t(D)+i(C)*i(D)*i(E))}function x(E,C){return a*(280.16+360.9856235*E)-C}function v(E){return E<0&&(E=0),2967e-7/Math.tan(E+.00312536/(E+.08901179))}function b(E){return a*(357.5291+.98560028*E)}function M(E){var C=a*(1.9148*t(E)+.02*t(2*E)+3e-4*t(3*E)),D=a*102.9372;return E+C+D+e}function T(E){var C=b(E),D=M(C);return{dec:g(D,0),ra:p(D,0)}}var w={};w.getPosition=function(E,C,D){var it=a*-D,G=a*C,_t=m(E),st=T(_t),yt=x(_t,it)-st.ra;return{azimuth:_(yt,G,st.dec),altitude:y(yt,G,st.dec)}};var k=w.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];w.addTime=function(E,C,D){k.push([E,C,D])};var V=9e-4;function Y(E,C){return Math.round(E-V-C/(2*e))}function B(E,C,D){return V+(E+C)/(2*e)+D}function at(E,C,D){return h+E+.0053*t(C)-.0069*t(2*D)}function Pt(E,C,D){return r((t(E)-t(C)*t(D))/(i(C)*i(D)))}function A(E){return-2.076*Math.sqrt(E)/60}function Mt(E,C,D,it,G,_t,st){var yt=Pt(E,D,it),Zt=B(yt,C,G);return at(Zt,_t,st)}w.getTimes=function(E,C,D,it){it=it||0;var G=a*-D,_t=a*C,st=A(it),yt=m(E),Zt=Y(yt,G),pe=B(0,G,Zt),Le=b(pe),Ue=M(Le),Ii=g(Ue,0),ke=at(pe,Le,Ue),Ye,tn,Pe,ge,qe,en,re={solarNoon:f(ke),nadir:f(ke-.5)};for(Ye=0,tn=k.length;Ye<tn;Ye+=1)Pe=k[Ye],ge=(Pe[0]+st)*a,qe=Mt(ge,G,_t,Ii,Zt,Le,Ue),en=ke-(qe-ke),re[Pe[1]]=f(en),re[Pe[2]]=f(qe);return re};function mt(E){var C=a*(218.316+13.176396*E),D=a*(134.963+13.064993*E),it=a*(93.272+13.22935*E),G=C+a*6.289*t(D),_t=a*5.128*t(it),st=385001-20905*i(D);return{ra:p(G,_t),dec:g(G,_t),dist:st}}w.getMoonPosition=function(E,C,D){var it=a*-D,G=a*C,_t=m(E),st=mt(_t),yt=x(_t,it)-st.ra,Zt=y(yt,G,st.dec),pe=o(t(yt),n(G)*i(st.dec)-t(st.dec)*i(yt));return Zt=Zt+v(Zt),{azimuth:_(yt,G,st.dec),altitude:Zt,distance:st.dist,parallacticAngle:pe}},w.getMoonIllumination=function(E){var C=m(E||new Date),D=T(C),it=mt(C),G=149598e3,_t=r(t(D.dec)*t(it.dec)+i(D.dec)*i(it.dec)*i(D.ra-it.ra)),st=o(G*t(_t),it.dist-G*i(_t)),yt=o(i(D.dec)*t(D.ra-it.ra),t(D.dec)*i(it.dec)-i(D.dec)*t(it.dec)*i(D.ra-it.ra));return{fraction:(1+i(st))/2,phase:.5+.5*st*(yt<0?-1:1)/Math.PI,angle:yt}};function oe(E,C){return new Date(E.valueOf()+C*l/24)}w.getMoonTimes=function(E,C,D,it){var G=new Date(E);it?G.setUTCHours(0,0,0,0):G.setHours(0,0,0,0);for(var _t=.133*a,st=w.getMoonPosition(G,C,D).altitude-_t,yt,Zt,pe,Le,Ue,Ii,ke,Ye,tn,Pe,ge,qe,en,re=1;re<=24&&(yt=w.getMoonPosition(oe(G,re),C,D).altitude-_t,Zt=w.getMoonPosition(oe(G,re+1),C,D).altitude-_t,Ue=(st+Zt)/2-yt,Ii=(Zt-st)/2,ke=-Ii/(2*Ue),Ye=(Ue*ke+Ii)*ke+yt,tn=Ii*Ii-4*Ue*yt,Pe=0,tn>=0&&(en=Math.sqrt(tn)/(Math.abs(Ue)*2),ge=ke-en,qe=ke+en,Math.abs(ge)<=1&&Pe++,Math.abs(qe)<=1&&Pe++,ge<-1&&(ge=qe)),Pe===1?st<0?pe=re+ge:Le=re+ge:Pe===2&&(pe=re+(Ye<0?qe:ge),Le=re+(Ye<0?ge:qe)),!(pe&&Le));re+=2)st=Zt;var bo={};return pe&&(bo.rise=oe(G,pe)),Le&&(bo.set=oe(G,Le)),!pe&&!Le&&(bo[Ye>0?"alwaysUp":"alwaysDown"]=!0),bo},typeof Jh=="object"&&typeof za!="undefined"?za.exports=w:typeof define=="function"&&define.amd?define(w):window.SunCalc=w})()});var Fm=Yr(Yc());var I=(...e)=>{let t=new Date,i=`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}.${t.getMilliseconds().toString().padStart(3,"0")}`;console.log(i,...e)};var Vt=class{static async init(){let t=await fetch("../secrets.json");if(!t||!t.ok)return;let i=await t.json();Vt.tomorrow=i.tomorrow,Vt.google=i.google,Vt.darksky=i.darksky,Vt.aqicn=i.aqicn;let n=new URLSearchParams(window.location.search);I("params",{search:n.toString()}),n.has("tomorrow")&&(Vt.tomorrow=n.get("tomorrow")),n.has("google")&&(Vt.google=n.get("google")),n.has("darksky")&&(Vt.darksky=n.get("darksky")),n.has("aqicn")&&(Vt.aqicn=n.get("aqicn")),I("keys",{tomorrow:Vt.tomorrow,google:Vt.google,darksky:Vt.darksky,aqicn:Vt.aqicn})}},Et=Vt;is(Et,"tomorrow",""),is(Et,"google",""),is(Et,"darksky",""),is(Et,"aqicn","");var Ge=class extends Error{},xo=class extends Ge{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}},wo=class extends Ge{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}},To=class extends Ge{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}},Xe=class extends Ge{},nn=class extends Ge{constructor(t){super(`Invalid unit ${t}`)}},zt=class extends Ge{},_e=class extends Ge{constructor(){super("Zone is an abstract class")}};var S="numeric",ye="short",Xt="long",sn={year:S,month:S,day:S},ns={year:S,month:ye,day:S},Xr={year:S,month:ye,day:S,weekday:ye},ss={year:S,month:Xt,day:S},os={year:S,month:Xt,day:S,weekday:Xt},rs={hour:S,minute:S},as={hour:S,minute:S,second:S},ls={hour:S,minute:S,second:S,timeZoneName:ye},cs={hour:S,minute:S,second:S,timeZoneName:Xt},hs={hour:S,minute:S,hourCycle:"h23"},us={hour:S,minute:S,second:S,hourCycle:"h23"},ds={hour:S,minute:S,second:S,hourCycle:"h23",timeZoneName:ye},fs={hour:S,minute:S,second:S,hourCycle:"h23",timeZoneName:Xt},ms={year:S,month:S,day:S,hour:S,minute:S},ps={year:S,month:S,day:S,hour:S,minute:S,second:S},gs={year:S,month:ye,day:S,hour:S,minute:S},_s={year:S,month:ye,day:S,hour:S,minute:S,second:S},Kr={year:S,month:ye,day:S,weekday:ye,hour:S,minute:S},ys={year:S,month:Xt,day:S,hour:S,minute:S,timeZoneName:ye},vs={year:S,month:Xt,day:S,hour:S,minute:S,second:S,timeZoneName:ye},bs={year:S,month:Xt,day:S,weekday:Xt,hour:S,minute:S,timeZoneName:Xt},xs={year:S,month:Xt,day:S,weekday:Xt,hour:S,minute:S,second:S,timeZoneName:Xt};function H(e){return typeof e=="undefined"}function Ee(e){return typeof e=="number"}function ws(e){return typeof e=="number"&&e%1===0}function qc(e){return typeof e=="string"}function Gc(e){return Object.prototype.toString.call(e)==="[object Date]"}function Mo(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Xc(e){return Array.isArray(e)?e:[e]}function Qr(e,t,i){if(e.length!==0)return e.reduce((n,s)=>{let o=[t(s),s];return n&&i(n[0],o[0])===n[0]?n:o},null)[1]}function Kc(e,t){return t.reduce((i,n)=>(i[n]=e[n],i),{})}function di(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Oe(e,t,i){return ws(e)&&e>=t&&e<=i}function Ym(e,t){return e-t*Math.floor(e/t)}function vt(e,t=2){let i=e<0,n;return i?n="-"+(""+-e).padStart(t,"0"):n=(""+e).padStart(t,"0"),n}function Ke(e){if(!(H(e)||e===null||e===""))return parseInt(e,10)}function fi(e){if(!(H(e)||e===null||e===""))return parseFloat(e)}function Ts(e){if(!(H(e)||e===null||e==="")){let t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function on(e,t,i=!1){let n=10**t;return(i?Math.trunc:Math.round)(e*n)/n}function Di(e){return e%4===0&&(e%100!==0||e%400===0)}function Ai(e){return Di(e)?366:365}function rn(e,t){let i=Ym(t-1,12)+1,n=e+(t-i)/12;return i===2?Di(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Ms(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function an(e){let t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,n=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||n===3?53:52}function Ss(e){return e>99?e:e>60?1900+e:2e3+e}function So(e,t,i,n=null){let s=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(o.timeZone=n);let r={timeZoneName:t,...o},a=new Intl.DateTimeFormat(i,r).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function zi(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);let n=parseInt(t,10)||0,s=i<0||Object.is(i,-0)?-n:n;return i*60+s}function ta(e){let t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new zt(`Invalid unit value ${e}`);return t}function ln(e,t){let i={};for(let n in e)if(di(e,n)){let s=e[n];if(s==null)continue;i[t(n)]=ta(s)}return i}function mi(e,t){let i=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${vt(i,2)}:${vt(n,2)}`;case"narrow":return`${s}${i}${n>0?`:${n}`:""}`;case"techie":return`${s}${vt(i,2)}${vt(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Ls(e){return Kc(e,["hour","minute","second","millisecond"])}var ea=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;var qm=["January","February","March","April","May","June","July","August","September","October","November","December"],ia=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Gm=["J","F","M","A","M","J","J","A","S","O","N","D"];function na(e){switch(e){case"narrow":return[...Gm];case"short":return[...ia];case"long":return[...qm];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var sa=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],oa=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Xm=["M","T","W","T","F","S","S"];function ra(e){switch(e){case"narrow":return[...Xm];case"short":return[...oa];case"long":return[...sa];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var aa=["AM","PM"],Km=["Before Christ","Anno Domini"],Jm=["BC","AD"],Qm=["B","A"];function la(e){switch(e){case"narrow":return[...Qm];case"short":return[...Jm];case"long":return[...Km];default:return null}}function Jc(e){return aa[e.hour<12?0:1]}function Qc(e,t){return ra(t)[e.weekday-1]}function th(e,t){return na(t)[e.month-1]}function eh(e,t){return la(t)[e.year<0?0:1]}function ih(e,t,i="always",n=!1){let s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&o){let u=e==="days";switch(t){case 1:return u?"tomorrow":`next ${s[e][0]}`;case-1:return u?"yesterday":`last ${s[e][0]}`;case 0:return u?"today":`this ${s[e][0]}`;default:}}let r=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=s[e],h=n?l?c[1]:c[2]||c[1]:l?s[e][0]:e;return r?`${a} ${h} ago`:`in ${a} ${h}`}function nh(e,t){let i="";for(let n of e)n.literal?i+=n.val:i+=t(n.val);return i}var tp={D:sn,DD:ns,DDD:ss,DDDD:os,t:rs,tt:as,ttt:ls,tttt:cs,T:hs,TT:us,TTT:ds,TTTT:fs,f:ms,ff:gs,fff:ys,ffff:bs,F:ps,FF:_s,FFF:vs,FFFF:xs},Lt=class{static create(t,i={}){return new Lt(t,i)}static parseFormat(t){let i=null,n="",s=!1,o=[];for(let r=0;r<t.length;r++){let a=t.charAt(r);a==="'"?(n.length>0&&o.push({literal:s,val:n}),i=null,n="",s=!s):s||a===i?n+=a:(n.length>0&&o.push({literal:!1,val:n}),n=a,i=a)}return n.length>0&&o.push({literal:s,val:n}),o}static macroTokenToFormatOpts(t){return tp[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTime(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTimeParts(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).formatToParts()}resolvedOptions(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return vt(t,i);let n={...this.opts};return i>0&&(n.padTo=i),this.loc.numberFormatter(n).format(t)}formatDateTimeFromString(t,i){let n=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(m,d)=>this.loc.extract(t,m,d),r=m=>t.isOffsetFixed&&t.offset===0&&m.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,m.format):"",a=()=>n?Jc(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,d)=>n?th(t,m):o(d?{month:m}:{month:m,day:"numeric"},"month"),c=(m,d)=>n?Qc(t,m):o(d?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),h=m=>{let d=Lt.macroTokenToFormatOpts(m);return d?this.formatWithSystemDefault(t,d):m},u=m=>n?eh(t,m):o({era:m},"era"),f=m=>{switch(m){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?o({day:"numeric"},"day"):this.num(t.day);case"dd":return s?o({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?o({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?o({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?o({month:"numeric"},"month"):this.num(t.month);case"MM":return s?o({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?o({year:"numeric"},"year"):this.num(t.year);case"yy":return s?o({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?o({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?o({year:"numeric"},"year"):this.num(t.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(m)}};return nh(Lt.parseFormat(i),f)}formatDurationFromString(t,i){let n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>c=>{let h=n(c);return h?this.num(l.get(h),c.length):c},o=Lt.parseFormat(i),r=o.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=t.shiftTo(...r.map(n).filter(l=>l));return nh(o,s(a))}};var Ft=class{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var $t=class{get type(){throw new _e}get name(){throw new _e}get ianaName(){return this.name}get isUniversal(){throw new _e}offsetName(t,i){throw new _e}formatOffset(t,i){throw new _e}offset(t){throw new _e}equals(t){throw new _e}get isValid(){throw new _e}};var ha=null,Ce=class extends $t{static get instance(){return ha===null&&(ha=new Ce),ha}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:n}){return So(t,i,n)}formatOffset(t,i){return mi(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}};var ko={};function ep(e){return ko[e]||(ko[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),ko[e]}var ip={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function np(e,t){let i=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,o,r,a,l,c,h]=n;return[r,s,o,a,l,c,h]}function sp(e,t){let i=e.formatToParts(t),n=[];for(let s=0;s<i.length;s++){let{type:o,value:r}=i[s],a=ip[o];o==="era"?n[a]=r:H(a)||(n[a]=parseInt(r,10))}return n}var Lo={},Dt=class extends $t{static create(t){return Lo[t]||(Lo[t]=new Dt(t)),Lo[t]}static resetCache(){Lo={},ko={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch(i){return!1}}constructor(t){super(),this.zoneName=t,this.valid=Dt.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:n}){return So(t,i,n,this.name)}formatOffset(t,i){return mi(this.offset(t),i)}offset(t){let i=new Date(t);if(isNaN(i))return NaN;let n=ep(this.name),[s,o,r,a,l,c,h]=n.formatToParts?sp(n,i):np(n,i);a==="BC"&&(s=-Math.abs(s)+1);let f=Ms({year:s,month:o,day:r,hour:l===24?0:l,minute:c,second:h,millisecond:0}),m=+i,d=m%1e3;return m-=d>=0?d:1e3+d,(f-m)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}};var ua=null,bt=class extends $t{static get utcInstance(){return ua===null&&(ua=new bt(0)),ua}static instance(t){return t===0?bt.utcInstance:new bt(t)}static parseSpecifier(t){if(t){let i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new bt(zi(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${mi(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${mi(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return mi(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}};var cn=class extends $t{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function ve(e,t){let i;if(H(e)||e===null)return t;if(e instanceof $t)return e;if(qc(e)){let n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?Ce.instance:n==="utc"||n==="gmt"?bt.utcInstance:bt.parseSpecifier(n)||Dt.create(e)}else return Ee(e)?bt.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new cn(e)}var sh=()=>Date.now(),oh="system",rh=null,ah=null,lh=null,ch,ot=class{static get now(){return sh}static set now(t){sh=t}static set defaultZone(t){oh=t}static get defaultZone(){return ve(oh,Ce.instance)}static get defaultLocale(){return rh}static set defaultLocale(t){rh=t}static get defaultNumberingSystem(){return ah}static set defaultNumberingSystem(t){ah=t}static get defaultOutputCalendar(){return lh}static set defaultOutputCalendar(t){lh=t}static get throwOnInvalid(){return ch}static set throwOnInvalid(t){ch=t}static resetCaches(){X.resetCache(),Dt.resetCache()}};var hh={};function op(e,t={}){let i=JSON.stringify([e,t]),n=hh[i];return n||(n=new Intl.ListFormat(e,t),hh[i]=n),n}var da={};function fa(e,t={}){let i=JSON.stringify([e,t]),n=da[i];return n||(n=new Intl.DateTimeFormat(e,t),da[i]=n),n}var ma={};function rp(e,t={}){let i=JSON.stringify([e,t]),n=ma[i];return n||(n=new Intl.NumberFormat(e,t),ma[i]=n),n}var pa={};function ap(e,t={}){let{base:i,...n}=t,s=JSON.stringify([e,n]),o=pa[s];return o||(o=new Intl.RelativeTimeFormat(e,t),pa[s]=o),o}var ks=null;function lp(){return ks||(ks=new Intl.DateTimeFormat().resolvedOptions().locale,ks)}function cp(e){let t=e.indexOf("-u-");if(t===-1)return[e];{let i,n=e.substring(0,t);try{i=fa(e).resolvedOptions()}catch(r){i=fa(n).resolvedOptions()}let{numberingSystem:s,calendar:o}=i;return[n,s,o]}}function hp(e,t,i){return(i||t)&&(e+="-u",i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function up(e){let t=[];for(let i=1;i<=12;i++){let n=P.utc(2016,i,1);t.push(e(n))}return t}function dp(e){let t=[];for(let i=1;i<=7;i++){let n=P.utc(2016,11,13+i);t.push(e(n))}return t}function Po(e,t,i,n,s){let o=e.listingMode(i);return o==="error"?null:o==="en"?n(t):s(t)}function fp(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}var ga=class{constructor(t,i,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:s,floor:o,...r}=n;if(!i||Object.keys(r).length>0){let a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=rp(t,a)}}format(t){if(this.inf){let i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{let i=this.floor?Math.floor(t):on(t,3);return vt(i,this.padTo)}}},_a=class{constructor(t,i,n){this.opts=n;let s;if(t.zone.isUniversal){let r=-1*(t.offset/60),a=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;t.offset!==0&&Dt.create(a).valid?(s=a,this.dt=t):(s="UTC",n.timeZoneName?this.dt=t:this.dt=t.offset===0?t:P.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,s=t.zone.name);let o={...this.opts};s&&(o.timeZone=s),this.dtf=fa(i,o)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}},ya=class{constructor(t,i,n){this.opts={style:"long",...n},!i&&Mo()&&(this.rtf=ap(t,n))}format(t,i){return this.rtf?this.rtf.format(t,i):ih(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}},X=class{static fromOpts(t){return X.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,i,n,s=!1){let o=t||ot.defaultLocale,r=o||(s?"en-US":lp()),a=i||ot.defaultNumberingSystem,l=n||ot.defaultOutputCalendar;return new X(r,a,l,o)}static resetCache(){ks=null,da={},ma={},pa={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:n}={}){return X.create(t,i,n)}constructor(t,i,n,s){let[o,r,a]=cp(t);this.locale=o,this.numberingSystem=i||r||null,this.outputCalendar=n||a||null,this.intl=hp(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=fp(this)),this.fastNumbersCached}listingMode(){let t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:X.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1,n=!0){return Po(this,t,n,na,()=>{let s=i?{month:t,day:"numeric"}:{month:t},o=i?"format":"standalone";return this.monthsCache[o][t]||(this.monthsCache[o][t]=up(r=>this.extract(r,s,"month"))),this.monthsCache[o][t]})}weekdays(t,i=!1,n=!0){return Po(this,t,n,ra,()=>{let s=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},o=i?"format":"standalone";return this.weekdaysCache[o][t]||(this.weekdaysCache[o][t]=dp(r=>this.extract(r,s,"weekday"))),this.weekdaysCache[o][t]})}meridiems(t=!0){return Po(this,void 0,t,()=>aa,()=>{if(!this.meridiemCache){let i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[P.utc(2016,11,13,9),P.utc(2016,11,13,19)].map(n=>this.extract(n,i,"dayperiod"))}return this.meridiemCache})}eras(t,i=!0){return Po(this,t,i,la,()=>{let n={era:t};return this.eraCache[t]||(this.eraCache[t]=[P.utc(-40,1,1),P.utc(2017,1,1)].map(s=>this.extract(s,n,"era"))),this.eraCache[t]})}extract(t,i,n){let s=this.dtFormatter(t,i),o=s.formatToParts(),r=o.find(a=>a.type.toLowerCase()===n);return r?r.value:null}numberFormatter(t={}){return new ga(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new _a(t,this.intl,i)}relFormatter(t={}){return new ya(this.intl,this.isEnglish(),t)}listFormatter(t={}){return op(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}};function un(...e){let t=e.reduce((i,n)=>i+n.source,"");return RegExp(`^${t}$`)}function dn(...e){return t=>e.reduce(([i,n,s],o)=>{let[r,a,l]=o(t,s);return[{...i,...r},a||n,l]},[{},null,1]).slice(0,2)}function fn(e,...t){if(e==null)return[null,null];for(let[i,n]of t){let s=i.exec(e);if(s)return n(s)}return[null,null]}function dh(...e){return(t,i)=>{let n={},s;for(s=0;s<e.length;s++)n[e[s]]=Ke(t[i+s]);return[n,null,i+s]}}var fh=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,mp=`(?:${fh.source}?(?:\\[(${ea.source})\\])?)?`,va=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,mh=RegExp(`${va.source}${mp}`),ba=RegExp(`(?:T${mh.source})?`),pp=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,gp=/(\d{4})-?W(\d\d)(?:-?(\d))?/,_p=/(\d{4})-?(\d{3})/,yp=dh("weekYear","weekNumber","weekDay"),vp=dh("year","ordinal"),bp=/(\d{4})-(\d\d)-(\d\d)/,ph=RegExp(`${va.source} ?(?:${fh.source}|(${ea.source}))?`),xp=RegExp(`(?: ${ph.source})?`);function hn(e,t,i){let n=e[t];return H(n)?i:Ke(n)}function wp(e,t){return[{year:hn(e,t),month:hn(e,t+1,1),day:hn(e,t+2,1)},null,t+3]}function mn(e,t){return[{hours:hn(e,t,0),minutes:hn(e,t+1,0),seconds:hn(e,t+2,0),milliseconds:Ts(e[t+3])},null,t+4]}function Ps(e,t){let i=!e[t]&&!e[t+1],n=zi(e[t+1],e[t+2]),s=i?null:bt.instance(n);return[{},s,t+3]}function Es(e,t){let i=e[t]?Dt.create(e[t]):null;return[{},i,t+1]}var Tp=RegExp(`^T?${va.source}$`),Mp=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Sp(e){let[t,i,n,s,o,r,a,l,c]=e,h=t[0]==="-",u=l&&l[0]==="-",f=(m,d=!1)=>m!==void 0&&(d||m&&h)?-m:m;return[{years:f(fi(i)),months:f(fi(n)),weeks:f(fi(s)),days:f(fi(o)),hours:f(fi(r)),minutes:f(fi(a)),seconds:f(fi(l),l==="-0"),milliseconds:f(Ts(c),u)}]}var Lp={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function xa(e,t,i,n,s,o,r){let a={year:t.length===2?Ss(Ke(t)):Ke(t),month:ia.indexOf(i)+1,day:Ke(n),hour:Ke(s),minute:Ke(o)};return r&&(a.second=Ke(r)),e&&(a.weekday=e.length>3?sa.indexOf(e)+1:oa.indexOf(e)+1),a}var kp=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Pp(e){let[,t,i,n,s,o,r,a,l,c,h,u]=e,f=xa(t,s,n,i,o,r,a),m;return l?m=Lp[l]:c?m=0:m=zi(h,u),[f,new bt(m)]}function Ep(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var Op=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Cp=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Ip=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function uh(e){let[,t,i,n,s,o,r,a]=e;return[xa(t,s,n,i,o,r,a),bt.utcInstance]}function Dp(e){let[,t,i,n,s,o,r,a]=e;return[xa(t,a,i,n,s,o,r),bt.utcInstance]}var Ap=un(pp,ba),zp=un(gp,ba),Fp=un(_p,ba),Rp=un(mh),gh=dn(wp,mn,Ps,Es),Np=dn(yp,mn,Ps,Es),Bp=dn(vp,mn,Ps,Es),Hp=dn(mn,Ps,Es);function _h(e){return fn(e,[Ap,gh],[zp,Np],[Fp,Bp],[Rp,Hp])}function yh(e){return fn(Ep(e),[kp,Pp])}function vh(e){return fn(e,[Op,uh],[Cp,uh],[Ip,Dp])}function bh(e){return fn(e,[Mp,Sp])}var Wp=dn(mn);function xh(e){return fn(e,[Tp,Wp])}var Zp=un(bp,xp),Vp=un(ph),$p=dn(mn,Ps,Es);function wh(e){return fn(e,[Zp,gh],[Vp,$p])}var jp="Invalid Duration",Th={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Up={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Th},ae=146097/400,pn=146097/4800,Yp={years:{quarters:4,months:12,weeks:ae/7,days:ae,hours:ae*24,minutes:ae*24*60,seconds:ae*24*60*60,milliseconds:ae*24*60*60*1e3},quarters:{months:3,weeks:ae/28,days:ae/4,hours:ae*24/4,minutes:ae*24*60/4,seconds:ae*24*60*60/4,milliseconds:ae*24*60*60*1e3/4},months:{weeks:pn/7,days:pn,hours:pn*24,minutes:pn*24*60,seconds:pn*24*60*60,milliseconds:pn*24*60*60*1e3},...Th},Ri=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],qp=Ri.slice(0).reverse();function Fi(e,t,i=!1){let n={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new W(n)}function Gp(e){return e<0?Math.floor(e):Math.ceil(e)}function Mh(e,t,i,n,s){let o=e[s][i],r=t[i]/o,a=Math.sign(r)===Math.sign(n[s]),l=!a&&n[s]!==0&&Math.abs(r)<=1?Gp(r):Math.trunc(r);n[s]+=l,t[i]-=l*o}function Xp(e,t){qp.reduce((i,n)=>H(t[n])?i:(i&&Mh(e,t,i,t,n),n),null)}var W=class{constructor(t){let i=t.conversionAccuracy==="longterm"||!1,n=i?Yp:Up;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||X.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,i){return W.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new zt(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new W({values:ln(t,W.normalizeUnit),loc:X.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(Ee(t))return W.fromMillis(t);if(W.isDuration(t))return t;if(typeof t=="object")return W.fromObject(t);throw new zt(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){let[n]=bh(t);return n?W.fromObject(n,i):W.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){let[n]=xh(t);return n?W.fromObject(n,i):W.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new zt("need to specify a reason the Duration is invalid");let n=t instanceof Ft?t:new Ft(t,i);if(ot.throwOnInvalid)throw new To(n);return new W({invalid:n})}static normalizeUnit(t){let i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new nn(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){let n={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Lt.create(this.loc,n).formatDurationFromString(this,t):jp}toHuman(t={}){let i=Ri.map(n=>{let s=this.values[n];return H(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=on(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;let i=this.toMillis();if(i<0||i>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};let n=this.shiftTo("hours","minutes","seconds","milliseconds"),s=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||n.seconds!==0||n.milliseconds!==0)&&(s+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||n.milliseconds!==0)&&(s+=".SSS"));let o=n.toFormat(s);return t.includePrefix&&(o="T"+o),o}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;let i=W.fromDurationLike(t),n={};for(let s of Ri)(di(i.values,s)||di(this.values,s))&&(n[s]=i.get(s)+this.get(s));return Fi(this,{values:n},!0)}minus(t){if(!this.isValid)return this;let i=W.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;let i={};for(let n of Object.keys(this.values))i[n]=ta(t(this.values[n],n));return Fi(this,{values:i},!0)}get(t){return this[W.normalizeUnit(t)]}set(t){if(!this.isValid)return this;let i={...this.values,...ln(t,W.normalizeUnit)};return Fi(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:n,matrix:s}={}){let r={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:s,conversionAccuracy:n};return Fi(this,r)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;let t=this.toObject();return Xp(this.matrix,t),Fi(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(r=>W.normalizeUnit(r));let i={},n={},s=this.toObject(),o;for(let r of Ri)if(t.indexOf(r)>=0){o=r;let a=0;for(let c in n)a+=this.matrix[c][r]*n[c],n[c]=0;Ee(s[r])&&(a+=s[r]);let l=Math.trunc(a);i[r]=l,n[r]=(a*1e3-l*1e3)/1e3;for(let c in s)Ri.indexOf(c)>Ri.indexOf(r)&&Mh(this.matrix,s,c,i,r)}else Ee(s[r])&&(n[r]=s[r]);for(let r in n)n[r]!==0&&(i[o]+=r===o?n[r]:n[r]/this.matrix[o][r]);return Fi(this,{values:i},!0).normalize()}negate(){if(!this.isValid)return this;let t={};for(let i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Fi(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(n,s){return n===void 0||n===0?s===void 0||s===0:n===s}for(let n of Ri)if(!i(this.values[n],t.values[n]))return!1;return!0}};var Os="Invalid Interval";function Kp(e,t){return!e||!e.isValid?lt.invalid("missing or invalid start"):!t||!t.isValid?lt.invalid("missing or invalid end"):t<e?lt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}var lt=class{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new zt("need to specify a reason the Interval is invalid");let n=t instanceof Ft?t:new Ft(t,i);if(ot.throwOnInvalid)throw new wo(n);return new lt({invalid:n})}static fromDateTimes(t,i){let n=gn(t),s=gn(i),o=Kp(n,s);return o==null?new lt({start:n,end:s}):o}static after(t,i){let n=W.fromDurationLike(i),s=gn(t);return lt.fromDateTimes(s,s.plus(n))}static before(t,i){let n=W.fromDurationLike(i),s=gn(t);return lt.fromDateTimes(s.minus(n),s)}static fromISO(t,i){let[n,s]=(t||"").split("/",2);if(n&&s){let o,r;try{o=P.fromISO(n,i),r=o.isValid}catch(c){r=!1}let a,l;try{a=P.fromISO(s,i),l=a.isValid}catch(c){l=!1}if(r&&l)return lt.fromDateTimes(o,a);if(r){let c=W.fromISO(s,i);if(c.isValid)return lt.after(o,c)}else if(l){let c=W.fromISO(n,i);if(c.isValid)return lt.before(a,c)}}return lt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;let i=this.start.startOf(t),n=this.end.startOf(t);return Math.floor(n.diff(i,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?lt.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];let i=t.map(gn).filter(r=>this.contains(r)).sort(),n=[],{s}=this,o=0;for(;s<this.e;){let r=i[o]||this.e,a=+r>+this.e?this.e:r;n.push(lt.fromDateTimes(s,a)),s=a,o+=1}return n}splitBy(t){let i=W.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:n}=this,s=1,o,r=[];for(;n<this.e;){let a=this.start.plus(i.mapUnits(l=>l*s));o=+a>+this.e?this.e:a,r.push(lt.fromDateTimes(n,o)),n=o,s+=1}return r}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;let i=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return i>=n?null:lt.fromDateTimes(i,n)}union(t){if(!this.isValid)return this;let i=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return lt.fromDateTimes(i,n)}static merge(t){let[i,n]=t.sort((s,o)=>s.s-o.s).reduce(([s,o],r)=>o?o.overlaps(r)||o.abutsStart(r)?[s,o.union(r)]:[s.concat([o]),r]:[s,r],[[],null]);return n&&i.push(n),i}static xor(t){let i=null,n=0,s=[],o=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),r=Array.prototype.concat(...o),a=r.sort((l,c)=>l.time-c.time);for(let l of a)n+=l.type==="s"?1:-1,n===1?i=l.time:(i&&+i!=+l.time&&s.push(lt.fromDateTimes(i,l.time)),i=null);return lt.merge(s)}difference(...t){return lt.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Os}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Os}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Os}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Os}toFormat(t,{separator:i=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:Os}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):W.invalid(this.invalidReason)}mapEndpoints(t){return lt.fromDateTimes(t(this.s),t(this.e))}};var Je=class{static hasDST(t=ot.defaultZone){let i=P.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return Dt.isValidZone(t)}static normalizeZone(t){return ve(t,ot.defaultZone)}static months(t="long",{locale:i=null,numberingSystem:n=null,locObj:s=null,outputCalendar:o="gregory"}={}){return(s||X.create(i,n,o)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:n=null,locObj:s=null,outputCalendar:o="gregory"}={}){return(s||X.create(i,n,o)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:n=null,locObj:s=null}={}){return(s||X.create(i,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:n=null,locObj:s=null}={}){return(s||X.create(i,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return X.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return X.create(i,null,"gregory").eras(t)}static features(){return{relative:Mo()}}};function Sh(e,t){let i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=i(t)-i(e);return Math.floor(W.fromMillis(n).as("days"))}function Jp(e,t,i){let n=[["years",(a,l)=>l.year-a.year],["quarters",(a,l)=>l.quarter-a.quarter+(l.year-a.year)*4],["months",(a,l)=>l.month-a.month+(l.year-a.year)*12],["weeks",(a,l)=>{let c=Sh(a,l);return(c-c%7)/7}],["days",Sh]],s={},o,r;for(let[a,l]of n)if(i.indexOf(a)>=0){o=a;let c=l(e,t);r=e.plus({[a]:c}),r>t?(e=e.plus({[a]:c-1}),c-=1):e=r,s[a]=c}return[e,s,r,o]}function Lh(e,t,i,n){let[s,o,r,a]=Jp(e,t,i),l=t-s,c=i.filter(u=>["hours","minutes","seconds","milliseconds"].indexOf(u)>=0);c.length===0&&(r<t&&(r=s.plus({[a]:1})),r!==s&&(o[a]=(o[a]||0)+l/(r-s)));let h=W.fromObject(o,n);return c.length>0?W.fromMillis(l,n).shiftTo(...c).plus(h):h}var wa={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},kh={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Qp=wa.hanidec.replace(/[\[|\]]/g,"").split("");function Ph(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);if(e[i].search(wa.hanidec)!==-1)t+=Qp.indexOf(e[i]);else for(let s in kh){let[o,r]=kh[s];n>=o&&n<=r&&(t+=n-o)}}return parseInt(t,10)}else return t}function le({numberingSystem:e},t=""){return new RegExp(`${wa[e||"latn"]}${t}`)}var tg="missing Intl.DateTimeFormat.formatToParts support";function Q(e,t=i=>i){return{regex:e,deser:([i])=>t(Ph(i))}}var eg=String.fromCharCode(160),Ch=`[ ${eg}]`,Ih=new RegExp(Ch,"g");function ig(e){return e.replace(/\./g,"\\.?").replace(Ih,Ch)}function Eh(e){return e.replace(/\./g,"").replace(Ih," ").toLowerCase()}function be(e,t){return e===null?null:{regex:RegExp(e.map(ig).join("|")),deser:([i])=>e.findIndex(n=>Eh(i)===Eh(n))+t}}function Oh(e,t){return{regex:e,deser:([,i,n])=>zi(i,n),groups:t}}function Ta(e){return{regex:e,deser:([t])=>t}}function ng(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function sg(e,t){let i=le(t),n=le(t,"{2}"),s=le(t,"{3}"),o=le(t,"{4}"),r=le(t,"{6}"),a=le(t,"{1,2}"),l=le(t,"{1,3}"),c=le(t,"{1,6}"),h=le(t,"{1,9}"),u=le(t,"{2,4}"),f=le(t,"{4,6}"),m=g=>({regex:RegExp(ng(g.val)),deser:([_])=>_,literal:!0}),p=(g=>{if(e.literal)return m(g);switch(g.val){case"G":return be(t.eras("short",!1),0);case"GG":return be(t.eras("long",!1),0);case"y":return Q(c);case"yy":return Q(u,Ss);case"yyyy":return Q(o);case"yyyyy":return Q(f);case"yyyyyy":return Q(r);case"M":return Q(a);case"MM":return Q(n);case"MMM":return be(t.months("short",!0,!1),1);case"MMMM":return be(t.months("long",!0,!1),1);case"L":return Q(a);case"LL":return Q(n);case"LLL":return be(t.months("short",!1,!1),1);case"LLLL":return be(t.months("long",!1,!1),1);case"d":return Q(a);case"dd":return Q(n);case"o":return Q(l);case"ooo":return Q(s);case"HH":return Q(n);case"H":return Q(a);case"hh":return Q(n);case"h":return Q(a);case"mm":return Q(n);case"m":return Q(a);case"q":return Q(a);case"qq":return Q(n);case"s":return Q(a);case"ss":return Q(n);case"S":return Q(l);case"SSS":return Q(s);case"u":return Ta(h);case"uu":return Ta(a);case"uuu":return Q(i);case"a":return be(t.meridiems(),0);case"kkkk":return Q(o);case"kk":return Q(u,Ss);case"W":return Q(a);case"WW":return Q(n);case"E":case"c":return Q(i);case"EEE":return be(t.weekdays("short",!1,!1),1);case"EEEE":return be(t.weekdays("long",!1,!1),1);case"ccc":return be(t.weekdays("short",!0,!1),1);case"cccc":return be(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Oh(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return Oh(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return Ta(/[a-z_+-/]{1,256}?/i);default:return m(g)}})(e)||{invalidReason:tg};return p.token=e,p}var og={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function rg(e,t,i){let{type:n,value:s}=e;if(n==="literal")return{literal:!0,val:s};let o=i[n],r=og[n];if(typeof r=="object"&&(r=r[o]),r)return{literal:!1,val:r}}function ag(e){return[`^${e.map(i=>i.regex).reduce((i,n)=>`${i}(${n.source})`,"")}$`,e]}function lg(e,t,i){let n=e.match(t);if(n){let s={},o=1;for(let r in i)if(di(i,r)){let a=i[r],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(n.slice(o,o+l))),o+=l}return[n,s]}else return[n,{}]}function cg(e){let t=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},i=null,n;return H(e.z)||(i=Dt.create(e.z)),H(e.Z)||(i||(i=new bt(e.Z)),n=e.Z),H(e.q)||(e.M=(e.q-1)*3+1),H(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),H(e.u)||(e.S=Ts(e.u)),[Object.keys(e).reduce((o,r)=>{let a=t(r);return a&&(o[a]=e[r]),o},{}),i,n]}var Ma=null;function hg(){return Ma||(Ma=P.fromMillis(1555555555555)),Ma}function ug(e,t){if(e.literal)return e;let i=Lt.macroTokenToFormatOpts(e.val),n=ka(i,t);return n==null||n.includes(void 0)?e:n}function Sa(e,t){return Array.prototype.concat(...e.map(i=>ug(i,t)))}function La(e,t,i){let n=Sa(Lt.parseFormat(i),e),s=n.map(r=>sg(r,e)),o=s.find(r=>r.invalidReason);if(o)return{input:t,tokens:n,invalidReason:o.invalidReason};{let[r,a]=ag(s),l=RegExp(r,"i"),[c,h]=lg(t,l,a),[u,f,m]=h?cg(h):[null,null,void 0];if(di(h,"a")&&di(h,"H"))throw new Xe("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:n,regex:l,rawMatches:c,matches:h,result:u,zone:f,specificOffset:m}}}function Dh(e,t,i){let{result:n,zone:s,specificOffset:o,invalidReason:r}=La(e,t,i);return[n,s,o,r]}function ka(e,t){return e?Lt.create(t,e).formatDateTimeParts(hg()).map(s=>rg(s,t,e)):null}var Ah=[0,31,59,90,120,151,181,212,243,273,304,334],zh=[0,31,60,91,121,152,182,213,244,274,305,335];function ce(e,t){return new Ft("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Fh(e,t,i){let n=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let s=n.getUTCDay();return s===0?7:s}function Rh(e,t,i){return i+(Di(e)?zh:Ah)[t-1]}function Nh(e,t){let i=Di(e)?zh:Ah,n=i.findIndex(o=>o<t),s=t-i[n];return{month:n+1,day:s}}function Eo(e){let{year:t,month:i,day:n}=e,s=Rh(t,i,n),o=Fh(t,i,n),r=Math.floor((s-o+10)/7),a;return r<1?(a=t-1,r=an(a)):r>an(t)?(a=t+1,r=1):a=t,{weekYear:a,weekNumber:r,weekday:o,...Ls(e)}}function Pa(e){let{weekYear:t,weekNumber:i,weekday:n}=e,s=Fh(t,1,4),o=Ai(t),r=i*7+n-s-3,a;r<1?(a=t-1,r+=Ai(a)):r>o?(a=t+1,r-=Ai(t)):a=t;let{month:l,day:c}=Nh(a,r);return{year:a,month:l,day:c,...Ls(e)}}function Oo(e){let{year:t,month:i,day:n}=e,s=Rh(t,i,n);return{year:t,ordinal:s,...Ls(e)}}function Ea(e){let{year:t,ordinal:i}=e,{month:n,day:s}=Nh(t,i);return{year:t,month:n,day:s,...Ls(e)}}function Bh(e){let t=ws(e.weekYear),i=Oe(e.weekNumber,1,an(e.weekYear)),n=Oe(e.weekday,1,7);return t?i?n?!1:ce("weekday",e.weekday):ce("week",e.week):ce("weekYear",e.weekYear)}function Hh(e){let t=ws(e.year),i=Oe(e.ordinal,1,Ai(e.year));return t?i?!1:ce("ordinal",e.ordinal):ce("year",e.year)}function Oa(e){let t=ws(e.year),i=Oe(e.month,1,12),n=Oe(e.day,1,rn(e.year,e.month));return t?i?n?!1:ce("day",e.day):ce("month",e.month):ce("year",e.year)}function Ca(e){let{hour:t,minute:i,second:n,millisecond:s}=e,o=Oe(t,0,23)||t===24&&i===0&&n===0&&s===0,r=Oe(i,0,59),a=Oe(n,0,59),l=Oe(s,0,999);return o?r?a?l?!1:ce("millisecond",s):ce("second",n):ce("minute",i):ce("hour",t)}var Ia="Invalid DateTime",Wh=864e13;function Co(e){return new Ft("unsupported zone",`the zone "${e.name}" is not supported`)}function Da(e){return e.weekData===null&&(e.weekData=Eo(e.c)),e.weekData}function Cs(e,t){let i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new P({...i,...t,old:i})}function Gh(e,t,i){let n=e-t*60*1e3,s=i.offset(n);if(t===s)return[n,t];n-=(s-t)*60*1e3;let o=i.offset(n);return s===o?[n,s]:[e-Math.min(s,o)*60*1e3,Math.max(s,o)]}function Zh(e,t){e+=t*60*1e3;let i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Do(e,t,i){return Gh(Ms(e),t,i)}function Vh(e,t){let i=e.o,n=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o={...e.c,year:n,month:s,day:Math.min(e.c.day,rn(n,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},r=W.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Ms(o),[l,c]=Gh(a,i,e.zone);return r!==0&&(l+=r,c=e.zone.offset(l)),{ts:l,o:c}}function Is(e,t,i,n,s,o){let{setZone:r,zone:a}=i;if(e&&Object.keys(e).length!==0){let l=t||a,c=P.fromObject(e,{...i,zone:l,specificOffset:o});return r?c:c.setZone(a)}else return P.invalid(new Ft("unparsable",`the input "${s}" can't be parsed as ${n}`))}function Io(e,t,i=!0){return e.isValid?Lt.create(X.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Aa(e,t){let i=e.c.year>9999||e.c.year<0,n="";return i&&e.c.year>=0&&(n+="+"),n+=vt(e.c.year,i?6:4),t?(n+="-",n+=vt(e.c.month),n+="-",n+=vt(e.c.day)):(n+=vt(e.c.month),n+=vt(e.c.day)),n}function $h(e,t,i,n,s,o){let r=vt(e.c.hour);return t?(r+=":",r+=vt(e.c.minute),(e.c.second!==0||!i)&&(r+=":")):r+=vt(e.c.minute),(e.c.second!==0||!i)&&(r+=vt(e.c.second),(e.c.millisecond!==0||!n)&&(r+=".",r+=vt(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!o?r+="Z":e.o<0?(r+="-",r+=vt(Math.trunc(-e.o/60)),r+=":",r+=vt(Math.trunc(-e.o%60))):(r+="+",r+=vt(Math.trunc(e.o/60)),r+=":",r+=vt(Math.trunc(e.o%60)))),o&&(r+="["+e.zone.ianaName+"]"),r}var Xh={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},dg={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},fg={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Kh=["year","month","day","hour","minute","second","millisecond"],mg=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],pg=["year","ordinal","hour","minute","second","millisecond"];function jh(e){let t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new nn(e);return t}function Uh(e,t){let i=ve(t.zone,ot.defaultZone),n=X.fromObject(t),s=ot.now(),o,r;if(H(e.year))o=s;else{for(let c of Kh)H(e[c])&&(e[c]=Xh[c]);let a=Oa(e)||Ca(e);if(a)return P.invalid(a);let l=i.offset(s);[o,r]=Do(e,l,i)}return new P({ts:o,zone:i,loc:n,o:r})}function Yh(e,t,i){let n=H(i.round)?!0:i.round,s=(r,a)=>(r=on(r,n||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(r,a)),o=r=>i.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(i.unit)return s(o(i.unit),i.unit);for(let r of i.units){let a=o(r);if(Math.abs(a)>=1)return s(a,r)}return s(e>t?-0:0,i.units[i.units.length-1])}function qh(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}var P=class{constructor(t){let i=t.zone||ot.defaultZone,n=t.invalid||(Number.isNaN(t.ts)?new Ft("invalid input"):null)||(i.isValid?null:Co(i));this.ts=H(t.ts)?ot.now():t.ts;let s=null,o=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[s,o]=[t.old.c,t.old.o];else{let a=i.offset(this.ts);s=Zh(this.ts,a),n=Number.isNaN(s.year)?new Ft("invalid input"):null,s=n?null:s,o=n?null:a}this._zone=i,this.loc=t.loc||X.create(),this.invalid=n,this.weekData=null,this.c=s,this.o=o,this.isLuxonDateTime=!0}static now(){return new P({})}static local(){let[t,i]=qh(arguments),[n,s,o,r,a,l,c]=i;return Uh({year:n,month:s,day:o,hour:r,minute:a,second:l,millisecond:c},t)}static utc(){let[t,i]=qh(arguments),[n,s,o,r,a,l,c]=i;return t.zone=bt.utcInstance,Uh({year:n,month:s,day:o,hour:r,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,i={}){let n=Gc(t)?t.valueOf():NaN;if(Number.isNaN(n))return P.invalid("invalid input");let s=ve(i.zone,ot.defaultZone);return s.isValid?new P({ts:n,zone:s,loc:X.fromObject(i)}):P.invalid(Co(s))}static fromMillis(t,i={}){if(Ee(t))return t<-Wh||t>Wh?P.invalid("Timestamp out of range"):new P({ts:t,zone:ve(i.zone,ot.defaultZone),loc:X.fromObject(i)});throw new zt(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(Ee(t))return new P({ts:t*1e3,zone:ve(i.zone,ot.defaultZone),loc:X.fromObject(i)});throw new zt("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};let n=ve(i.zone,ot.defaultZone);if(!n.isValid)return P.invalid(Co(n));let s=ot.now(),o=H(i.specificOffset)?n.offset(s):i.specificOffset,r=ln(t,jh),a=!H(r.ordinal),l=!H(r.year),c=!H(r.month)||!H(r.day),h=l||c,u=r.weekYear||r.weekNumber,f=X.fromObject(i);if((h||a)&&u)throw new Xe("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new Xe("Can't mix ordinal dates with month/day");let m=u||r.weekday&&!h,d,p,g=Zh(s,o);m?(d=mg,p=dg,g=Eo(g)):a?(d=pg,p=fg,g=Oo(g)):(d=Kh,p=Xh);let _=!1;for(let w of d){let k=r[w];H(k)?_?r[w]=p[w]:r[w]=g[w]:_=!0}let y=m?Bh(r):a?Hh(r):Oa(r),x=y||Ca(r);if(x)return P.invalid(x);let v=m?Pa(r):a?Ea(r):r,[b,M]=Do(v,o,n),T=new P({ts:b,zone:n,o:M,loc:f});return r.weekday&&h&&t.weekday!==T.weekday?P.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${T.toISO()}`):T}static fromISO(t,i={}){let[n,s]=_h(t);return Is(n,s,i,"ISO 8601",t)}static fromRFC2822(t,i={}){let[n,s]=yh(t);return Is(n,s,i,"RFC 2822",t)}static fromHTTP(t,i={}){let[n,s]=vh(t);return Is(n,s,i,"HTTP",i)}static fromFormat(t,i,n={}){if(H(t)||H(i))throw new zt("fromFormat requires an input string and a format");let{locale:s=null,numberingSystem:o=null}=n,r=X.fromOpts({locale:s,numberingSystem:o,defaultToEN:!0}),[a,l,c,h]=Dh(r,t,i);return h?P.invalid(h):Is(a,l,n,`format ${i}`,t,c)}static fromString(t,i,n={}){return P.fromFormat(t,i,n)}static fromSQL(t,i={}){let[n,s]=wh(t);return Is(n,s,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new zt("need to specify a reason the DateTime is invalid");let n=t instanceof Ft?t:new Ft(t,i);if(ot.throwOnInvalid)throw new xo(n);return new P({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){let n=ka(t,X.fromObject(i));return n?n.map(s=>s?s.val:null).join(""):null}static expandFormat(t,i={}){return Sa(Lt.parseFormat(t),X.fromObject(i)).map(s=>s.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Da(this).weekYear:NaN}get weekNumber(){return this.isValid?Da(this).weekNumber:NaN}get weekday(){return this.isValid?Da(this).weekday:NaN}get ordinal(){return this.isValid?Oo(this.c).ordinal:NaN}get monthShort(){return this.isValid?Je.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Je.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Je.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Je.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Di(this.year)}get daysInMonth(){return rn(this.year,this.month)}get daysInYear(){return this.isValid?Ai(this.year):NaN}get weeksInWeekYear(){return this.isValid?an(this.weekYear):NaN}resolvedLocaleOptions(t={}){let{locale:i,numberingSystem:n,calendar:s}=Lt.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:n,outputCalendar:s}}toUTC(t=0,i={}){return this.setZone(bt.instance(t),i)}toLocal(){return this.setZone(ot.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:n=!1}={}){if(t=ve(t,ot.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(i||n){let o=t.offset(this.ts),r=this.toObject();[s]=Do(r,o,t)}return Cs(this,{ts:s,zone:t})}else return P.invalid(Co(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:n}={}){let s=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:n});return Cs(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;let i=ln(t,jh),n=!H(i.weekYear)||!H(i.weekNumber)||!H(i.weekday),s=!H(i.ordinal),o=!H(i.year),r=!H(i.month)||!H(i.day),a=o||r,l=i.weekYear||i.weekNumber;if((a||s)&&l)throw new Xe("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(r&&s)throw new Xe("Can't mix ordinal dates with month/day");let c;n?c=Pa({...Eo(this.c),...i}):H(i.ordinal)?(c={...this.toObject(),...i},H(i.day)&&(c.day=Math.min(rn(c.year,c.month),c.day))):c=Ea({...Oo(this.c),...i});let[h,u]=Do(c,this.o,this.zone);return Cs(this,{ts:h,o:u})}plus(t){if(!this.isValid)return this;let i=W.fromDurationLike(t);return Cs(this,Vh(this,i))}minus(t){if(!this.isValid)return this;let i=W.fromDurationLike(t).negate();return Cs(this,Vh(this,i))}startOf(t){if(!this.isValid)return this;let i={},n=W.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break;case"milliseconds":break}if(n==="weeks"&&(i.weekday=1),n==="quarters"){let s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,i={}){return this.isValid?Lt.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):Ia}toLocaleString(t=sn,i={}){return this.isValid?Lt.create(this.loc.clone(i),t).formatDateTime(this):Ia}toLocaleParts(t={}){return this.isValid?Lt.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;let r=t==="extended",a=Aa(this,r);return a+="T",a+=$h(this,r,i,n,s,o),a}toISODate({format:t="extended"}={}){return this.isValid?Aa(this,t==="extended"):null}toISOWeekDate(){return Io(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:o=!1,format:r="extended"}={}){return this.isValid?(s?"T":"")+$h(this,r==="extended",i,t,n,o):null}toRFC2822(){return Io(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Io(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Aa(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(i||t)&&(n&&(s+=" "),i?s+="z":t&&(s+="ZZ")),Io(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Ia}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};let i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",n={}){if(!this.isValid||!t.isValid)return W.invalid("created by diffing an invalid DateTime");let s={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=Xc(i).map(W.normalizeUnit),r=t.valueOf()>this.valueOf(),a=r?this:t,l=r?t:this,c=Lh(a,l,o,s);return r?c.negate():c}diffNow(t="milliseconds",i={}){return this.diff(P.now(),t,i)}until(t){return this.isValid?lt.fromDateTimes(this,t):this}hasSame(t,i){if(!this.isValid)return!1;let n=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(i)<=n&&n<=s.endOf(i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;let i=t.base||P.fromObject({},{zone:this.zone}),n=t.padding?this<i?-t.padding:t.padding:0,s=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(s=t.unit,o=void 0),Yh(i,this.plus(n),{...t,numeric:"always",units:s,unit:o})}toRelativeCalendar(t={}){return this.isValid?Yh(t.base||P.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(P.isDateTime))throw new zt("min requires all arguments be DateTimes");return Qr(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(P.isDateTime))throw new zt("max requires all arguments be DateTimes");return Qr(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,n={}){let{locale:s=null,numberingSystem:o=null}=n,r=X.fromOpts({locale:s,numberingSystem:o,defaultToEN:!0});return La(r,t,i)}static fromStringExplain(t,i,n={}){return P.fromFormatExplain(t,i,n)}static get DATE_SHORT(){return sn}static get DATE_MED(){return ns}static get DATE_MED_WITH_WEEKDAY(){return Xr}static get DATE_FULL(){return ss}static get DATE_HUGE(){return os}static get TIME_SIMPLE(){return rs}static get TIME_WITH_SECONDS(){return as}static get TIME_WITH_SHORT_OFFSET(){return ls}static get TIME_WITH_LONG_OFFSET(){return cs}static get TIME_24_SIMPLE(){return hs}static get TIME_24_WITH_SECONDS(){return us}static get TIME_24_WITH_SHORT_OFFSET(){return ds}static get TIME_24_WITH_LONG_OFFSET(){return fs}static get DATETIME_SHORT(){return ms}static get DATETIME_SHORT_WITH_SECONDS(){return ps}static get DATETIME_MED(){return gs}static get DATETIME_MED_WITH_SECONDS(){return _s}static get DATETIME_MED_WITH_WEEKDAY(){return Kr}static get DATETIME_FULL(){return ys}static get DATETIME_FULL_WITH_SECONDS(){return vs}static get DATETIME_HUGE(){return bs}static get DATETIME_HUGE_WITH_SECONDS(){return xs}};function gn(e){if(P.isDateTime(e))return e;if(e&&e.valueOf&&Ee(e.valueOf()))return P.fromJSDate(e);if(e&&typeof e=="object")return P.fromObject(e);throw new zt(`Unknown datetime argument: ${e}, of type ${typeof e}`)}var Ie=Yr(Fa());var Kt=e=>Number.isNaN(e.getTime())?"":P.fromJSDate(e).toFormat("HH:mm");function Ao(e,t){let i=document.getElementsByTagName("component-astronomy");for(let n=0;n<i.length;n++)i[n].setAttribute("loc",`${e},${t}`)}var Ra=class extends HTMLElement{static get observedAttributes(){return["loc"]}connectedCallback(){this.innerHTML=""}attributeChangedCallback(t,i,n){if(t!=="loc")return;let s=new Date,[o,r]=n.split(","),a=Ie.getTimes(s,o,r),l=Ie.getMoonTimes(s,o,r),c=Ie.getMoonIllumination(s),h=Ie.getPosition(s,o,r),u=Ie.getMoonPosition(s,o,r),f={sunTimes:a,moonTimes:l,moonIllumination:c,sunPos:h,moonPos:u},m=JSON.stringify(f,null,2).replace(/{|}|"|,/g,"").replace("  "," ");I("updateAstronomy",f);let d=`<span style="display:inline-block;transform:rotate(${c.phase<=.5?0:180}deg);"> \u2191 </span>`,p="../assets/phases/moon-100.webp";c.phase<=.88&&(p="../assets/phases/moon-87.webp"),c.phase<=.76&&(p="../assets/phases/moon-62.webp"),c.phase<=.54&&(p="../assets/phases/moon-50.webp"),c.phase<=.44&&(p="../assets/phases/moon-37.webp"),c.phase<=.32&&(p="../assets/phases/moon-25.webp"),c.phase<=.2&&(p="../assets/phases/moon-12.webp"),c.phase<=.08&&(p="../assets/phases/moon-0.webp"),this.innerHTML=`
      <table class="component-astronomy">
        <tr>
          <td>
            <img src="../assets/phases/sun.webp" width="100px" height="100px" alt="sunrise" title="${m}"></img>
          </td>
          <td>
            predawn<br>dawn<br>sunrise<br>noon<br>azimuth
          <td>
          <td>
            ${Kt(a.nauticalDawn)}<br>${Kt(a.dawn)}<br>${Kt(a.sunrise)} - ${Kt(a.sunriseEnd)}<br>${Kt(a.solarNoon)}<br>
            ${Math.round(180*h.azimuth/Math.PI)}\xB0<br>
          </td>
          <td>
            <img src="../assets/phases/moon.webp" width="100px" height="100px" alt="sunset" style="margin-left: 0" title="${m}"></img>
          </td>
          <td style="padding-right: 10px">
            golden<br>sunset<br>dusk<br>night<br>altitude
          <td>
          <td>
            ${Kt(a.goldenHour)}<br>${Kt(a.sunsetStart)} - ${Kt(a.sunset)}<br>${Kt(a.dusk)} - ${Kt(a.nauticalDusk)}<br>${Kt(a.night)}<br>
            ${Math.round(180*h.altitude/Math.PI)}\xB0
          </td>
          <td>
            <img src="${p}" width="50px" height="50px" alt="moonrise" style="margin-left: 30px" title="${m}"></img>
          </td>
          <td>
            rise<br>set<br>phase<br>azimuth<br>altitude
          <td>
          <td>
            ${l.rise?Kt(l.rise):""}<br>${l.set?Kt(l.set):""}<br>${Math.round(100*(1-2*Math.abs(.5-c.phase)))}% ${d}<br>
            ${Math.round(180*u.azimuth/Math.PI)}\xB0<br>${Math.round(180*u.altitude/Math.PI)}\xB0
          </td>
        </tr>
      </table>
    `}};customElements.define("component-astronomy",Ra);var xe={white:e=>`<font color="white">${e}</font>`,green:e=>`<font color="lightgreen">${e}</font>`,coral:e=>`<font color="lightcoral">${e}</font>`,blue:e=>`<font color="lightblue">${e}</font>`,yellow:e=>`<font color="lightyellow">${e}</font>`,grey:e=>`<font color="lightgray">${e}</font>`,dark:e=>`<font color="gray">${e}</font>`,hex:(e,t)=>`<font color="#${t}">${e}</font>`,ok:(e,t)=>t?`<font color="lightgreen">${e}</font>`:`<font color="lightcoral">${e}</font>`};async function zo(e){if(I("updateLegend",{currently:e.currently}),!e||!e.currently)return;let t=document.getElementById("weather-legend");if(!t)return;let i="",n=e.currently.precipProbability<.02?"none":`<b>${Math.round(100*e.currently.precipProbability)}% for ${Math.round(100*e.currently.precipIntensity)/100} in</b>`,s=e.currently.nearestStormDistance?`<b>${e.currently.nearestStormDistance} mi <span style="display:inline-block;transform:rotate(${e.currently.nearestStormBearing}deg);"> \u2191 </span></b>`:"none";i+=xe.hex(`temperature <b>${Math.round(e.daily.data[0].temperatureLow)}\xB0 - ${Math.round(e.daily.data[0].temperatureHigh)}\xB0</b><br>`,"ff9696"),i+=xe.hex(`feels like <b>${Math.round(e.currently.apparentTemperature)}\xB0</b><br>`,"cca100"),i+=xe.hex(`humidity <b>${Math.round(100*e.currently.humidity)}%</b><br>`,"ffe100"),i+=xe.hex(`cloud cover <b>${Math.round(100*e.currently.cloudCover)}%</b><br>`,"cccccc"),i+=xe.hex(`rain ${n}<br>`,"52ff97"),i+=xe.hex(`wind <b>${Math.round(e.currently.windSpeed)} to ${Math.round(e.currently.windGust)} mph <span style="display:inline-block;transform:rotate(${e.currently.windBearing}deg);"> \u2191 </span></b><br>`,"00bbff"),i+=xe.hex(`uv index <span style="background-color: rgba(${15*e.currently.uvIndex}, ${15*(15-e.currently.uvIndex)}, ${0}, 1)"><b>&nbsp${e.currently.uvIndex}&nbsp</b></span><br>`,"ebebeb"),i+=xe.hex(`visibility <b>${e.currently.visibility} mi</b><br>`,"ebebeb"),i+=xe.hex(`dew point <b>${Math.round(e.currently.dewPoint)}\xB0</b><br>`,"ebebeb"),i+=xe.hex(`nearest storm ${s}<br>`,"ebebeb"),t.innerHTML=i}var Na=class extends HTMLElement{connectedCallback(){this.innerHTML=`
      <div style="width: fit-content">
        <div id="weather-legend" style="margin: 8px; html-align: center; line-height: 1.6rem"></div>
      </div>
    `}};customElements.define("component-legend",Na);var gg="../assets/weather";async function Fo(e){var c,h,u,f;I("updateToday",{currently:e.currently});let t=document.getElementById("component-today");if(!t)return;if(!e||!e.currently){t.style.display="none";return}t.style.display="block",t.setAttribute("time",Date.now().toString());let i=document.getElementById("component-today-icon");i.src=`${gg}/${e.currently.icon}.webp`,i.alt=e.currently.icon;let n="";for(let m of Object.entries(e.currently))m[0].toLowerCase().endsWith("time")&&(m[1]=P.fromSeconds(m[1]).toFormat("HH:mm")),n+=`${m[0]}: ${m[1]}
`;i.title=n,t.querySelector(".temp-current").textContent=`${Math.round(10*e.currently.temperature)/10}\xB0`,t.querySelector(".temp-feel").innerHTML=`feels like <b>${Math.round(e.currently.apparentTemperature)}</b>\xB0`,t.querySelector(".temp-minmax").innerHTML=`range <b>${Math.round(e.daily.data[0].temperatureLow)}\xB0 - ${Math.round(e.daily.data[0].temperatureHigh)}\xB0</b>`,(c=e.currently)!=null&&c.summary&&(t.querySelector(".desc-current").textContent=e.currently.summary.replace(".","").toLowerCase()),(h=e.minutely)!=null&&h.summary&&(t.querySelector(".desc-minute").textContent=e.minutely.summary.replace(".","").toLowerCase()),(u=e.hourly)!=null&&u.summary&&(t.querySelector(".desc-hour").textContent=e.hourly.summary.replace(".","").toLowerCase()),(f=e.daily)!=null&&f.summary&&(t.querySelector(".desc-daily").textContent=e.daily.summary.replace(".","").toLowerCase());let s=document.getElementById("component-today-column2");if(!s)return;let o="",r=e.currently.precipProbability<.02?"none":`<b>${Math.round(100*e.currently.precipProbability)}% for ${Math.round(100*e.currently.precipIntensity)/100} in</b>`;o+=`humidity <b>${Math.round(100*e.currently.humidity)}%</b><br>`,o+=`dew point <b>${Math.round(e.currently.dewPoint)}\xB0</b><br>`,o+=`cloud cover <b>${Math.round(100*e.currently.cloudCover)}%</b><br>`,o+=`pressure <b>${e.currently.pressure} mb</b><br>`,o+=`precipation <b>${r}</b><br>`,s.innerHTML=o;let a=document.getElementById("component-today-column3");if(!a)return;o="";let l=e.currently.nearestStormDistance?`<b>${e.currently.nearestStormDistance} mi &nbsp<span style="display:inline-block;transform:rotate(${e.currently.nearestStormBearing}deg);"> \u2191 </span></b>`:"none";o+=`uv index <span style="background-color: rgba(${15*e.currently.uvIndex}, ${15*(15-e.currently.uvIndex)}, ${0}, 1)"><b>&nbsp${e.currently.uvIndex}&nbsp</b></span><br>`,o+=`visibility <b>${e.currently.visibility} mi</b><br>`,o+=`wind <b>${Math.round(e.currently.windSpeed)} to ${Math.round(e.currently.windGust)} mph &nbsp&nbsp<span style="display:inline-block;transform:rotate(${e.currently.windBearing}deg);"> \u2191 </span></b><br>`,o+=`nearest storm ${l}<br>`,o+=`last update ${P.fromSeconds(e.currently.time).toFormat("HH:mm")}<br>`,a.innerHTML=o}var Ba=class extends HTMLElement{connectedCallback(){let t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";this.innerHTML=`
      <div id="component-today" class="component-today">
        <div class="current" id="day-0" style="display: flex; justify-content: center">
          <div class="component-today-icon" style="margin-right: 25px">
            <img id="component-today-icon" width="200" height="200" src="${t}"></img>
          </div>
          <div id="component-today-column1" style="margin-right: 25px">
            <div class="temp-current" style="text-align: center; font-size: 3.4rem"></div>
            <div class="temp-feel" style="line-height: 2rem"></div>
            <div class="temp-minmax"></div>
          </div>
          <div id="component-today-column2" style="margin: 12px 25px 0 25px; line-height: 1.4rem">
          </div>
          <div id="component-today-column3" style="margin: 12px 25px 0 25px; line-height: 1.4rem">
          </div>
        </div>
        <div class="component-today-notes">
          <div class="desc-current"></div> 
          <div class="desc-minute"></div>
          <div class="desc-hour"></div>
          <div class="desc-daily"></div>
        </div>
      </div>
    `}};customElements.define("component-today",Ba);var _g="../assets/weather";async function Ro(e){I("updateForecast",{daily:e.daily});let t=document.getElementById("component-forecast");if(!t)return;if(!e||!e.currently||!e.daily){t.style.display="none";return}t.style.display="flex",t.querySelectorAll(".component-forecast-day").forEach((n,s)=>{let o=e.daily.data[s+1],r=document.getElementById(`icon-${s+1}`);r.src=`${_g}/${o.icon}.webp`,r.alt=o.icon;let a="";for(let c of Object.entries(o))c[0].toLowerCase().endsWith("time")&&(c[1]=P.fromSeconds(c[1]).toFormat("HH:mm")),a+=`${c[0]}: ${c[1]}
`;r.title=a,n.querySelector(".component-forecast-date").textContent=P.fromSeconds(o.time).setZone(e.timezone).toFormat("ccc").toLowerCase(),n.querySelector(".component-forecast-temp-high").textContent=` ${Math.round(o.temperatureHigh)}\xB0 `,n.querySelector(".component-forecast-temp-low").textContent=` ${Math.round(o.temperatureLow)}\xB0 `;let l="";o.precipProbability>.05&&Math.round(100*o.precipIntensityMax)>0&&(l+=`
          <span style="color: rgb(${100}, ${100+Math.trunc(155*o.precipProbability)}, ${100})">
          ${o.precipType} ${Math.round(100*o.precipProbability)}% 
          </span>
        `),Math.round(100*o.precipIntensity)>0&&(l+=`
          <span style="color: black; background-color: rgb(${100}, ${100+Math.trunc(1500*o.precipIntensity)}, ${100})">
          <b>&nbsp${Math.min(Math.round(100*o.precipIntensity),10)}&nbsp</b></span>
        `),Math.round(100*o.precipIntensityMax)>0&&(l+=`
          <br>
          at ${P.fromSeconds(o.precipIntensityMaxTime).toFormat("HH:mm")} 
          <span style="color: black; background-color: rgb(${100}, ${100+Math.trunc(1500*o.precipIntensityMax)}, ${100})">
          <b>&nbsp${Math.min(Math.round(100*o.precipIntensityMax),10)}&nbsp</b></span>
        `),n.querySelector(".daily-rain").innerHTML=l}),t.style.visibility="visible"}var Ha=class extends HTMLElement{connectedCallback(){let t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";this.innerHTML=`
      <div id="component-forecast" class="component-forecast" style="visibility: hidden">
        <div class="component-forecast-day"><div class="component-forecast-date" id="day-1"></div>
          <div class="icon"><img id="icon-1" width="120" height="120" src="${t}"></img></div>
          <div class="day-details"><span class="component-forecast-temp-low"></span> - <span class="component-forecast-temp-high"></span><br><span class="daily-rain"</span></div>
        </div>
        <div class="component-forecast-day"><div class="component-forecast-date" id="day-2"></div>
          <div class="icon"><img id="icon-2" width="120" height="120" src="${t}"></img></div>
          <div class="day-details"><span class="component-forecast-temp-low"></span> - <span class="component-forecast-temp-high"></span><br><span class="daily-rain"</span></div>
        </div>
        <div class="component-forecast-day"><div class="component-forecast-date" id="day-3"></div>
          <div class="icon"><img id="icon-3" width="120" height="120" src="${t}"></img></div>
          <div class="day-details"><span class="component-forecast-temp-low"></span> - <span class="component-forecast-temp-high"></span><br><span class="daily-rain"</span></div>
        </div>
        <div class="component-forecast-day"><div class="component-forecast-date" id="day-4"></div>
          <div class="icon"><img id="icon-4" width="120" height="120" src="${t}"></img></div>
          <div class="day-details"><span class="component-forecast-temp-low"></span> - <span class="component-forecast-temp-high"></span><br><span class="daily-rain"</span></div>
        </div>
        <div class="component-forecast-day"><div class="component-forecast-date" id="day-5"></div>
          <div class="icon"><img id="icon-5" width="120" height="120" src="${t}"></img></div>
          <div class="day-details"><span class="component-forecast-temp-low"></span> - <span class="component-forecast-temp-high"></span><br><span class="daily-rain"</span></div>
        </div>
        <div class="component-forecast-day"><div class="component-forecast-date" id="day-6"></div>
          <div class="icon"><img id="icon-6" width="120" height="120" src="${t}"></img></div>
          <div class="day-details"><span class="component-forecast-temp-low"></span> - <span class="component-forecast-temp-high"></span><br><span class="daily-rain"</span></div>
        </div>
        <div class="component-forecast-day"><div class="component-forecast-date" id="day-7"></div>
          <div class="icon"><img id="icon-7" width="120" height="120" src="${t}"></img></div>
          <div class="day-details"><span class="component-forecast-temp-low"></span> - <span class="component-forecast-temp-high"></span><br><span class="daily-rain"</span></div>
        </div>
      </div>
    `}};customElements.define("component-forecast",Ha);function Ae(){}var fu=function(){let e=0;return function(){return e++}}();function q(e){return e===null||typeof e=="undefined"}function ct(e){if(Array.isArray&&Array.isArray(e))return!0;let t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function $(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}var St=e=>(typeof e=="number"||e instanceof Number)&&isFinite(+e);function Qt(e,t){return St(e)?e:t}function R(e,t){return typeof e=="undefined"?t:e}var mu=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:e/t,Ya=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ht(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function et(e,t,i,n){let s,o,r;if(ct(e))if(o=e.length,n)for(s=o-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<o;s++)t.call(i,e[s],s);else if($(e))for(r=Object.keys(e),o=r.length,s=0;s<o;s++)t.call(i,e[r[s]],r[s])}function Rs(e,t){let i,n,s,o;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],o=t[i],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Vo(e){if(ct(e))return e.map(Vo);if($(e)){let t=Object.create(null),i=Object.keys(e),n=i.length,s=0;for(;s<n;++s)t[i[s]]=Vo(e[i[s]]);return t}return e}function pu(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function yg(e,t,i,n){if(!pu(e))return;let s=t[e],o=i[e];$(s)&&$(o)?vn(s,o,n):t[e]=Vo(o)}function vn(e,t,i){let n=ct(t)?t:[t],s=n.length;if(!$(e))return e;i=i||{};let o=i.merger||yg;for(let r=0;r<s;++r){if(t=n[r],!$(t))continue;let a=Object.keys(t);for(let l=0,c=a.length;l<c;++l)o(a[l],e,t,i)}return e}function Tn(e,t){return vn(e,t,{merger:vg})}function vg(e,t,i){if(!pu(e))return;let n=t[e],s=i[e];$(n)&&$(s)?Tn(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Vo(s))}var Qh={"":e=>e,x:e=>e.x,y:e=>e.y};function ei(e,t){return(Qh[t]||(Qh[t]=bg(t)))(e)}function bg(e){let t=xg(e);return i=>{for(let n of t){if(n==="")break;i=i&&i[n]}return i}}function xg(e){let t=e.split("."),i=[],n="";for(let s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function Yo(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Jt=e=>typeof e!="undefined",ti=e=>typeof e=="function",qa=(e,t)=>{if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0};function gu(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}var ft=Math.PI,nt=2*ft,wg=nt+ft,$o=Number.POSITIVE_INFINITY,Tg=ft/180,xt=ft/2,Ds=ft/4,tu=ft*2/3,te=Math.log10,we=Math.sign;function Ga(e){let t=Math.round(e);e=Mn(e,t,e/1e3)?t:e;let i=Math.pow(10,Math.floor(te(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function _u(e){let t=[],i=Math.sqrt(e),n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((s,o)=>s-o).pop(),t}function Hi(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Mn(e,t,i){return Math.abs(e-t)<i}function yu(e,t){let i=Math.round(e);return i-t<=e&&i+t>=e}function Xa(e,t,i){let n,s,o;for(n=0,s=e.length;n<s;n++)o=e[n][i],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ue(e){return e*(ft/180)}function qo(e){return e*(180/ft)}function Ka(e){if(!St(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Ja(e,t){let i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n),o=Math.atan2(n,i);return o<-.5*ft&&(o+=nt),{angle:o,distance:s}}function jo(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Mg(e,t){return(e-t+wg)%nt-ft}function jt(e){return(e%nt+nt)%nt}function Sn(e,t,i,n){let s=jt(e),o=jt(t),r=jt(i),a=jt(o-s),l=jt(r-s),c=jt(s-o),h=jt(s-r);return s===o||s===r||n&&o===r||a>l&&c<h}function At(e,t,i){return Math.max(t,Math.min(i,e))}function vu(e){return At(e,-32768,32767)}function ze(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function Go(e,t,i){i=i||(r=>e[r]<t);let n=e.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,i(o)?s=o:n=o;return{lo:s,hi:n}}var De=(e,t,i,n)=>Go(e,i,n?s=>e[s][t]<=i:s=>e[s][t]<i),bu=(e,t,i)=>Go(e,i,n=>e[n][t]>=i);function xu(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}var wu=["push","pop","shift","splice","unshift"];function Tu(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),wu.forEach(i=>{let n="_onData"+Yo(i),s=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...o){let r=s.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function Qa(e,t){let i=e._chartjs;if(!i)return;let n=i.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(wu.forEach(o=>{delete e[o]}),delete e._chartjs)}function tl(e){let t=new Set,i,n;for(i=0,n=e.length;i<n;++i)t.add(e[i]);return t.size===n?e:Array.from(t)}var el=function(){return typeof window=="undefined"?function(e){return e()}:window.requestAnimationFrame}();function il(e,t,i){let n=i||(r=>Array.prototype.slice.call(r)),s=!1,o=[];return function(...r){o=n(r),s||(s=!0,el.call(window,()=>{s=!1,e.apply(t,o)}))}}function Mu(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}var Xo=e=>e==="start"?"left":e==="end"?"right":"center",Nt=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,Su=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t;function nl(e,t,i){let n=t.length,s=0,o=n;if(e._sorted){let{iScale:r,_parsed:a}=e,l=r.axis,{min:c,max:h,minDefined:u,maxDefined:f}=r.getUserBounds();u&&(s=At(Math.min(De(a,r.axis,c).lo,i?n:De(t,l,r.getPixelForValue(c)).lo),0,n-1)),f?o=At(Math.max(De(a,r.axis,h,!0).hi+1,i?0:De(t,l,r.getPixelForValue(h),!0).hi+1),s,n)-s:o=n-s}return{start:s,count:o}}function sl(e){let{xScale:t,yScale:i,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=s,!0;let o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),o}var No=e=>e===0||e===1,eu=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*nt/i)),iu=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*nt/i)+1,yn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*xt)+1,easeOutSine:e=>Math.sin(e*xt),easeInOutSine:e=>-.5*(Math.cos(ft*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>No(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>No(e)?e:eu(e,.075,.3),easeOutElastic:e=>No(e)?e:iu(e,.075,.3),easeInOutElastic(e){return No(e)?e:e<.5?.5*eu(e*2,.1125,.45):.5+.5*iu(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-yn.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?yn.easeInBounce(e*2)*.5:yn.easeOutBounce(e*2-1)*.5+.5};function Ns(e){return e+.5|0}var gi=(e,t,i)=>Math.max(Math.min(e,i),t);function As(e){return gi(Ns(e*2.55),0,255)}function _i(e){return gi(Ns(e*255),0,255)}function Qe(e){return gi(Ns(e/2.55)/100,0,1)}function nu(e){return gi(Ns(e*100),0,100)}var he={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ja=[..."0123456789ABCDEF"],Sg=e=>ja[e&15],Lg=e=>ja[(e&240)>>4]+ja[e&15],Bo=e=>(e&240)>>4===(e&15),kg=e=>Bo(e.r)&&Bo(e.g)&&Bo(e.b)&&Bo(e.a);function Pg(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&he[e[1]]*17,g:255&he[e[2]]*17,b:255&he[e[3]]*17,a:t===5?he[e[4]]*17:255}:(t===7||t===9)&&(i={r:he[e[1]]<<4|he[e[2]],g:he[e[3]]<<4|he[e[4]],b:he[e[5]]<<4|he[e[6]],a:t===9?he[e[7]]<<4|he[e[8]]:255})),i}var Eg=(e,t)=>e<255?t(e):"";function Og(e){var t=kg(e)?Sg:Lg;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Eg(e.a,t):void 0}var Cg=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Lu(e,t,i){let n=t*Math.min(i,1-i),s=(o,r=(o+e/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function Ig(e,t,i){let n=(s,o=(s+e/60)%6)=>i-i*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Dg(e,t,i){let n=Lu(e,1,.5),s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function Ag(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}function ol(e){let i=e.r/255,n=e.g/255,s=e.b/255,o=Math.max(i,n,s),r=Math.min(i,n,s),a=(o+r)/2,l,c,h;return o!==r&&(h=o-r,c=a>.5?h/(2-o-r):h/(o+r),l=Ag(i,n,s,h,o),l=l*60+.5),[l|0,c||0,a]}function rl(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(_i)}function al(e,t,i){return rl(Lu,e,t,i)}function zg(e,t,i){return rl(Dg,e,t,i)}function Fg(e,t,i){return rl(Ig,e,t,i)}function ku(e){return(e%360+360)%360}function Rg(e){let t=Cg.exec(e),i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?As(+t[5]):_i(+t[5]));let s=ku(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=zg(s,o,r):t[1]==="hsv"?n=Fg(s,o,r):n=al(s,o,r),{r:n[0],g:n[1],b:n[2],a:i}}function Ng(e,t){var i=ol(e);i[0]=ku(i[0]+t),i=al(i),e.r=i[0],e.g=i[1],e.b=i[2]}function Bg(e){if(!e)return;let t=ol(e),i=t[0],n=nu(t[1]),s=nu(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${Qe(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}var su={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ou={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Hg(){let e={},t=Object.keys(ou),i=Object.keys(su),n,s,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],s=0;s<i.length;s++)o=i[s],a=a.replace(o,su[o]);o=parseInt(ou[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}var Ho;function Wg(e){Ho||(Ho=Hg(),Ho.transparent=[0,0,0,0]);let t=Ho[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var Zg=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Vg(e){let t=Zg.exec(e),i=255,n,s,o;if(!!t){if(t[7]!==n){let r=+t[7];i=t[8]?As(r):gi(r*255,0,255)}return n=+t[1],s=+t[3],o=+t[5],n=255&(t[2]?As(n):gi(n,0,255)),s=255&(t[4]?As(s):gi(s,0,255)),o=255&(t[6]?As(o):gi(o,0,255)),{r:n,g:s,b:o,a:i}}}function $g(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Qe(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}var Wa=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,_n=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function jg(e,t,i){let n=_n(Qe(e.r)),s=_n(Qe(e.g)),o=_n(Qe(e.b));return{r:_i(Wa(n+i*(_n(Qe(t.r))-n))),g:_i(Wa(s+i*(_n(Qe(t.g))-s))),b:_i(Wa(o+i*(_n(Qe(t.b))-o))),a:e.a+i*(t.a-e.a)}}function Wo(e,t,i){if(e){let n=ol(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=al(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Pu(e,t){return e&&Object.assign(t||{},e)}function ru(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=_i(e[3]))):(t=Pu(e,{r:0,g:0,b:0,a:1}),t.a=_i(t.a)),t}function Ug(e){return e.charAt(0)==="r"?Vg(e):Rg(e)}var bn=class{constructor(t){if(t instanceof bn)return t;let i=typeof t,n;i==="object"?n=ru(t):i==="string"&&(n=Pg(t)||Wg(t)||Ug(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Pu(this._rgb);return t&&(t.a=Qe(t.a)),t}set rgb(t){this._rgb=ru(t)}rgbString(){return this._valid?$g(this._rgb):void 0}hexString(){return this._valid?Og(this._rgb):void 0}hslString(){return this._valid?Bg(this._rgb):void 0}mix(t,i){if(t){let n=this.rgb,s=t.rgb,o,r=i===o?.5:i,a=2*r-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*s.r+.5,n.g=255&c*n.g+o*s.g+.5,n.b=255&c*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=jg(this._rgb,t._rgb,i)),this}clone(){return new bn(this.rgb)}alpha(t){return this._rgb.a=_i(t),this}clearer(t){let i=this._rgb;return i.a*=1-t,this}greyscale(){let t=this._rgb,i=Ns(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){let i=this._rgb;return i.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Wo(this._rgb,2,t),this}darken(t){return Wo(this._rgb,2,-t),this}saturate(t){return Wo(this._rgb,1,t),this}desaturate(t){return Wo(this._rgb,1,-t),this}rotate(t){return Ng(this._rgb,t),this}};function Eu(e){return new bn(e)}function Ou(e){if(e&&typeof e=="object"){let t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ll(e){return Ou(e)?e:Eu(e)}function Za(e){return Ou(e)?e:Eu(e).saturate(.5).darken(.1).hexString()}var yi=Object.create(null),Ko=Object.create(null);function zs(e,t){if(!t)return e;let i=t.split(".");for(let n=0,s=i.length;n<s;++n){let o=i[n];e=e[o]||(e[o]=Object.create(null))}return e}function Va(e,t,i){return typeof t=="string"?vn(zs(e,t),i):vn(zs(e,""),t)}var Ua=class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>Za(n.backgroundColor),this.hoverBorderColor=(i,n)=>Za(n.borderColor),this.hoverColor=(i,n)=>Za(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,i){return Va(this,t,i)}get(t){return zs(this,t)}describe(t,i){return Va(Ko,t,i)}override(t,i){return Va(yi,t,i)}route(t,i,n,s){let o=zs(this,t),r=zs(this,n),a="_"+i;Object.defineProperties(o,{[a]:{value:o[i],writable:!0},[i]:{enumerable:!0,get(){let l=this[a],c=r[s];return $(l)?Object.assign({},c,l):R(l,c)},set(l){this[a]=l}}})}},j=new Ua({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Yg(e){return!e||q(e.size)||q(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Fs(e,t,i,n,s){let o=t[s];return o||(o=t[s]=e.measureText(s).width,i.push(s)),o>n&&(n=o),n}function Cu(e,t,i,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},o=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let r=0,a=i.length,l,c,h,u,f;for(l=0;l<a;l++)if(u=i[l],u!=null&&ct(u)!==!0)r=Fs(e,s,o,r,u);else if(ct(u))for(c=0,h=u.length;c<h;c++)f=u[c],f!=null&&!ct(f)&&(r=Fs(e,s,o,r,f));e.restore();let m=o.length/2;if(m>i.length){for(l=0;l<m;l++)delete s[o[l]];o.splice(0,m)}return r}function vi(e,t,i){let n=e.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function cl(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Jo(e,t,i,n){hl(e,t,i,n,null)}function hl(e,t,i,n,s){let o,r,a,l,c,h,u=t.pointStyle,f=t.rotation,m=t.radius,d=(f||0)*Tg;if(u&&typeof u=="object"&&(o=u.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(d),e.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),u){default:s?e.ellipse(i,n,s/2,m,0,0,nt):e.arc(i,n,m,0,nt),e.closePath();break;case"triangle":e.moveTo(i+Math.sin(d)*m,n-Math.cos(d)*m),d+=tu,e.lineTo(i+Math.sin(d)*m,n-Math.cos(d)*m),d+=tu,e.lineTo(i+Math.sin(d)*m,n-Math.cos(d)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,r=Math.cos(d+Ds)*l,a=Math.sin(d+Ds)*l,e.arc(i-r,n-a,c,d-ft,d-xt),e.arc(i+a,n-r,c,d-xt,d),e.arc(i+r,n+a,c,d,d+xt),e.arc(i-a,n+r,c,d+xt,d+ft),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*m,h=s?s/2:l,e.rect(i-h,n-l,2*h,2*l);break}d+=Ds;case"rectRot":r=Math.cos(d)*m,a=Math.sin(d)*m,e.moveTo(i-r,n-a),e.lineTo(i+a,n-r),e.lineTo(i+r,n+a),e.lineTo(i-a,n+r),e.closePath();break;case"crossRot":d+=Ds;case"cross":r=Math.cos(d)*m,a=Math.sin(d)*m,e.moveTo(i-r,n-a),e.lineTo(i+r,n+a),e.moveTo(i+a,n-r),e.lineTo(i-a,n+r);break;case"star":r=Math.cos(d)*m,a=Math.sin(d)*m,e.moveTo(i-r,n-a),e.lineTo(i+r,n+a),e.moveTo(i+a,n-r),e.lineTo(i-a,n+r),d+=Ds,r=Math.cos(d)*m,a=Math.sin(d)*m,e.moveTo(i-r,n-a),e.lineTo(i+r,n+a),e.moveTo(i+a,n-r),e.lineTo(i-a,n+r);break;case"line":r=s?s/2:Math.cos(d)*m,a=Math.sin(d)*m,e.moveTo(i-r,n-a),e.lineTo(i+r,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(d)*m,n+Math.sin(d)*m);break}e.fill(),t.borderWidth>0&&e.stroke()}}function xn(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function Bs(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Hs(e){e.restore()}function Iu(e,t,i,n,s){if(!t)return e.lineTo(i.x,i.y);if(s==="middle"){let o=(t.x+i.x)/2;e.lineTo(o,t.y),e.lineTo(o,i.y)}else s==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Du(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function bi(e,t,i,n,s,o={}){let r=ct(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="",l,c;for(e.save(),e.font=s.string,qg(e,o),l=0;l<r.length;++l)c=r[l],a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),q(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,i,n,o.maxWidth)),e.fillText(c,i,n,o.maxWidth),Gg(e,i,n,c,o),n+=s.lineHeight;e.restore()}function qg(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),q(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Gg(e,t,i,n,s){if(s.strikethrough||s.underline){let o=e.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,c=i+o.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(r,h),e.lineTo(a,h),e.stroke()}}function Ln(e,t){let{x:i,y:n,w:s,h:o,radius:r}=t;e.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-xt,ft,!0),e.lineTo(i,n+o-r.bottomLeft),e.arc(i+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,ft,xt,!0),e.lineTo(i+s-r.bottomRight,n+o),e.arc(i+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,xt,0,!0),e.lineTo(i+s,n+r.topRight),e.arc(i+s-r.topRight,n+r.topRight,r.topRight,0,-xt,!0),e.lineTo(i+r.topLeft,n)}var Xg=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Kg=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Jg(e,t){let i=(""+e).match(Xg);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}var Qg=e=>+e||0;function Qo(e,t){let i={},n=$(t),s=n?Object.keys(t):t,o=$(e)?n?r=>R(e[r],e[t[r]]):r=>e[r]:()=>e;for(let r of s)i[r]=Qg(o(r));return i}function ul(e){return Qo(e,{top:"y",right:"x",bottom:"y",left:"x"})}function xi(e){return Qo(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Bt(e){let t=ul(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ot(e,t){e=e||{},t=t||j.font;let i=R(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=R(e.style,t.style);n&&!(""+n).match(Kg)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");let s={family:R(e.family,t.family),lineHeight:Jg(R(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:R(e.weight,t.weight),string:""};return s.string=Yg(s),s}function kn(e,t,i,n){let s=!0,o,r,a;for(o=0,r=e.length;o<r;++o)if(a=e[o],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),i!==void 0&&ct(a)&&(a=a[i%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function Au(e,t,i){let{min:n,max:s}=e,o=Ya(t,(s-n)/2),r=(a,l)=>i&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function ii(e,t){return Object.assign(Object.create(e),t)}function tr(e,t=[""],i=e,n,s=()=>e[0]){Jt(n)||(n=Ru("_fallback",e));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:s,override:r=>tr([r,...e],t,i,n)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete r._keys,delete e[0][a],!0},get(r,a){return zu(r,a,()=>a_(a,t,e,r))},getOwnPropertyDescriptor(r,a){return Reflect.getOwnPropertyDescriptor(r._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(r,a){return lu(r).includes(a)},ownKeys(r){return lu(r)},set(r,a,l){let c=r._storage||(r._storage=s());return r[a]=c[a]=l,delete r._keys,!0}})}function Bi(e,t,i,n){let s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:dl(e,n),setContext:o=>Bi(e,o,i,n),override:o=>Bi(e.override(o),t,i,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return zu(o,r,()=>e_(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function dl(e,t={scriptable:!0,indexable:!0}){let{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:ti(i)?i:()=>i,isIndexable:ti(n)?n:()=>n}}var t_=(e,t)=>e?e+Yo(t):t,fl=(e,t)=>$(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function zu(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];let n=i();return e[t]=n,n}function e_(e,t,i){let{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=e,a=n[t];return ti(a)&&r.isScriptable(t)&&(a=i_(t,a,e,i)),ct(a)&&a.length&&(a=n_(t,a,e,r.isIndexable)),fl(t,a)&&(a=Bi(a,s,o&&o[t],r)),a}function i_(e,t,i,n){let{_proxy:s,_context:o,_subProxy:r,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);return a.add(e),t=t(o,r||n),a.delete(e),fl(e,t)&&(t=ml(s._scopes,s,e,t)),t}function n_(e,t,i,n){let{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=i;if(Jt(o.index)&&n(e))t=t[o.index%t.length];else if($(t[0])){let l=t,c=s._scopes.filter(h=>h!==l);t=[];for(let h of l){let u=ml(c,s,e,h);t.push(Bi(u,o,r&&r[e],a))}}return t}function Fu(e,t,i){return ti(e)?e(t,i):e}var s_=(e,t)=>e===!0?t:typeof e=="string"?ei(t,e):void 0;function o_(e,t,i,n,s){for(let o of t){let r=s_(i,o);if(r){e.add(r);let a=Fu(r._fallback,i,s);if(Jt(a)&&a!==i&&a!==n)return a}else if(r===!1&&Jt(n)&&i!==n)return null}return!1}function ml(e,t,i,n){let s=t._rootScopes,o=Fu(t._fallback,i,n),r=[...e,...s],a=new Set;a.add(n);let l=au(a,r,i,o||i,n);return l===null||Jt(o)&&o!==i&&(l=au(a,r,o,l,n),l===null)?!1:tr(Array.from(a),[""],s,o,()=>r_(t,i,n))}function au(e,t,i,n,s){for(;i;)i=o_(e,t,i,n,s);return i}function r_(e,t,i){let n=e._getTarget();t in n||(n[t]={});let s=n[t];return ct(s)&&$(i)?i:s}function a_(e,t,i,n){let s;for(let o of t)if(s=Ru(t_(o,e),i),Jt(s))return fl(e,s)?ml(i,n,e,s):s}function Ru(e,t){for(let i of t){if(!i)continue;let n=i[e];if(Jt(n))return n}}function lu(e){let t=e._keys;return t||(t=e._keys=l_(e._scopes)),t}function l_(e){let t=new Set;for(let i of e)for(let n of Object.keys(i).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}function pl(e,t,i,n){let{iScale:s}=e,{key:o="r"}=this._parsing,r=new Array(n),a,l,c,h;for(a=0,l=n;a<l;++a)c=a+i,h=t[c],r[a]={r:s.parse(ei(h,o),c)};return r}var c_=Number.EPSILON||1e-14,wn=(e,t)=>t<e.length&&!e[t].skip&&e[t],Nu=e=>e==="x"?"y":"x";function h_(e,t,i,n){let s=e.skip?t:e,o=t,r=i.skip?t:i,a=jo(o,s),l=jo(r,o),c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;let u=n*c,f=n*h;return{previous:{x:o.x-u*(r.x-s.x),y:o.y-u*(r.y-s.y)},next:{x:o.x+f*(r.x-s.x),y:o.y+f*(r.y-s.y)}}}function u_(e,t,i){let n=e.length,s,o,r,a,l,c=wn(e,0);for(let h=0;h<n-1;++h)if(l=c,c=wn(e,h+1),!(!l||!c)){if(Mn(t[h],0,c_)){i[h]=i[h+1]=0;continue}s=i[h]/t[h],o=i[h+1]/t[h],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),i[h]=s*r*t[h],i[h+1]=o*r*t[h])}}function d_(e,t,i="x"){let n=Nu(i),s=e.length,o,r,a,l=wn(e,0);for(let c=0;c<s;++c){if(r=a,a=l,l=wn(e,c+1),!a)continue;let h=a[i],u=a[n];r&&(o=(h-r[i])/3,a[`cp1${i}`]=h-o,a[`cp1${n}`]=u-o*t[c]),l&&(o=(l[i]-h)/3,a[`cp2${i}`]=h+o,a[`cp2${n}`]=u+o*t[c])}}function f_(e,t="x"){let i=Nu(t),n=e.length,s=Array(n).fill(0),o=Array(n),r,a,l,c=wn(e,0);for(r=0;r<n;++r)if(a=l,l=c,c=wn(e,r+1),!!l){if(c){let h=c[t]-l[t];s[r]=h!==0?(c[i]-l[i])/h:0}o[r]=a?c?we(s[r-1])!==we(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}u_(e,s,o),d_(e,o,t)}function Zo(e,t,i){return Math.max(Math.min(e,i),t)}function m_(e,t){let i,n,s,o,r,a=xn(e[0],t);for(i=0,n=e.length;i<n;++i)r=o,o=a,a=i<n-1&&xn(e[i+1],t),o&&(s=e[i],r&&(s.cp1x=Zo(s.cp1x,t.left,t.right),s.cp1y=Zo(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Zo(s.cp2x,t.left,t.right),s.cp2y=Zo(s.cp2y,t.top,t.bottom)))}function Bu(e,t,i,n,s){let o,r,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")f_(e,s);else{let c=n?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)a=e[o],l=h_(c,a,e[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&m_(e,i)}function gl(){return typeof window!="undefined"&&typeof document!="undefined"}function er(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Uo(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}var ir=e=>window.getComputedStyle(e,null);function p_(e,t){return ir(e).getPropertyValue(t)}var g_=["top","right","bottom","left"];function Ni(e,t,i){let n={};i=i?"-"+i:"";for(let s=0;s<4;s++){let o=g_[s];n[o]=parseFloat(e[t+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var __=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function y_(e,t){let i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:o}=n,r=!1,a,l;if(__(s,o,e.target))a=s,l=o;else{let c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function wi(e,t){if("native"in e)return e;let{canvas:i,currentDevicePixelRatio:n}=t,s=ir(i),o=s.boxSizing==="border-box",r=Ni(s,"padding"),a=Ni(s,"border","width"),{x:l,y:c,box:h}=y_(e,i),u=r.left+(h&&a.left),f=r.top+(h&&a.top),{width:m,height:d}=t;return o&&(m-=r.width+a.width,d-=r.height+a.height),{x:Math.round((l-u)/m*i.width/n),y:Math.round((c-f)/d*i.height/n)}}function v_(e,t,i){let n,s;if(t===void 0||i===void 0){let o=er(e);if(!o)t=e.clientWidth,i=e.clientHeight;else{let r=o.getBoundingClientRect(),a=ir(o),l=Ni(a,"border","width"),c=Ni(a,"padding");t=r.width-c.width-l.width,i=r.height-c.height-l.height,n=Uo(a.maxWidth,o,"clientWidth"),s=Uo(a.maxHeight,o,"clientHeight")}}return{width:t,height:i,maxWidth:n||$o,maxHeight:s||$o}}var $a=e=>Math.round(e*10)/10;function Hu(e,t,i,n){let s=ir(e),o=Ni(s,"margin"),r=Uo(s.maxWidth,e,"clientWidth")||$o,a=Uo(s.maxHeight,e,"clientHeight")||$o,l=v_(e,t,i),{width:c,height:h}=l;if(s.boxSizing==="content-box"){let u=Ni(s,"border","width"),f=Ni(s,"padding");c-=f.width+u.width,h-=f.height+u.height}return c=Math.max(0,c-o.width),h=Math.max(0,n?Math.floor(c/n):h-o.height),c=$a(Math.min(c,r,l.maxWidth)),h=$a(Math.min(h,a,l.maxHeight)),c&&!h&&(h=$a(c/2)),{width:c,height:h}}function _l(e,t,i){let n=t||1,s=Math.floor(e.height*n),o=Math.floor(e.width*n);e.height=s/n,e.width=o/n;let r=e.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(e.currentDevicePixelRatio=n,r.height=s,r.width=o,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}var Wu=function(){let e=!1;try{let t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}return e}();function yl(e,t){let i=p_(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function pi(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function Zu(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function Vu(e,t,i,n){let s={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=pi(e,s,i),a=pi(s,o,i),l=pi(o,t,i),c=pi(r,a,i),h=pi(a,l,i);return pi(c,h,i)}var cu=new Map;function b_(e,t){t=t||{};let i=e+JSON.stringify(t),n=cu.get(i);return n||(n=new Intl.NumberFormat(e,t),cu.set(i,n)),n}function Pn(e,t,i){return b_(t,i).format(e)}var x_=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},w_=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Wi(e,t,i){return e?x_(t,i):w_()}function vl(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function bl(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function $u(e){return e==="angle"?{between:Sn,compare:Mg,normalize:jt}:{between:ze,compare:(t,i)=>t-i,normalize:t=>t}}function hu({start:e,end:t,count:i,loop:n,style:s}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:s}}function T_(e,t,i){let{property:n,start:s,end:o}=i,{between:r,normalize:a}=$u(n),l=t.length,{start:c,end:h,loop:u}=e,f,m;if(u){for(c+=l,h+=l,f=0,m=l;f<m&&r(a(t[c%l][n]),s,o);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:e.style}}function xl(e,t,i){if(!i)return[e];let{property:n,start:s,end:o}=i,r=t.length,{compare:a,between:l,normalize:c}=$u(n),{start:h,end:u,loop:f,style:m}=T_(e,t,i),d=[],p=!1,g=null,_,y,x,v=()=>l(s,x,_)&&a(s,x)!==0,b=()=>a(o,_)===0||l(o,x,_),M=()=>p||v(),T=()=>!p||b();for(let w=h,k=h;w<=u;++w)y=t[w%r],!y.skip&&(_=c(y[n]),_!==x&&(p=l(_,s,o),g===null&&M()&&(g=a(_,s)===0?w:k),g!==null&&T()&&(d.push(hu({start:g,end:w,loop:f,count:r,style:m})),g=null),k=w,x=_));return g!==null&&d.push(hu({start:g,end:u,loop:f,count:r,style:m})),d}function wl(e,t){let i=[],n=e.segments;for(let s=0;s<n.length;s++){let o=xl(n[s],e.points,t);o.length&&i.push(...o)}return i}function M_(e,t,i,n){let s=0,o=t-1;if(i&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,i&&(o+=s);o>s&&e[o%t].skip;)o--;return o%=t,{start:s,end:o}}function S_(e,t,i,n){let s=e.length,o=[],r=t,a=e[t],l;for(l=t+1;l<=i;++l){let c=e[l%s];c.skip||c.stop?a.skip||(n=!1,o.push({start:t%s,end:(l-1)%s,loop:n}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%s,end:r%s,loop:n}),o}function ju(e,t){let i=e.points,n=e.options.spanGaps,s=i.length;if(!s)return[];let o=!!e._loop,{start:r,end:a}=M_(i,s,o,n);if(n===!0)return uu(e,[{start:r,end:a,loop:o}],i,t);let l=a<r?a+s:a,c=!!e._fullLoop&&r===0&&a===s-1;return uu(e,S_(i,r,l,c),i,t)}function uu(e,t,i,n){return!n||!n.setContext||!i?t:L_(e,t,i,n)}function L_(e,t,i,n){let s=e._chart.getContext(),o=du(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=i.length,c=[],h=o,u=t[0].start,f=u;function m(d,p,g,_){let y=a?-1:1;if(d!==p){for(d+=l;i[d%l].skip;)d-=y;for(;i[p%l].skip;)p+=y;d%l!==p%l&&(c.push({start:d%l,end:p%l,loop:g,style:_}),h=_,u=p%l)}}for(let d of t){u=a?u:d.start;let p=i[u%l],g;for(f=u+1;f<=d.end;f++){let _=i[f%l];g=du(n.setContext(ii(s,{type:"segment",p0:p,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),k_(g,h)&&m(u,f-1,d.loop,h),p=_,h=g}u<f-1&&m(u,f-1,d.loop,h)}return c}function du(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function k_(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var Il=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,s){let o=i.listeners[s],r=i.duration;o.forEach(a=>a({chart:t,initial:i.initial,numSteps:r,currentStep:Math.min(n-i.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=el.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;let o=n.items,r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),o.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),i+=o.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){let i=this._charts,n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){let i=this._charts.get(t);!i||(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;let i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){let i=this._charts.get(t);if(!i||!i.items.length)return;let n=i.items,s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},ni=new Il,Uu="transparent",P_={boolean(e,t,i){return i>.5?t:e},color(e,t,i){let n=ll(e||Uu),s=n.valid&&ll(t||Uu);return s&&s.valid?s.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}},Dl=class{constructor(t,i,n,s){let o=i[n];s=kn([t.to,s,o,t.from]);let r=kn([t.from,o,s]);this._active=!0,this._fn=t.fn||P_[t.type||typeof r],this._easing=yn[t.easing]||yn.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);let s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=kn([t.to,i,s,t.from]),this._from=kn([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let i=t-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to,l;if(this._active=o!==a&&(r||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=o;return}l=i/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){let i=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}},E_=["x","y","borderWidth","radius","tension"],O_=["color","borderColor","backgroundColor"];j.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var C_=Object.keys(j.animation);j.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"});j.set("animations",{colors:{type:"color",properties:O_},numbers:{type:"number",properties:E_}});j.describe("animations",{_fallback:"animation"});j.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}});var hr=class{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!$(t))return;let i=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{let s=t[n];if(!$(s))return;let o={};for(let r of C_)o[r]=s[r];(ct(s.properties)&&s.properties||[n]).forEach(r=>{(r===n||!i.has(r))&&i.set(r,o)})})}_animateOptions(t,i){let n=i.options,s=D_(t,n);if(!s)return[];let o=this._createAnimations(s,n);return n.$shared&&I_(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,i){let n=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(i),a=Date.now(),l;for(l=r.length-1;l>=0;--l){let c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,i));continue}let h=i[c],u=o[c],f=n.get(c);if(u)if(f&&u.active()){u.update(f,h,a);continue}else u.cancel();if(!f||!f.duration){t[c]=h;continue}o[c]=u=new Dl(f,t,c,h),s.push(u)}return s}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}let n=this._createAnimations(t,i);if(n.length)return ni.add(this._chart,n),!0}};function I_(e,t){let i=[],n=Object.keys(t);for(let s=0;s<n.length;s++){let o=e[n[s]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}function D_(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Yu(e,t){let i=e&&e.options||{},n=i.reverse,s=i.min===void 0?t:0,o=i.max===void 0?t:0;return{start:n?o:s,end:n?s:o}}function A_(e,t,i){if(i===!1)return!1;let n=Yu(e,i),s=Yu(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function z_(e){let t,i,n,s;return $(e)?(t=e.top,i=e.right,n=e.bottom,s=e.left):t=i=n=s=e,{top:t,right:i,bottom:n,left:s,disabled:e===!1}}function Rd(e,t){let i=[],n=e._getSortedDatasetMetas(t),s,o;for(s=0,o=n.length;s<o;++s)i.push(n[s].index);return i}function qu(e,t,i,n={}){let s=e.keys,o=n.mode==="single",r,a,l,c;if(t!==null){for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===i){if(n.all)continue;break}c=e.values[l],St(c)&&(o||t===0||we(t)===we(c))&&(t+=c)}return t}}function F_(e){let t=Object.keys(e),i=new Array(t.length),n,s,o;for(n=0,s=t.length;n<s;++n)o=t[n],i[n]={x:o,y:e[o]};return i}function Gu(e,t){let i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function R_(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function N_(e){let{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function B_(e,t,i){let n=e[t]||(e[t]={});return n[i]||(n[i]={})}function Xu(e,t,i,n){for(let s of t.getMatchingVisibleMetas(n).reverse()){let o=e[s.index];if(i&&o>0||!i&&o<0)return s.index}return null}function Ku(e,t){let{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,h=R_(o,r,n),u=t.length,f;for(let m=0;m<u;++m){let d=t[m],{[l]:p,[c]:g}=d,_=d._stacks||(d._stacks={});f=_[c]=B_(s,h,p),f[a]=g,f._top=Xu(f,r,!0,n.type),f._bottom=Xu(f,r,!1,n.type)}}function Tl(e,t){let i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function H_(e,t){return ii(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function W_(e,t,i){return ii(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function Ws(e,t){let i=e.controller.index,n=e.vScale&&e.vScale.axis;if(!!n){t=t||e._parsed;for(let s of t){let o=s._stacks;if(!o||o[n]===void 0||o[n][i]===void 0)return;delete o[n][i]}}}var Ml=e=>e==="reset"||e==="none",Ju=(e,t)=>t?e:Object.assign({},e),Z_=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:Rd(i,!0),values:null},ee=class{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Gu(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Ws(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(u,f,m,d)=>u==="x"?f:u==="r"?d:m,o=i.xAxisID=R(n.xAxisID,Tl(t,"x")),r=i.yAxisID=R(n.yAxisID,Tl(t,"y")),a=i.rAxisID=R(n.rAxisID,Tl(t,"r")),l=i.indexAxis,c=i.iAxisID=s(l,o,r,a),h=i.vAxisID=s(l,r,o,a);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(r),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Qa(this._data,this),t._stacked&&Ws(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if($(i))this._data=F_(i);else if(n!==i){if(n){Qa(n,this);let s=this._cachedMeta;Ws(s),s._parsed=[]}i&&Object.isExtensible(i)&&Tu(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,n=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=Gu(i.vScale,i),i.stack!==n.stack&&(s=!0,Ws(i),i.stack=n.stack),this._resyncElements(t),(s||o!==i._stacked)&&Ku(this,i._parsed)}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,a=o.axis,l=t===0&&i===s.length?!0:n._sorted,c=t>0&&n._parsed[t-1],h,u,f;if(this._parsing===!1)n._parsed=s,n._sorted=!0,f=s;else{ct(s[t])?f=this.parseArrayData(n,s,t,i):$(s[t])?f=this.parseObjectData(n,s,t,i):f=this.parsePrimitiveData(n,s,t,i);let m=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<i;++h)n._parsed[h+t]=u=f[h],l&&(m()&&(l=!1),c=u);n._sorted=l}r&&Ku(this,f)}parsePrimitiveData(t,i,n,s){let{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),h=o===r,u=new Array(s),f,m,d;for(f=0,m=s;f<m;++f)d=f+n,u[f]={[a]:h||o.parse(c[d],d),[l]:r.parse(i[d],d)};return u}parseArrayData(t,i,n,s){let{xScale:o,yScale:r}=t,a=new Array(s),l,c,h,u;for(l=0,c=s;l<c;++l)h=l+n,u=i[h],a[l]={x:o.parse(u[0],h),y:r.parse(u[1],h)};return a}parseObjectData(t,i,n,s){let{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s),h,u,f,m;for(h=0,u=s;h<u;++h)f=h+n,m=i[f],c[h]={x:o.parse(ei(m,a),f),y:r.parse(ei(m,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){let s=this.chart,o=this._cachedMeta,r=i[t.axis],a={keys:Rd(s,!0),values:i._stacks[t.axis]};return qu(a,r,o.index,{mode:n})}updateRangeFromParsed(t,i,n,s){let o=n[i.axis],r=o===null?NaN:o,a=s&&n._stacks[i.axis];s&&a&&(s.values=a,r=qu(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,i){let n=this._cachedMeta,s=n._parsed,o=n._sorted&&t===n.iScale,r=s.length,a=this._getOtherScale(t),l=Z_(i,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=N_(a),f,m;function d(){m=s[f];let p=m[a.axis];return!St(m[t.axis])||h>p||u<p}for(f=0;f<r&&!(!d()&&(this.updateRangeFromParsed(c,t,m,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!d()){this.updateRangeFromParsed(c,t,m,l);break}}return c}getAllParsedValues(t){let i=this._cachedMeta._parsed,n=[],s,o,r;for(s=0,o=i.length;s<o;++s)r=i[s][t.axis],St(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,n=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=z_(R(this.options.clip,A_(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],o=i.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop,h;for(n.dataset&&n.dataset.draw(t,o,a,l),h=a;h<a+l;++h){let u=s[h];u.hidden||(u.active&&c?r.push(u):u.draw(t,o))}for(h=0;h<r.length;++h)r[h].draw(t,o)}getStyle(t,i){let n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let r=this._cachedMeta.data[t];o=r.$context||(r.$context=W_(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=H_(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){let s=i==="active",o=this._cachedDataOpts,r=t+"-"+i,a=o[r],l=this.enableOptionSharing&&Jt(n);if(a)return Ju(a,l);let c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),u=s?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),h),m=Object.keys(j.elements[t]),d=()=>this.getContext(n,s),p=c.resolveNamedOptions(f,m,d,u);return p.$shared&&(p.$shared=l,o[r]=Object.freeze(Ju(p,l))),p}_resolveAnimations(t,i,n){let s=this.chart,o=this._cachedDataOpts,r=`animation-${i}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){let h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,i),f=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(f,this.getContext(t,n,i))}let c=new hr(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(!!t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||Ml(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let n=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,n),{sharedOptions:o,includeOptions:r}}updateElement(t,i,n,s){Ml(s)?Object.assign(t,n):this._resolveAnimations(i,s).update(t,n)}updateSharedOptions(t,i,n){t&&!Ml(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,n=this._cachedMeta.data;for(let[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];let s=n.length,o=i.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,n=!0){let s=this._cachedMeta,o=s.data,r=t+i,a,l=c=>{for(c.length+=i,a=c.length-1;a>=r;a--)c[a]=c[a-i]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),n&&this.updateElements(o,t,i,"reset")}updateElements(t,i,n,s){}_removeElements(t,i){let n=this._cachedMeta;if(this._parsing){let s=n._parsed.splice(t,i);n._stacked&&Ws(n,s)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,n,s]=t;this[i](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};ee.defaults={};ee.prototype.datasetElementType=null;ee.prototype.dataElementType=null;function V_(e,t){if(!e._cache.$bar){let i=e.getMatchingVisibleMetas(t),n=[];for(let s=0,o=i.length;s<o;s++)n=n.concat(i[s].controller.getAllParsedValues(e));e._cache.$bar=tl(n.sort((s,o)=>s-o))}return e._cache.$bar}function $_(e){let t=e.iScale,i=V_(t,e.type),n=t._length,s,o,r,a,l=()=>{r===32767||r===-32768||(Jt(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(s=0,o=i.length;s<o;++s)r=t.getPixelForValue(i[s]),l();for(a=void 0,s=0,o=t.ticks.length;s<o;++s)r=t.getPixelForTick(s),l();return n}function j_(e,t,i,n){let s=i.barThickness,o,r;return q(s)?(o=t.min*i.categoryPercentage,r=i.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:t.pixels[e]-o/2}}function U_(e,t,i,n){let s=t.pixels,o=s[e],r=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null,l=i.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);let c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:i.barPercentage,start:c}}function Y_(e,t,i,n){let s=i.parse(e[0],n),o=i.parse(e[1],n),r=Math.min(s,o),a=Math.max(s,o),l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:o,min:r,max:a}}function Nd(e,t,i,n){return ct(e)?Y_(e,t,i,n):t[i.axis]=i.parse(e,n),t}function Qu(e,t,i,n){let s=e.iScale,o=e.vScale,r=s.getLabels(),a=s===o,l=[],c,h,u,f;for(c=i,h=i+n;c<h;++c)f=t[c],u={},u[s.axis]=a||s.parse(r[c],c),l.push(Nd(f,u,o,c));return l}function Sl(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function q_(e,t,i){return e!==0?we(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function G_(e){let t,i,n,s,o;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(s="end",o="start"):(s="start",o="end"),{start:i,end:n,reverse:t,top:s,bottom:o}}function X_(e,t,i,n){let s=t.borderSkipped,o={};if(!s){e.borderSkipped=o;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:r,end:a,reverse:l,top:c,bottom:h}=G_(e);s==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=h:(o[td(h,r,a,l)]=!0,s=c)),o[td(s,r,a,l)]=!0,e.borderSkipped=o}function td(e,t,i,n){return n?(e=K_(e,t,i),e=ed(e,i,t)):e=ed(e,t,i),e}function K_(e,t,i){return e===t?i:e===i?t:e}function ed(e,t,i){return e==="start"?t:e==="end"?i:e}function J_(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}var Cn=class extends ee{parsePrimitiveData(t,i,n,s){return Qu(t,i,n,s)}parseArrayData(t,i,n,s){return Qu(t,i,n,s)}parseObjectData(t,i,n,s){let{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,h=r.axis==="x"?a:l,u=[],f,m,d,p;for(f=n,m=n+s;f<m;++f)p=i[f],d={},d[o.axis]=o.parse(ei(p,c),f),u.push(Nd(ei(p,h),d,r,f));return u}updateRangeFromParsed(t,i,n,s){super.updateRangeFromParsed(t,i,n,s);let o=n._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:n,vScale:s}=i,o=this.getParsed(t),r=o._custom,a=Sl(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,n,s){let o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:f}=this._getSharedOptions(i,s);for(let m=i;m<i+n;m++){let d=this.getParsed(m),p=o||q(d[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),g=this._calculateBarIndexPixels(m,h),_=(d._stacks||{})[a.axis],y={horizontal:c,base:p.base,enableBorderRadius:!_||Sl(d._custom)||r===_._top||r===_._bottom,x:c?p.head:g.center,y:c?g.center:p.head,height:c?g.size:Math.abs(p.size),width:c?Math.abs(p.size):g.size};f&&(y.options=u||this.resolveDataElementOptions(m,t[m].active?"active":s));let x=y.options||t[m].options;X_(y,x,_,r),J_(y,x,h.ratio),this.updateElement(t[m],m,y,s)}}_getStacks(t,i){let{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=n.options.stacked,r=[],a=l=>{let c=l.controller.getParsed(i),h=c&&c[l.vScale.axis];if(q(h)||isNaN(h))return!0};for(let l of s)if(!(i!==void 0&&a(l))&&((o===!1||r.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,n){let s=this._getStacks(t,n),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,n=i.iScale,s=[],o,r;for(o=0,r=i.data.length;o<r;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));let a=t.barThickness;return{min:a||$_(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:n},options:{base:s,minBarLength:o}}=this,r=s||0,a=this.getParsed(t),l=a._custom,c=Sl(l),h=a[i.axis],u=0,f=n?this.applyStack(i,a,n):h,m,d;f!==h&&(u=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,h!==0&&we(h)!==we(l.barEnd)&&(u=0),u+=h);let p=!q(s)&&!c?s:u,g=i.getPixelForValue(p);if(this.chart.getDataVisibility(t)?m=i.getPixelForValue(u+f):m=g,d=m-g,Math.abs(d)<o){d=q_(d,i,r)*o,h===r&&(g-=d/2);let _=i.getPixelForDecimal(0),y=i.getPixelForDecimal(1),x=Math.min(_,y),v=Math.max(_,y);g=Math.max(Math.min(g,v),x),m=g+d}if(g===i.getPixelForValue(r)){let _=we(d)*i.getLineWidthForValue(r)/2;g+=_,d-=_}return{size:d,base:g,head:m,center:m+d/2}}_calculateBarIndexPixels(t,i){let n=i.scale,s=this.options,o=s.skipNull,r=R(s.maxBarThickness,1/0),a,l;if(i.grouped){let c=o?this._getStackCount(t):i.stackCount,h=s.barThickness==="flex"?U_(t,i,s,c):j_(t,i,s,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=h.start+h.chunk*u+h.chunk/2,l=Math.min(r,h.chunk*h.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(r,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){let t=this._cachedMeta,i=t.vScale,n=t.data,s=n.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&n[o].draw(this._ctx)}};Cn.id="bar";Cn.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};Cn.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};var In=class extends ee{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,n,s){let o=super.parsePrimitiveData(t,i,n,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(t,i,n,s){let o=super.parseArrayData(t,i,n,s);for(let r=0;r<o.length;r++){let a=i[n+r];o[r]._custom=R(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(t,i,n,s){let o=super.parseObjectData(t,i,n,s);for(let r=0;r<o.length;r++){let a=i[n+r];o[r]._custom=R(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let n=t.length-1;n>=0;--n)i=Math.max(i,t[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,{xScale:n,yScale:s}=i,o=this.getParsed(t),r=n.getLabelForValue(o.x),a=s.getLabelForValue(o.y),l=o._custom;return{label:i.label,value:"("+r+", "+a+(l?", "+l:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,n,s){let o=s==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(i,s),h=r.axis,u=a.axis;for(let f=i;f<i+n;f++){let m=t[f],d=!o&&this.getParsed(f),p={},g=p[h]=o?r.getPixelForDecimal(.5):r.getPixelForValue(d[h]),_=p[u]=o?a.getBasePixel():a.getPixelForValue(d[u]);p.skip=isNaN(g)||isNaN(_),c&&(p.options=l||this.resolveDataElementOptions(f,m.active?"active":s),o&&(p.options.radius=0)),this.updateElement(m,f,p,s)}}resolveDataElementOptions(t,i){let n=this.getParsed(t),s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=R(n&&n._custom,o),s}};In.id="bubble";In.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};In.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function Q_(e,t,i){let n=1,s=1,o=0,r=0;if(t<nt){let a=e,l=a+t,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),f=Math.sin(l),m=(x,v,b)=>Sn(x,a,l,!0)?1:Math.max(v,v*i,b,b*i),d=(x,v,b)=>Sn(x,a,l,!0)?-1:Math.min(v,v*i,b,b*i),p=m(0,c,u),g=m(xt,h,f),_=d(ft,c,u),y=d(ft+xt,h,f);n=(p-_)/2,s=(g-y)/2,o=-(p+_)/2,r=-(g+y)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}var Si=class extends ee{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=l=>+n[l];if($(n[t])){let{key:l="value"}=this._parsing;o=c=>+ei(n[c],l)}let r,a;for(r=t,a=t+i;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return ue(this.options.rotation-90)}_getCircumference(){return ue(this.options.circumference)}_getRotationExtents(){let t=nt,i=-nt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){let s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+r)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:n}=i,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(mu(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:d,offsetY:p}=Q_(u,h,l),g=(n.width-r)/f,_=(n.height-r)/m,y=Math.max(Math.min(g,_)/2,0),x=Ya(this.options.radius,y),v=Math.max(x*l,0),b=(x-v)/this._getVisibleDatasetWeightTotal();this.offsetX=d*x,this.offsetY=p*x,s.total=this.calculateTotal(),this.outerRadius=x-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){let n=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/nt)}updateElements(t,i,n,s){let o=s==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,h=(a.left+a.right)/2,u=(a.top+a.bottom)/2,f=o&&c.animateScale,m=f?0:this.innerRadius,d=f?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(i,s),_=this._getRotation(),y;for(y=0;y<i;++y)_+=this._circumference(y,o);for(y=i;y<i+n;++y){let x=this._circumference(y,o),v=t[y],b={x:h+this.offsetX,y:u+this.offsetY,startAngle:_,endAngle:_+x,circumference:x,outerRadius:d,innerRadius:m};g&&(b.options=p||this.resolveDataElementOptions(y,v.active?"active":s)),_+=x,this.updateElement(v,y,b,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,n=0,s;for(s=0;s<i.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?nt*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=Pn(i._parsed[t],n.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0,n=this.chart,s,o,r,a,l;if(!t){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),t=r.data,a=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let n=0,s=t.length;n<s;++n){let o=this.resolveDataElementOptions(n);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(t){return Math.max(R(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}};Si.id="doughnut";Si.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};Si.descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"};Si.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:i}}=e.legend.options;return t.labels.map((n,s)=>{let r=e.getDatasetMeta(0).controller.getStyle(s);return{text:n,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){let t=e.label,i=": "+e.formattedValue;return ct(t)?(t=t.slice(),t[0]+=i):t+=i,t}}}}};var Dn=class extends ee{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=i,r=this.chart._animationsDisabled,{start:a,count:l}=nl(i,s,r);this._drawStart=a,this._drawCount=l,sl(i)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;let c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,i,n,s){let o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(i,s),f=r.axis,m=a.axis,{spanGaps:d,segment:p}=this.options,g=Hi(d)?d:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||o||s==="none",y=i>0&&this.getParsed(i-1);for(let x=i;x<i+n;++x){let v=t[x],b=this.getParsed(x),M=_?v:{},T=q(b[m]),w=M[f]=r.getPixelForValue(b[f],x),k=M[m]=o||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[m],x);M.skip=isNaN(w)||isNaN(k)||T,M.stop=x>0&&Math.abs(b[f]-y[f])>g,p&&(M.parsed=b,M.raw=c.data[x]),u&&(M.options=h||this.resolveDataElementOptions(x,v.active?"active":s)),_||this.updateElement(v,x,M,s),y=b}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,n=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return n;let o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}};Dn.id="line";Dn.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};Dn.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};var An=class extends ee{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=Pn(i._parsed[t].r,n.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,n,s){return pl.bind(this)(t,i,n,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,n=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,i,n,s){let o=s==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,u=c.yCenter,f=c.getIndexAngle(0)-.5*ft,m=f,d,p=360/this.countVisibleElements();for(d=0;d<i;++d)m+=this._computeAngle(d,s,p);for(d=i;d<i+n;d++){let g=t[d],_=m,y=m+this._computeAngle(d,s,p),x=r.getDataVisibility(d)?c.getDistanceFromCenterForValue(this.getParsed(d).r):0;m=y,o&&(l.animateScale&&(x=0),l.animateRotate&&(_=y=f));let v={x:h,y:u,innerRadius:0,outerRadius:x,startAngle:_,endAngle:y,options:this.resolveDataElementOptions(d,g.active?"active":s)};this.updateElement(g,d,v,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,n){return this.chart.getDataVisibility(t)?ue(this.resolveDataElementOptions(t,i).angle||n):0}};An.id="polarArea";An.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};An.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:i}}=e.legend.options;return t.labels.map((n,s)=>{let r=e.getDatasetMeta(0).controller.getStyle(s);return{text:n,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};var qs=class extends Si{};qs.id="pie";qs.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};var zn=class extends ee{getLabelAndValue(t){let i=this._cachedMeta.vScale,n=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(t,i,n,s){return pl.bind(this)(t,i,n,s)}update(t){let i=this._cachedMeta,n=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(n.points=s,t!=="resize"){let r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);let a={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(n,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,n,s){let o=this._cachedMeta.rScale,r=s==="reset";for(let a=i;a<i+n;a++){let l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":s),h=o.getPointPositionForValue(a,this.getParsed(a).r),u=r?o.xCenter:h.x,f=r?o.yCenter:h.y,m={x:u,y:f,angle:h.angle,skip:isNaN(u)||isNaN(f),options:c};this.updateElement(l,a,m,s)}}};zn.id="radar";zn.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};zn.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};var ie=class{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){let{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return Hi(this.x)&&Hi(this.y)}getProps(t,i){let n=this.$animations;if(!i||!n)return this;let s={};return t.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}};ie.defaults={};ie.defaultRoutes=void 0;var Bd={values(e){return ct(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";let n=this.chart.options.locale,s,o=e;if(i.length>1){let c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=ty(e,i)}let r=te(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Pn(e,n,l)},logarithmic(e,t,i){if(e===0)return"0";let n=e/Math.pow(10,Math.floor(te(e)));return n===1||n===2||n===5?Bd.numeric.call(this,e,t,i):""}};function ty(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var gr={formatters:Bd};j.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});j.route("scale.ticks","color","","color");j.route("scale.grid","color","","borderColor");j.route("scale.grid","borderColor","","borderColor");j.route("scale.title","color","","color");j.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"});j.describe("scales",{_fallback:"scale"});j.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"});function ey(e,t){let i=e.options.ticks,n=i.maxTicksLimit||iy(e),s=i.major.enabled?sy(t):[],o=s.length,r=s[0],a=s[o-1],l=[];if(o>n)return oy(t,l,s,o/n),l;let c=ny(s,t,n);if(o>0){let h,u,f=o>1?Math.round((a-r)/(o-1)):null;for(nr(t,l,c,q(f)?0:r-f,r),h=0,u=o-1;h<u;h++)nr(t,l,c,s[h],s[h+1]);return nr(t,l,c,a,q(f)?t.length:a+f),l}return nr(t,l,c),l}function iy(e){let t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}function ny(e,t,i){let n=ry(e),s=t.length/i;if(!n)return Math.max(s,1);let o=_u(n);for(let r=0,a=o.length-1;r<a;r++){let l=o[r];if(l>s)return l}return Math.max(s,1)}function sy(e){let t=[],i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function oy(e,t,i,n){let s=0,o=i[0],r;for(n=Math.ceil(n),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=i[s*n])}function nr(e,t,i,n,s){let o=R(n,0),r=Math.min(R(s,e.length),e.length),a=0,l,c,h;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),h=o;h<0;)a++,h=Math.round(o+a*i);for(c=Math.max(o,0);c<r;c++)c===h&&(t.push(e[c]),a++,h=Math.round(o+a*i))}function ry(e){let t=e.length,i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}var ay=e=>e==="left"?"right":e==="right"?"left":e,id=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i;function nd(e,t){let i=[],n=e.length/t,s=e.length,o=0;for(;o<s;o+=n)i.push(e[Math.floor(o)]);return i}function ly(e,t,i){let n=e.ticks.length,s=Math.min(t,n-1),o=e._startPixel,r=e._endPixel,a=1e-6,l=e.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<o-a||l>r+a)))return l}function cy(e,t){et(e,i=>{let n=i.gc,s=n.length/2,o;if(s>t){for(o=0;o<s;++o)delete i.data[n[o]];n.splice(0,s)}})}function Zs(e){return e.drawTicks?e.tickLength:0}function sd(e,t){if(!e.display)return 0;let i=Ot(e.font,t),n=Bt(e.padding);return(ct(e.text)?e.text.length:1)*i.lineHeight+n.height}function hy(e,t){return ii(e,{scale:t,type:"scale"})}function uy(e,t,i){return ii(e,{tick:i,index:t,type:"tick"})}function dy(e,t,i){let n=Xo(e);return(i&&t!=="right"||!i&&t==="right")&&(n=ay(n)),n}function fy(e,t,i,n){let{top:s,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:h}=l,u=0,f,m,d,p=r-s,g=a-o;if(e.isHorizontal()){if(m=Nt(n,o,a),$(i)){let _=Object.keys(i)[0],y=i[_];d=h[_].getPixelForValue(y)+p-t}else i==="center"?d=(c.bottom+c.top)/2+p-t:d=id(e,i,t);f=a-o}else{if($(i)){let _=Object.keys(i)[0],y=i[_];m=h[_].getPixelForValue(y)-g+t}else i==="center"?m=(c.left+c.right)/2-g+t:m=id(e,i,t);d=Nt(n,r,s),u=i==="left"?-xt:xt}return{titleX:m,titleY:d,maxWidth:f,rotation:u}}var oi=class extends ie{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return t=Qt(t,Number.POSITIVE_INFINITY),i=Qt(i,Number.NEGATIVE_INFINITY),n=Qt(n,Number.POSITIVE_INFINITY),s=Qt(s,Number.NEGATIVE_INFINITY),{min:Qt(t,n),max:Qt(i,s),minDefined:St(t),maxDefined:St(i)}}getMinMax(t){let{min:i,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:i,max:n};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),s||(i=Math.min(i,r.min)),o||(n=Math.max(n,r.max));return i=o&&i>n?n:i,n=s&&i>n?i:n,{min:Qt(i,Qt(n,i)),max:Qt(n,Qt(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ht(this.options.beforeUpdate,[this])}update(t,i,n){let{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Au(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?nd(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=ey(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ht(this.options.afterUpdate,[this])}beforeSetDimensions(){ht(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ht(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ht(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ht(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let i=this.options.ticks,n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n],o.label=ht(i.callback,[o.value,n,t],this)}afterTickToLabelConversion(){ht(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ht(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,i=t.ticks,n=this.ticks.length,s=i.minRotation||0,o=i.maxRotation,r=s,a,l,c;if(!this._isVisible()||!i.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}let h=this._getLabelSizes(),u=h.widest.width,f=h.highest.height,m=At(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/n:m/(n-1),u+6>a&&(a=m/(n-(t.offset?.5:1)),l=this.maxHeight-Zs(t.grid)-i.padding-sd(t.title,this.chart.options.font),c=Math.sqrt(u*u+f*f),r=qo(Math.min(Math.asin(At((h.highest.height+6)/a,-1,1)),Math.asin(At(l/c,-1,1))-Math.asin(At(f/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){ht(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ht(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){let l=sd(s,i.options.font);if(a?(t.width=this.maxWidth,t.height=Zs(o)+l):(t.height=this.maxHeight,t.width=Zs(o)+l),n.display&&this.ticks.length){let{first:c,last:h,widest:u,highest:f}=this._getLabelSizes(),m=n.padding*2,d=ue(this.labelRotation),p=Math.cos(d),g=Math.sin(d);if(a){let _=n.mirror?0:g*u.width+p*f.height;t.height=Math.min(this.maxHeight,t.height+_+m)}else{let _=n.mirror?0:p*u.width+g*f.height;t.width=Math.min(this.maxWidth,t.width+_+m)}this._calculatePadding(c,h,g,p)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,s){let{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1),f=0,m=0;l?c?(f=s*t.width,m=n*i.height):(f=n*t.height,m=s*i.width):o==="start"?m=i.width:o==="end"?f=t.width:o!=="inner"&&(f=t.width/2,m=i.width/2),this.paddingLeft=Math.max((f-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-u+r)*this.width/(this.width-u),0)}else{let h=i.height/2,u=t.height/2;o==="start"?(h=0,u=t.height):o==="end"&&(h=i.height,u=0),this.paddingTop=h+r,this.paddingBottom=u+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ht(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)q(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let i=this.options.ticks.sampleSize,n=this.ticks;i<n.length&&(n=nd(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,i){let{ctx:n,_longestTextCache:s}=this,o=[],r=[],a=0,l=0,c,h,u,f,m,d,p,g,_,y,x;for(c=0;c<i;++c){if(f=t[c].label,m=this._resolveTickFontOptions(c),n.font=d=m.string,p=s[d]=s[d]||{data:{},gc:[]},g=m.lineHeight,_=y=0,!q(f)&&!ct(f))_=Fs(n,p.data,p.gc,_,f),y=g;else if(ct(f))for(h=0,u=f.length;h<u;++h)x=f[h],!q(x)&&!ct(x)&&(_=Fs(n,p.data,p.gc,_,x),y+=g);o.push(_),r.push(y),a=Math.max(_,a),l=Math.max(y,l)}cy(s,i);let v=o.indexOf(a),b=r.indexOf(l),M=T=>({width:o[T]||0,height:r[T]||0});return{first:M(0),last:M(i-1),widest:M(v),highest:M(b),widths:o,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let i=this._startPixel+t*this._length;return vu(this._alignToPixels?vi(this.chart,i,0):i)}getDecimalForPixel(t){let i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){let i=this.ticks||[];if(t>=0&&t<i.length){let n=i[t];return n.$context||(n.$context=uy(this.getContext(),t,n))}return this.$context||(this.$context=hy(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,i=ue(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let i=this.axis,n=this.chart,s=this.options,{grid:o,position:r}=s,a=o.offset,l=this.isHorizontal(),h=this.ticks.length+(a?1:0),u=Zs(o),f=[],m=o.setContext(this.getContext()),d=m.drawBorder?m.borderWidth:0,p=d/2,g=function(A){return vi(n,A,d)},_,y,x,v,b,M,T,w,k,V,Y,B;if(r==="top")_=g(this.bottom),M=this.bottom-u,w=_-p,V=g(t.top)+p,B=t.bottom;else if(r==="bottom")_=g(this.top),V=t.top,B=g(t.bottom)-p,M=_+p,w=this.top+u;else if(r==="left")_=g(this.right),b=this.right-u,T=_-p,k=g(t.left)+p,Y=t.right;else if(r==="right")_=g(this.left),k=t.left,Y=g(t.right)-p,b=_+p,T=this.left+u;else if(i==="x"){if(r==="center")_=g((t.top+t.bottom)/2+.5);else if($(r)){let A=Object.keys(r)[0],Mt=r[A];_=g(this.chart.scales[A].getPixelForValue(Mt))}V=t.top,B=t.bottom,M=_+p,w=M+u}else if(i==="y"){if(r==="center")_=g((t.left+t.right)/2);else if($(r)){let A=Object.keys(r)[0],Mt=r[A];_=g(this.chart.scales[A].getPixelForValue(Mt))}b=_-p,T=b-u,k=t.left,Y=t.right}let at=R(s.ticks.maxTicksLimit,h),Pt=Math.max(1,Math.ceil(h/at));for(y=0;y<h;y+=Pt){let A=o.setContext(this.getContext(y)),Mt=A.lineWidth,mt=A.color,oe=A.borderDash||[],E=A.borderDashOffset,C=A.tickWidth,D=A.tickColor,it=A.tickBorderDash||[],G=A.tickBorderDashOffset;x=ly(this,y,a),x!==void 0&&(v=vi(n,x,Mt),l?b=T=k=Y=v:M=w=V=B=v,f.push({tx1:b,ty1:M,tx2:T,ty2:w,x1:k,y1:V,x2:Y,y2:B,width:Mt,color:mt,borderDash:oe,borderDashOffset:E,tickWidth:C,tickColor:D,tickBorderDash:it,tickBorderDashOffset:G}))}return this._ticksLength=h,this._borderValue=_,f}_computeLabelItems(t){let i=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=o,f=Zs(n.grid),m=f+h,d=u?-h:m,p=-ue(this.labelRotation),g=[],_,y,x,v,b,M,T,w,k,V,Y,B,at="middle";if(s==="top")M=this.bottom-d,T=this._getXAxisLabelAlignment();else if(s==="bottom")M=this.top+d,T=this._getXAxisLabelAlignment();else if(s==="left"){let A=this._getYAxisLabelAlignment(f);T=A.textAlign,b=A.x}else if(s==="right"){let A=this._getYAxisLabelAlignment(f);T=A.textAlign,b=A.x}else if(i==="x"){if(s==="center")M=(t.top+t.bottom)/2+m;else if($(s)){let A=Object.keys(s)[0],Mt=s[A];M=this.chart.scales[A].getPixelForValue(Mt)+m}T=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")b=(t.left+t.right)/2-m;else if($(s)){let A=Object.keys(s)[0],Mt=s[A];b=this.chart.scales[A].getPixelForValue(Mt)}T=this._getYAxisLabelAlignment(f).textAlign}i==="y"&&(l==="start"?at="top":l==="end"&&(at="bottom"));let Pt=this._getLabelSizes();for(_=0,y=a.length;_<y;++_){x=a[_],v=x.label;let A=o.setContext(this.getContext(_));w=this.getPixelForTick(_)+o.labelOffset,k=this._resolveTickFontOptions(_),V=k.lineHeight,Y=ct(v)?v.length:1;let Mt=Y/2,mt=A.color,oe=A.textStrokeColor,E=A.textStrokeWidth,C=T;r?(b=w,T==="inner"&&(_===y-1?C=this.options.reverse?"left":"right":_===0?C=this.options.reverse?"right":"left":C="center"),s==="top"?c==="near"||p!==0?B=-Y*V+V/2:c==="center"?B=-Pt.highest.height/2-Mt*V+V:B=-Pt.highest.height+V/2:c==="near"||p!==0?B=V/2:c==="center"?B=Pt.highest.height/2-Mt*V:B=Pt.highest.height-Y*V,u&&(B*=-1)):(M=w,B=(1-Y)*V/2);let D;if(A.showLabelBackdrop){let it=Bt(A.backdropPadding),G=Pt.heights[_],_t=Pt.widths[_],st=M+B-it.top,yt=b-it.left;switch(at){case"middle":st-=G/2;break;case"bottom":st-=G;break}switch(T){case"center":yt-=_t/2;break;case"right":yt-=_t;break}D={left:yt,top:st,width:_t+it.width,height:G+it.height,color:A.backdropColor}}g.push({rotation:p,label:v,font:k,color:mt,strokeColor:oe,strokeWidth:E,textOffset:B,textAlign:C,textBaseline:at,translation:[b,M],backdrop:D})}return g}_getXAxisLabelAlignment(){let{position:t,ticks:i}=this.options;if(-ue(this.labelRotation))return t==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){let{position:i,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width,c,h;return i==="left"?s?(h=this.right+o,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h=this.left)):i==="right"?s?(h=this.left+o,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:i},left:n,top:s,width:o,height:r}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,s,o,r),t.restore())}getLineWidthForValue(t){let i=this.options.grid;if(!this._isVisible()||!i.display)return 0;let s=this.ticks.findIndex(o=>o.value===t);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){let i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),o,r,a=(l,c,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(o=0,r=s.length;o<r;++o){let l=s[o];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:i,options:{grid:n}}=this,s=n.setContext(this.getContext()),o=n.drawBorder?s.borderWidth:0;if(!o)return;let r=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue,l,c,h,u;this.isHorizontal()?(l=vi(t,this.left,o)-o/2,c=vi(t,this.right,r)+r/2,h=u=a):(h=vi(t,this.top,o)-o/2,u=vi(t,this.bottom,r)+r/2,l=c=a),i.save(),i.lineWidth=s.borderWidth,i.strokeStyle=s.borderColor,i.beginPath(),i.moveTo(l,h),i.lineTo(c,u),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;let n=this.ctx,s=this._computeLabelArea();s&&Bs(n,s);let o=this._labelItems||(this._labelItems=this._computeLabelItems(t)),r,a;for(r=0,a=o.length;r<a;++r){let l=o[r],c=l.font,h=l.label;l.backdrop&&(n.fillStyle=l.backdrop.color,n.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let u=l.textOffset;bi(n,h,0,u,c,l)}s&&Hs(n)}drawTitle(){let{ctx:t,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;let o=Ot(n.font),r=Bt(n.padding),a=n.align,l=o.lineHeight/2;i==="bottom"||i==="center"||$(i)?(l+=r.bottom,ct(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;let{titleX:c,titleY:h,maxWidth:u,rotation:f}=fy(this,l,i,a);bi(t,n.text,0,0,o,{color:n.color,maxWidth:u,rotation:f,textAlign:dy(a,i,s),textBaseline:"middle",translation:[c,h]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,i=t.ticks&&t.ticks.z||0,n=R(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==oi.prototype.draw?[{z:i,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:i,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){let i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[],o,r;for(o=0,r=i.length;o<r;++o){let a=i[o];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){let i=this.options.ticks.setContext(this.getContext(t));return Ot(i.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},On=class{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let i=Object.getPrototypeOf(t),n;gy(i)&&(n=this.register(i));let s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,my(t,r,n),this.override&&j.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){let i=this.items,n=t.id,s=this.scope;n in i&&delete i[n],s&&n in j[s]&&(delete j[s][n],this.override&&delete yi[n])}};function my(e,t,i){let n=vn(Object.create(null),[i?j.get(i):{},j.get(t),e.defaults]);j.set(t,n),e.defaultRoutes&&py(t,e.defaultRoutes),e.descriptors&&j.describe(t,e.descriptors)}function py(e,t){Object.keys(t).forEach(i=>{let n=i.split("."),s=n.pop(),o=[e].concat(n).join("."),r=t[i].split("."),a=r.pop(),l=r.join(".");j.route(o,s,l,a)})}function gy(e){return"id"in e&&"defaults"in e}var Al=class{constructor(){this.controllers=new On(ee,"datasets",!0),this.elements=new On(ie,"elements"),this.plugins=new On(Object,"plugins"),this.scales=new On(oi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(s=>{let o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):et(s,r=>{let a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,i,n){let s=Yo(t);ht(n["before"+s],[],n),i[t](n),ht(n["after"+s],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){let n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){let s=i.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}},Re=new Al,Fn=class extends ee{update(t){let i=this._cachedMeta,{data:n=[]}=i,s=this.chart._animationsDisabled,{start:o,count:r}=nl(i,n,s);if(this._drawStart=o,this._drawCount=r,sl(i)&&(o=0,r=n.length),this.options.showLine){let{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;let c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},t)}this.updateElements(n,o,r,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=Re.getElement("line")),super.addElements()}updateElements(t,i,n,s){let o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(i,s),u=this.getSharedOptions(h),f=this.includeOptions(s,u),m=r.axis,d=a.axis,{spanGaps:p,segment:g}=this.options,_=Hi(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||s==="none",x=i>0&&this.getParsed(i-1);for(let v=i;v<i+n;++v){let b=t[v],M=this.getParsed(v),T=y?b:{},w=q(M[d]),k=T[m]=r.getPixelForValue(M[m],v),V=T[d]=o||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,M,l):M[d],v);T.skip=isNaN(k)||isNaN(V)||w,T.stop=v>0&&Math.abs(M[m]-x[m])>_,g&&(T.parsed=M,T.raw=c.data[v]),f&&(T.options=u||this.resolveDataElementOptions(v,b.active?"active":s)),y||this.updateElement(b,v,T,s),x=M}this.updateSharedOptions(u,s,h)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}let n=t.dataset,s=n.options&&n.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,r)/2}};Fn.id="scatter";Fn.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};Fn.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var _y=Object.freeze({__proto__:null,BarController:Cn,BubbleController:In,DoughnutController:Si,LineController:Dn,PolarAreaController:An,PieController:qs,RadarController:zn,ScatterController:Fn});function Zi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Gs=class{constructor(t){this.options=t||{}}init(t){}formats(){return Zi()}parse(t,i){return Zi()}format(t,i){return Zi()}add(t,i,n){return Zi()}diff(t,i,n){return Zi()}startOf(t,i,n){return Zi()}endOf(t,i){return Zi()}};Gs.override=function(e){Object.assign(Gs.prototype,e)};var yy={_date:Gs};function vy(e,t,i,n){let{controller:s,data:o,_sorted:r}=e,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&r&&o.length){let l=a._reversePixels?bu:De;if(n){if(s._sharedOptions){let c=o[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){let u=l(o,t,i-h),f=l(o,t,i+h);return{lo:u.lo,hi:f.hi}}}}else return l(o,t,i)}return{lo:0,hi:o.length-1}}function io(e,t,i,n,s){let o=e.getSortedVisibleDatasetMetas(),r=i[t];for(let a=0,l=o.length;a<l;++a){let{index:c,data:h}=o[a],{lo:u,hi:f}=vy(o[a],t,r,s);for(let m=u;m<=f;++m){let d=h[m];d.skip||n(d,c,m)}}}function by(e){let t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,s){let o=t?Math.abs(n.x-s.x):0,r=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Ll(e,t,i,n,s){let o=[];return!s&&!e.isPointInArea(t)||io(e,i,t,function(a,l,c){!s&&!xn(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function xy(e,t,i,n){let s=[];function o(r,a,l){let{startAngle:c,endAngle:h}=r.getProps(["startAngle","endAngle"],n),{angle:u}=Ja(r,{x:t.x,y:t.y});Sn(u,c,h)&&s.push({element:r,datasetIndex:a,index:l})}return io(e,i,t,o),s}function wy(e,t,i,n,s,o){let r=[],a=by(i),l=Number.POSITIVE_INFINITY;function c(h,u,f){let m=h.inRange(t.x,t.y,s);if(n&&!m)return;let d=h.getCenterPoint(s);if(!(!!o||e.isPointInArea(d))&&!m)return;let g=a(t,d);g<l?(r=[{element:h,datasetIndex:u,index:f}],l=g):g===l&&r.push({element:h,datasetIndex:u,index:f})}return io(e,i,t,c),r}function kl(e,t,i,n,s,o){return!o&&!e.isPointInArea(t)?[]:i==="r"&&!n?xy(e,t,i,s):wy(e,t,i,n,s,o)}function od(e,t,i,n,s){let o=[],r=i==="x"?"inXRange":"inYRange",a=!1;return io(e,i,t,(l,c,h)=>{l[r](t[i],s)&&(o.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:o}var Ty={evaluateInteractionItems:io,modes:{index(e,t,i,n){let s=wi(t,e),o=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?Ll(e,s,o,n,r):kl(e,s,o,!1,n,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{let h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,i,n){let s=wi(t,e),o=i.axis||"xy",r=i.includeInvisible||!1,a=i.intersect?Ll(e,s,o,n,r):kl(e,s,o,!1,n,r);if(a.length>0){let l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,i,n){let s=wi(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return Ll(e,s,o,n,r)},nearest(e,t,i,n){let s=wi(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return kl(e,s,o,i.intersect,n,r)},x(e,t,i,n){let s=wi(t,e);return od(e,s,"x",i.intersect,n)},y(e,t,i,n){let s=wi(t,e);return od(e,s,"y",i.intersect,n)}}},Hd=["left","top","right","bottom"];function Vs(e,t){return e.filter(i=>i.pos===t)}function rd(e,t){return e.filter(i=>Hd.indexOf(i.pos)===-1&&i.box.axis===t)}function $s(e,t){return e.sort((i,n)=>{let s=t?n:i,o=t?i:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function My(e){let t=[],i,n,s,o,r,a;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],{position:o,options:{stack:r,stackWeight:a=1}}=s,t.push({index:i,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return t}function Sy(e){let t={};for(let i of e){let{stack:n,pos:s,stackWeight:o}=i;if(!n||!Hd.includes(s))continue;let r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function Ly(e,t){let i=Sy(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t,o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];let{fullSize:l}=a.box,c=i[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=h?h*s:l&&t.availableHeight)}return i}function ky(e){let t=My(e),i=$s(t.filter(c=>c.box.fullSize),!0),n=$s(Vs(t,"left"),!0),s=$s(Vs(t,"right")),o=$s(Vs(t,"top"),!0),r=$s(Vs(t,"bottom")),a=rd(t,"x"),l=rd(t,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:Vs(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function ad(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function Wd(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Py(e,t,i,n){let{pos:s,box:o}=i,r=e.maxPadding;if(!$(s)){i.size&&(e[s]-=i.size);let u=n[i.stack]||{size:0,count:1};u.size=Math.max(u.size,i.horizontal?o.height:o.width),i.size=u.size/u.count,e[s]+=i.size}o.getPadding&&Wd(r,o.getPadding());let a=Math.max(0,t.outerWidth-ad(r,e,"left","right")),l=Math.max(0,t.outerHeight-ad(r,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function Ey(e){let t=e.maxPadding;function i(n){let s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function Oy(e,t){let i=t.maxPadding;function n(s){let o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],i[r])}),o}return n(e?["left","right"]:["top","bottom"])}function Us(e,t,i,n){let s=[],o,r,a,l,c,h;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,Oy(a.horizontal,t));let{same:u,other:f}=Py(t,i,a,n);c|=u&&s.length,h=h||f,l.fullSize||s.push(a)}return c&&Us(s,t,i,n)||h}function sr(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function ld(e,t,i,n){let s=i.padding,{x:o,y:r}=t;for(let a of e){let l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){let u=t.w*h,f=c.size||l.height;Jt(c.start)&&(r=c.start),l.fullSize?sr(l,s.left,r,i.outerWidth-s.right-s.left,f):sr(l,t.left+c.placed,r,u,f),c.start=r,c.placed+=u,r=l.bottom}else{let u=t.h*h,f=c.size||l.width;Jt(c.start)&&(o=c.start),l.fullSize?sr(l,o,s.top,f,i.outerHeight-s.bottom-s.top):sr(l,o,t.top+c.placed,f,u),c.start=o,c.placed+=u,o=l.right}}t.x=o,t.y=r}j.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Wt={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){let i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;let s=Bt(e.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(i-s.height,0),a=ky(e.boxes),l=a.vertical,c=a.horizontal;et(e.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});let h=l.reduce((p,g)=>g.box.options&&g.box.options.display===!1?p:p+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/h,hBoxMaxHeight:r/2}),f=Object.assign({},s);Wd(f,Bt(n));let m=Object.assign({maxPadding:f,w:o,h:r,x:s.left,y:s.top},s),d=Ly(l.concat(c),u);Us(a.fullSize,m,u,d),Us(l,m,u,d),Us(c,m,u,d)&&Us(l,m,u,d),Ey(m),ld(a.leftAndTop,m,u,d),m.x+=m.w,m.y+=m.h,ld(a.rightAndBottom,m,u,d),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},et(a.chartArea,p=>{let g=p.box;Object.assign(g,e.chartArea),g.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}},ur=class{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,s){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(t){return!0}updateConfig(t){}},zl=class extends ur{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},cr="$chartjs",Cy={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},cd=e=>e===null||e==="";function Iy(e,t){let i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[cr]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",cd(s)){let o=yl(e,"width");o!==void 0&&(e.width=o)}if(cd(n))if(e.style.height==="")e.height=e.width/(t||2);else{let o=yl(e,"height");o!==void 0&&(e.height=o)}return e}var Zd=Wu?{passive:!0}:!1;function Dy(e,t,i){e.addEventListener(t,i,Zd)}function Ay(e,t,i){e.canvas.removeEventListener(t,i,Zd)}function zy(e,t){let i=Cy[e.type]||e.type,{x:n,y:s}=wi(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:s!==void 0?s:null}}function dr(e,t){for(let i of e)if(i===t||i.contains(t))return!0}function Fy(e,t,i){let n=e.canvas,s=new MutationObserver(o=>{let r=!1;for(let a of o)r=r||dr(a.addedNodes,n),r=r&&!dr(a.removedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function Ry(e,t,i){let n=e.canvas,s=new MutationObserver(o=>{let r=!1;for(let a of o)r=r||dr(a.removedNodes,n),r=r&&!dr(a.addedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}var Xs=new Map,hd=0;function Vd(){let e=window.devicePixelRatio;e!==hd&&(hd=e,Xs.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function Ny(e,t){Xs.size||window.addEventListener("resize",Vd),Xs.set(e,t)}function By(e){Xs.delete(e),Xs.size||window.removeEventListener("resize",Vd)}function Hy(e,t,i){let n=e.canvas,s=n&&er(n);if(!s)return;let o=il((a,l)=>{let c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),r=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||o(c,h)});return r.observe(s),Ny(e,o),r}function Pl(e,t,i){i&&i.disconnect(),t==="resize"&&By(e)}function Wy(e,t,i){let n=e.canvas,s=il(o=>{e.ctx!==null&&i(zy(o,e))},e,o=>{let r=o[0];return[r,r.offsetX,r.offsetY]});return Dy(n,t,s),s}var Fl=class extends ur{acquireContext(t,i){let n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(Iy(t,i),n):null}releaseContext(t){let i=t.canvas;if(!i[cr])return!1;let n=i[cr].initial;["height","width"].forEach(o=>{let r=n[o];q(r)?i.removeAttribute(o):i.setAttribute(o,r)});let s=n.style||{};return Object.keys(s).forEach(o=>{i.style[o]=s[o]}),i.width=i.width,delete i[cr],!0}addEventListener(t,i,n){this.removeEventListener(t,i);let s=t.$proxies||(t.$proxies={}),r={attach:Fy,detach:Ry,resize:Hy}[i]||Wy;s[i]=r(t,i,n)}removeEventListener(t,i){let n=t.$proxies||(t.$proxies={}),s=n[i];if(!s)return;({attach:Pl,detach:Pl,resize:Pl}[i]||Ay)(t,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,s){return Hu(t,i,n,s)}isAttached(t){let i=er(t);return!!(i&&i.isConnected)}};function Zy(e){return!gl()||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas?zl:Fl}var Rl=class{constructor(){this._init=[]}notify(t,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,i,n);return i==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,i,n,s){s=s||{};for(let o of t){let r=o.plugin,a=r[n],l=[i,s,o.options];if(ht(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){q(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){let n=t&&t.config,s=R(n.options&&n.options.plugins,{}),o=Vy(n);return s===!1&&!i?[]:jy(t,o,s,i)}_notifyStateChanges(t){let i=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),t,"stop"),this._notify(s(n,i),t,"start")}};function Vy(e){let t={},i=[],n=Object.keys(Re.plugins.items);for(let o=0;o<n.length;o++)i.push(Re.getPlugin(n[o]));let s=e.plugins||[];for(let o=0;o<s.length;o++){let r=s[o];i.indexOf(r)===-1&&(i.push(r),t[r.id]=!0)}return{plugins:i,localIds:t}}function $y(e,t){return!t&&e===!1?null:e===!0?{}:e}function jy(e,{plugins:t,localIds:i},n,s){let o=[],r=e.getContext();for(let a of t){let l=a.id,c=$y(n[l],s);c!==null&&o.push({plugin:a,options:Uy(e.config,{plugin:a,local:i[l]},c,r)})}return o}function Uy(e,{plugin:t,local:i},n,s){let o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return i&&t.defaults&&r.push(t.defaults),e.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Nl(e,t){let i=j.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Yy(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function qy(e,t){return e===t?"_index_":"_value_"}function Gy(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Bl(e,t){return e==="x"||e==="y"?e:t.axis||Gy(t.position)||e.charAt(0).toLowerCase()}function Xy(e,t){let i=yi[e.type]||{scales:{}},n=t.scales||{},s=Nl(e.type,t),o=Object.create(null),r=Object.create(null);return Object.keys(n).forEach(a=>{let l=n[a];if(!$(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let c=Bl(a,l),h=qy(c,s),u=i.scales||{};o[c]=o[c]||a,r[a]=Tn(Object.create(null),[{axis:c},l,u[c],u[h]])}),e.data.datasets.forEach(a=>{let l=a.type||e.type,c=a.indexAxis||Nl(l,t),u=(yi[l]||{}).scales||{};Object.keys(u).forEach(f=>{let m=Yy(f,c),d=a[m+"AxisID"]||o[m]||m;r[d]=r[d]||Object.create(null),Tn(r[d],[{axis:m},n[d],u[f]])})}),Object.keys(r).forEach(a=>{let l=r[a];Tn(l,[j.scales[l.type],j.scale])}),r}function $d(e){let t=e.options||(e.options={});t.plugins=R(t.plugins,{}),t.scales=Xy(e,t)}function jd(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Ky(e){return e=e||{},e.data=jd(e.data),$d(e),e}var ud=new Map,Ud=new Set;function or(e,t){let i=ud.get(e);return i||(i=t(),ud.set(e,i),Ud.add(i)),i}var js=(e,t,i)=>{let n=ei(t,i);n!==void 0&&e.add(n)},Hl=class{constructor(t){this._config=Ky(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=jd(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),$d(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return or(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return or(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return or(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){let i=t.id,n=this.type;return or(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){let n=this._scopeCache,s=n.get(t);return(!s||i)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,i,n){let{options:s,type:o}=this,r=this._cachedScopes(t,n),a=r.get(i);if(a)return a;let l=new Set;i.forEach(h=>{t&&(l.add(t),h.forEach(u=>js(l,t,u))),h.forEach(u=>js(l,s,u)),h.forEach(u=>js(l,yi[o]||{},u)),h.forEach(u=>js(l,j,u)),h.forEach(u=>js(l,Ko,u))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Ud.has(i)&&r.set(i,c),c}chartOptionScopes(){let{options:t,type:i}=this;return[t,yi[i]||{},j.datasets[i]||{},{type:i},j,Ko]}resolveNamedOptions(t,i,n,s=[""]){let o={$shared:!0},{resolver:r,subPrefixes:a}=dd(this._resolverCache,t,s),l=r;if(Qy(r,i)){o.$shared=!1,n=ti(n)?n():n;let c=this.createResolver(t,n,a);l=Bi(r,n,c)}for(let c of i)o[c]=l[c];return o}createResolver(t,i,n=[""],s){let{resolver:o}=dd(this._resolverCache,t,n);return $(i)?Bi(o,i,void 0,s):o}};function dd(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));let s=i.join(),o=n.get(s);return o||(o={resolver:tr(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,o)),o}var Jy=e=>$(e)&&Object.getOwnPropertyNames(e).reduce((t,i)=>t||ti(e[i]),!1);function Qy(e,t){let{isScriptable:i,isIndexable:n}=dl(e);for(let s of t){let o=i(s),r=n(s),a=(r||o)&&e[s];if(o&&(ti(a)||Jy(a))||r&&ct(a))return!0}return!1}var tv="3.9.1",ev=["top","bottom","left","right","chartArea"];function fd(e,t){return e==="top"||e==="bottom"||ev.indexOf(e)===-1&&t==="x"}function md(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function pd(e){let t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),ht(i&&i.onComplete,[e],t)}function iv(e){let t=e.chart,i=t.options.animation;ht(i&&i.onProgress,[e],t)}function Yd(e){return gl()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var fr={},qd=e=>{let t=Yd(e);return Object.values(fr).filter(i=>i.canvas===t).pop()};function nv(e,t,i){let n=Object.keys(e);for(let s of n){let o=+s;if(o>=t){let r=e[s];delete e[s],(i>0||o>t)&&(e[o+i]=r)}}}function sv(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}var Vi=class{constructor(t,i){let n=this.config=new Hl(i),s=Yd(t),o=qd(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Zy(s)),this.platform.updateConfig(n);let a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=fu(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Rl,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Mu(u=>this.update(u),r.resizeDelay||0),this._dataChanges=[],fr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ni.listen(this,"complete",pd),ni.listen(this,"progress",iv),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:s,_aspectRatio:o}=this;return q(t)?i&&o?o:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_l(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return cl(this.canvas,this.ctx),this}stop(){return ni.stop(this),this}resize(t,i){ni.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,i,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,_l(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),ht(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};et(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,n=this.scales,s=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{}),o=[];i&&(o=o.concat(Object.keys(i).map(r=>{let a=i[r],l=Bl(r,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),et(o,r=>{let a=r.options,l=a.id,c=Bl(l,a),h=R(a.type,r.dtype);(a.position===void 0||fd(a.position,c)!==fd(r.dposition))&&(a.position=r.dposition),s[l]=!0;let u=null;if(l in n&&n[l].type===h)u=n[l];else{let f=Re.getScale(h);u=new f({id:l,type:h,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(a,t)}),et(s,(r,a)=>{r||delete n[a]}),et(n,r=>{Wt.configure(this,r,r.options),Wt.addBox(this,r)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((s,o)=>s.index-o.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(md("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,s)=>{i.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){let o=i[n],r=this.getDatasetMeta(n),a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||Nl(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{let l=Re.getController(a),{datasetElementType:c,dataElementType:h}=j.datasets[a];Object.assign(l.prototype,{dataElementType:Re.getElement(h),datasetElementType:c&&Re.getElement(c)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){et(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,h=this.data.datasets.length;c<h;c++){let{controller:u}=this.getDatasetMeta(c),f=!s&&o.indexOf(u)===-1;u.buildOrUpdateElements(f),r=Math.max(+u.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||et(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(md("z","_idx"));let{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){et(this.scales,t=>{Wt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!qa(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:n,start:s,count:o}of i){let r=n==="_removeElements"?-o:o;nv(t,s,r)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<i;o++)if(!qa(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Wt.update(this,this.width,this.height,t);let i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],et(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,ti(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let n=this.getDatasetMeta(t),s={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ni.has(this)?this.attached&&!ni.running(this)&&ni.start(this):(this.draw(),pd({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:n,height:s}=this._resizeBeforeDraw;this._resize(n,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,n=[],s,o;for(s=0,o=i.length;s<o;++s){let r=i[s];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,n=t._clip,s=!n.disabled,o=this.chartArea,r={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Bs(i,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),t.controller.draw(),s&&Hs(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return xn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,s){let o=Ty.modes[i];return typeof o=="function"?o(this,t,n,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],n=this._metasets,s=n.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=ii(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){let n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){let s=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);Jt(i)?(o.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),ni.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),cl(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete fr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,n=(o,r)=>{i.addEventListener(this,o,r),t[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};et(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,n=(l,c)=>{i.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(i.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)},r,a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():r()}unbindEvents(){et(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},et(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){let s=n?"set":"remove",o,r,a,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];let c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{let a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Rs(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}_updateHoverStyles(t,i,n){let s=this.options.hover,o=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),r=o(i,t),a=n?t:o(t,i);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,i){let n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;let o=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(t,i,n){let{_active:s=[],options:o}=this,r=i,a=this._getActiveElements(t,s,n,r),l=gu(t),c=sv(t,this._lastEvent,n,l);n&&(this._lastEvent=null,ht(o.onHover,[t,a,this],this),l&&ht(o.onClick,[t,a,this],this));let h=!Rs(a,s);return(h||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=c,h}_getActiveElements(t,i,n,s){if(t.type==="mouseout")return[];if(!n)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}},gd=()=>et(Vi.instances,e=>e._plugins.invalidate()),Ti=!0;Object.defineProperties(Vi,{defaults:{enumerable:Ti,value:j},instances:{enumerable:Ti,value:fr},overrides:{enumerable:Ti,value:yi},registry:{enumerable:Ti,value:Re},version:{enumerable:Ti,value:tv},getChart:{enumerable:Ti,value:qd},register:{enumerable:Ti,value:(...e)=>{Re.add(...e),gd()}},unregister:{enumerable:Ti,value:(...e)=>{Re.remove(...e),gd()}}});function Gd(e,t,i){let{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=t,c=s/a;e.beginPath(),e.arc(o,r,a,n-c,i+c),l>s?(c=s/l,e.arc(o,r,l,i+c,n-c,!0)):e.arc(o,r,s,i+xt,n-xt),e.closePath(),e.clip()}function ov(e){return Qo(e,["outerStart","outerEnd","innerStart","innerEnd"])}function rv(e,t,i,n){let s=ov(e.options.borderRadius),o=(i-t)/2,r=Math.min(o,n*t/2),a=l=>{let c=(i-Math.min(o,l))*n/2;return At(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:At(s.innerStart,0,r),innerEnd:At(s.innerEnd,0,r)}}function En(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function Wl(e,t,i,n,s,o){let{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,u=Math.max(t.outerRadius+n+i-c,0),f=h>0?h+n+i+c:0,m=0,d=s-l;if(n){let A=h>0?h-n:0,Mt=u>0?u-n:0,mt=(A+Mt)/2,oe=mt!==0?d*mt/(mt+n):d;m=(d-oe)/2}let p=Math.max(.001,d*u-i/ft)/u,g=(d-p)/2,_=l+g+m,y=s-g-m,{outerStart:x,outerEnd:v,innerStart:b,innerEnd:M}=rv(t,f,u,y-_),T=u-x,w=u-v,k=_+x/T,V=y-v/w,Y=f+b,B=f+M,at=_+b/Y,Pt=y-M/B;if(e.beginPath(),o){if(e.arc(r,a,u,k,V),v>0){let mt=En(w,V,r,a);e.arc(mt.x,mt.y,v,V,y+xt)}let A=En(B,y,r,a);if(e.lineTo(A.x,A.y),M>0){let mt=En(B,Pt,r,a);e.arc(mt.x,mt.y,M,y+xt,Pt+Math.PI)}if(e.arc(r,a,f,y-M/f,_+b/f,!0),b>0){let mt=En(Y,at,r,a);e.arc(mt.x,mt.y,b,at+Math.PI,_-xt)}let Mt=En(T,_,r,a);if(e.lineTo(Mt.x,Mt.y),x>0){let mt=En(T,k,r,a);e.arc(mt.x,mt.y,x,_-xt,k)}}else{e.moveTo(r,a);let A=Math.cos(k)*u+r,Mt=Math.sin(k)*u+a;e.lineTo(A,Mt);let mt=Math.cos(V)*u+r,oe=Math.sin(V)*u+a;e.lineTo(mt,oe)}e.closePath()}function av(e,t,i,n,s){let{fullCircles:o,startAngle:r,circumference:a}=t,l=t.endAngle;if(o){Wl(e,t,i,n,r+nt,s);for(let c=0;c<o;++c)e.fill();isNaN(a)||(l=r+a%nt,a%nt===0&&(l+=nt))}return Wl(e,t,i,n,l,s),e.fill(),l}function lv(e,t,i){let{x:n,y:s,startAngle:o,pixelMargin:r,fullCircles:a}=t,l=Math.max(t.outerRadius-r,0),c=t.innerRadius+r,h;for(i&&Gd(e,t,o+nt),e.beginPath(),e.arc(n,s,c,o+nt,o,!0),h=0;h<a;++h)e.stroke();for(e.beginPath(),e.arc(n,s,l,o,o+nt),h=0;h<a;++h)e.stroke()}function cv(e,t,i,n,s,o){let{options:r}=t,{borderWidth:a,borderJoinStyle:l}=r,c=r.borderAlign==="inner";!a||(c?(e.lineWidth=a*2,e.lineJoin=l||"round"):(e.lineWidth=a,e.lineJoin=l||"bevel"),t.fullCircles&&lv(e,t,c),c&&Gd(e,t,s),Wl(e,t,i,n,s,o),e.stroke())}var Rn=class extends ie{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,n){let s=this.getProps(["x","y"],n),{angle:o,distance:r}=Ja(s,{x:t,y:i}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=this.options.spacing/2,d=R(u,l-a)>=nt||Sn(o,a,l),p=ze(r,c+f,h+f);return d&&p}getCenterPoint(t){let{x:i,y:n,startAngle:s,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:l,spacing:c}=this.options,h=(s+o)/2,u=(r+a+c+l)/2;return{x:i+Math.cos(h)*u,y:n+Math.sin(h)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:i,circumference:n}=this,s=(i.offset||0)/2,o=(i.spacing||0)/2,r=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>nt?Math.floor(n/nt):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=0;if(s){a=s/2;let c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*a,Math.sin(c)*a),this.circumference>=ft&&(a=s)}t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor;let l=av(t,this,a,o,r);cv(t,this,a,o,l,r),t.restore()}};Rn.id="arc";Rn.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};Rn.defaultRoutes={backgroundColor:"backgroundColor"};function Xd(e,t,i=t){e.lineCap=R(i.borderCapStyle,t.borderCapStyle),e.setLineDash(R(i.borderDash,t.borderDash)),e.lineDashOffset=R(i.borderDashOffset,t.borderDashOffset),e.lineJoin=R(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=R(i.borderWidth,t.borderWidth),e.strokeStyle=R(i.borderColor,t.borderColor)}function hv(e,t,i){e.lineTo(i.x,i.y)}function uv(e){return e.stepped?Iu:e.tension||e.cubicInterpolationMode==="monotone"?Du:hv}function Kd(e,t,i={}){let n=e.length,{start:s=0,end:o=n-1}=i,{start:r,end:a}=t,l=Math.max(s,r),c=Math.min(o,a),h=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!h?n+c-l:c-l}}function dv(e,t,i,n){let{points:s,options:o}=t,{count:r,start:a,loop:l,ilen:c}=Kd(s,i,n),h=uv(o),{move:u=!0,reverse:f}=n||{},m,d,p;for(m=0;m<=c;++m)d=s[(a+(f?c-m:m))%r],!d.skip&&(u?(e.moveTo(d.x,d.y),u=!1):h(e,p,d,f,o.stepped),p=d);return l&&(d=s[(a+(f?c:0))%r],h(e,p,d,f,o.stepped)),!!l}function fv(e,t,i,n){let s=t.points,{count:o,start:r,ilen:a}=Kd(s,i,n),{move:l=!0,reverse:c}=n||{},h=0,u=0,f,m,d,p,g,_,y=v=>(r+(c?a-v:v))%o,x=()=>{p!==g&&(e.lineTo(h,g),e.lineTo(h,p),e.lineTo(h,_))};for(l&&(m=s[y(0)],e.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=s[y(f)],m.skip)continue;let v=m.x,b=m.y,M=v|0;M===d?(b<p?p=b:b>g&&(g=b),h=(u*h+v)/++u):(x(),e.lineTo(v,b),d=M,u=0,p=g=b),_=b}x()}function Zl(e){let t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?fv:dv}function mv(e){return e.stepped?Zu:e.tension||e.cubicInterpolationMode==="monotone"?Vu:pi}function pv(e,t,i,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,i,n)&&s.closePath()),Xd(e,t.options),e.stroke(s)}function gv(e,t,i,n){let{segments:s,options:o}=t,r=Zl(t);for(let a of s)Xd(e,o,a.style),e.beginPath(),r(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}var _v=typeof Path2D=="function";function yv(e,t,i,n){_v&&!t.options.segment?pv(e,t,i,n):gv(e,t,i,n)}var Ne=class extends ie{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let s=n.spanGaps?this._loop:this._fullLoop;Bu(this._points,n,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ju(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,n=t.length;return n&&i[t[n-1].end]}interpolate(t,i){let n=this.options,s=t[i],o=this.points,r=wl(this,{property:i,start:s,end:s});if(!r.length)return;let a=[],l=mv(n),c,h;for(c=0,h=r.length;c<h;++c){let{start:u,end:f}=r[c],m=o[u],d=o[f];if(m===d){a.push(m);continue}let p=Math.abs((s-m[i])/(d[i]-m[i])),g=l(m,d,p,n.stepped);g[i]=t[i],a.push(g)}return a.length===1?a[0]:a}pathSegment(t,i,n){return Zl(this)(t,this,i,n)}path(t,i,n){let s=this.segments,o=Zl(this),r=this._loop;i=i||0,n=n||this.points.length-i;for(let a of s)r&=o(t,this,a,{start:i,end:i+n-1});return!!r}draw(t,i,n,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),yv(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};Ne.id="line";Ne.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};Ne.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};Ne.descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};function _d(e,t,i,n){let s=e.options,{[i]:o}=e.getProps([i],n);return Math.abs(t-o)<s.radius+s.hitRadius}var Nn=class extends ie{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,n){let s=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(i-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return _d(this,t,"x",i)}inYRange(t,i){return _d(this,t,"y",i)}getCenterPoint(t){let{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let n=i&&t.borderWidth||0;return(i+n)*2}draw(t,i){let n=this.options;this.skip||n.radius<.1||!xn(this,i,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Jo(t,n,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}};Nn.id="point";Nn.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};Nn.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function Jd(e,t){let{x:i,y:n,base:s,width:o,height:r}=e.getProps(["x","y","base","width","height"],t),a,l,c,h,u;return e.horizontal?(u=r/2,a=Math.min(i,s),l=Math.max(i,s),c=n-u,h=n+u):(u=o/2,a=i-u,l=i+u,c=Math.min(n,s),h=Math.max(n,s)),{left:a,top:c,right:l,bottom:h}}function Mi(e,t,i,n){return e?0:At(t,i,n)}function vv(e,t,i){let n=e.options.borderWidth,s=e.borderSkipped,o=ul(n);return{t:Mi(s.top,o.top,0,i),r:Mi(s.right,o.right,0,t),b:Mi(s.bottom,o.bottom,0,i),l:Mi(s.left,o.left,0,t)}}function bv(e,t,i){let{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,o=xi(s),r=Math.min(t,i),a=e.borderSkipped,l=n||$(s);return{topLeft:Mi(!l||a.top||a.left,o.topLeft,0,r),topRight:Mi(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Mi(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Mi(!l||a.bottom||a.right,o.bottomRight,0,r)}}function xv(e){let t=Jd(e),i=t.right-t.left,n=t.bottom-t.top,s=vv(e,i/2,n/2),o=bv(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function El(e,t,i,n){let s=t===null,o=i===null,a=e&&!(s&&o)&&Jd(e,n);return a&&(s||ze(t,a.left,a.right))&&(o||ze(i,a.top,a.bottom))}function wv(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Tv(e,t){e.rect(t.x,t.y,t.w,t.h)}function Ol(e,t,i={}){let n=e.x!==i.x?-t:0,s=e.y!==i.y?-t:0,o=(e.x+e.w!==i.x+i.w?t:0)-n,r=(e.y+e.h!==i.y+i.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+o,h:e.h+r,radius:e.radius}}var Bn=class extends ie{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:r}=xv(this),a=wv(r.radius)?Ln:Tv;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,Ol(r,i,o)),t.clip(),a(t,Ol(o,-i,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Ol(o,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,i,n){return El(this,t,i,n)}inXRange(t,i){return El(this,t,null,i)}inYRange(t,i){return El(this,null,t,i)}getCenterPoint(t){let{x:i,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(i+s)/2:i,y:o?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}};Bn.id="bar";Bn.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};Bn.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Mv=Object.freeze({__proto__:null,ArcElement:Rn,LineElement:Ne,PointElement:Nn,BarElement:Bn});function Sv(e,t,i,n,s){let o=s.samples||n;if(o>=i)return e.slice(t,t+i);let r=[],a=(i-2)/(o-2),l=0,c=t+i-1,h=t,u,f,m,d,p;for(r[l++]=e[h],u=0;u<o-2;u++){let g=0,_=0,y,x=Math.floor((u+1)*a)+1+t,v=Math.min(Math.floor((u+2)*a)+1,i)+t,b=v-x;for(y=x;y<v;y++)g+=e[y].x,_+=e[y].y;g/=b,_/=b;let M=Math.floor(u*a)+1+t,T=Math.min(Math.floor((u+1)*a)+1,i)+t,{x:w,y:k}=e[h];for(m=d=-1,y=M;y<T;y++)d=.5*Math.abs((w-g)*(e[y].y-k)-(w-e[y].x)*(_-k)),d>m&&(m=d,f=e[y],p=y);r[l++]=f,h=p}return r[l++]=e[c],r}function Lv(e,t,i,n){let s=0,o=0,r,a,l,c,h,u,f,m,d,p,g=[],_=t+i-1,y=e[t].x,v=e[_].x-y;for(r=t;r<t+i;++r){a=e[r],l=(a.x-y)/v*n,c=a.y;let b=l|0;if(b===h)c<d?(d=c,u=r):c>p&&(p=c,f=r),s=(o*s+a.x)/++o;else{let M=r-1;if(!q(u)&&!q(f)){let T=Math.min(u,f),w=Math.max(u,f);T!==m&&T!==M&&g.push({...e[T],x:s}),w!==m&&w!==M&&g.push({...e[w],x:s})}r>0&&M!==m&&g.push(e[M]),g.push(a),h=b,o=0,d=p=c,u=f=m=r}}return g}function Qd(e){if(e._decimated){let t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function yd(e){e.data.datasets.forEach(t=>{Qd(t)})}function kv(e,t){let i=t.length,n=0,s,{iScale:o}=e,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=At(De(t,o.axis,r).lo,0,i-1)),c?s=At(De(t,o.axis,a).hi+1,n,i)-n:s=i-n,{start:n,count:s}}var Pv={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){yd(e);return}let n=e.width;e.data.datasets.forEach((s,o)=>{let{_data:r,indexAxis:a}=s,l=e.getDatasetMeta(o),c=r||s.data;if(kn([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let h=e.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||e.options.parsing)return;let{start:u,count:f}=kv(l,c),m=i.threshold||4*n;if(f<=m){Qd(s);return}q(r)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let d;switch(i.algorithm){case"lttb":d=Sv(c,u,f,n,i);break;case"min-max":d=Lv(c,u,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=d})},destroy(e){yd(e)}};function Ev(e,t,i){let n=e.segments,s=e.points,o=t.points,r=[];for(let a of n){let{start:l,end:c}=a;c=jl(l,c,s);let h=Vl(i,s[l],s[c],a.loop);if(!t.segments){r.push({source:a,target:h,start:s[l],end:s[c]});continue}let u=wl(t,h);for(let f of u){let m=Vl(i,o[f.start],o[f.end],f.loop),d=xl(a,s,m);for(let p of d)r.push({source:p,target:f,start:{[i]:vd(h,m,"start",Math.max)},end:{[i]:vd(h,m,"end",Math.min)}})}}return r}function Vl(e,t,i,n){if(n)return;let s=t[e],o=i[e];return e==="angle"&&(s=jt(s),o=jt(o)),{property:e,start:s,end:o}}function Ov(e,t){let{x:i=null,y:n=null}=e||{},s=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=jl(r,a,s);let l=s[r],c=s[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):i!==null&&(o.push({x:i,y:l.y}),o.push({x:i,y:c.y}))}),o}function jl(e,t,i){for(;t>e;t--){let n=i[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function vd(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function tf(e,t){let i=[],n=!1;return ct(e)?(n=!0,i=e):i=Ov(e,t),i.length?new Ne({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function bd(e){return e&&e.fill!==!1}function Cv(e,t,i){let s=e[t].fill,o=[t],r;if(!i)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!St(s))return s;if(r=e[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function Iv(e,t,i){let n=Fv(e);if($(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return St(s)&&Math.floor(s)===s?Dv(n[0],t,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Dv(e,t,i,n){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=n?!1:i}function Av(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:$(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function zv(e,t,i){let n;return e==="start"?n=i:e==="end"?n=t.options.reverse?t.min:t.max:$(e)?n=e.value:n=t.getBaseValue(),n}function Fv(e){let t=e.options,i=t.fill,n=R(i&&i.target,i);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Rv(e){let{scale:t,index:i,line:n}=e,s=[],o=n.segments,r=n.points,a=Nv(t,i);a.push(tf({x:null,y:t.bottom},n));for(let l=0;l<o.length;l++){let c=o[l];for(let h=c.start;h<=c.end;h++)Bv(s,r[h],a)}return new Ne({points:s,options:{}})}function Nv(e,t){let i=[],n=e.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){let o=n[s];if(o.index===t)break;o.hidden||i.unshift(o.dataset)}return i}function Bv(e,t,i){let n=[];for(let s=0;s<i.length;s++){let o=i[s],{first:r,last:a,point:l}=Hv(o,t,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function Hv(e,t,i){let n=e.interpolate(t,i);if(!n)return{};let s=n[i],o=e.segments,r=e.points,a=!1,l=!1;for(let c=0;c<o.length;c++){let h=o[c],u=r[h.start][i],f=r[h.end][i];if(ze(s,u,f)){a=s===u,l=s===f;break}}return{first:a,last:l,point:n}}var mr=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,n){let{x:s,y:o,radius:r}=this;return i=i||{start:0,end:nt},t.arc(s,o,r,i.end,i.start,!0),!n.bounds}interpolate(t){let{x:i,y:n,radius:s}=this,o=t.angle;return{x:i+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}};function Wv(e){let{chart:t,fill:i,line:n}=e;if(St(i))return Zv(t,i);if(i==="stack")return Rv(e);if(i==="shape")return!0;let s=Vv(e);return s instanceof mr?s:tf(s,n)}function Zv(e,t){let i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function Vv(e){return(e.scale||{}).getPointPositionForValue?jv(e):$v(e)}function $v(e){let{scale:t={},fill:i}=e,n=Av(i,t);if(St(n)){let s=t.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function jv(e){let{scale:t,fill:i}=e,n=t.options,s=t.getLabels().length,o=n.reverse?t.max:t.min,r=zv(i,t,o),a=[];if(n.grid.circular){let l=t.getPointPositionForValue(0,o);return new mr({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,r));return a}function Cl(e,t,i){let n=Wv(t),{line:s,scale:o,axis:r}=t,a=s.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:u=c}=l||{};n&&s.points.length&&(Bs(e,i),Uv(e,{line:s,target:n,above:h,below:u,area:i,scale:o,axis:r}),Hs(e))}function Uv(e,t){let{line:i,target:n,above:s,below:o,area:r,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),l==="x"&&o!==s&&(xd(e,n,r.top),wd(e,{line:i,target:n,color:s,scale:a,property:l}),e.restore(),e.save(),xd(e,n,r.bottom)),wd(e,{line:i,target:n,color:o,scale:a,property:l}),e.restore()}function xd(e,t,i){let{segments:n,points:s}=t,o=!0,r=!1;e.beginPath();for(let a of n){let{start:l,end:c}=a,h=s[l],u=s[jl(l,c,s)];o?(e.moveTo(h.x,h.y),o=!1):(e.lineTo(h.x,i),e.lineTo(h.x,h.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(u.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function wd(e,t){let{line:i,target:n,property:s,color:o,scale:r}=t,a=Ev(i,n,s);for(let{source:l,target:c,start:h,end:u}of a){let{style:{backgroundColor:f=o}={}}=l,m=n!==!0;e.save(),e.fillStyle=f,Yv(e,r,m&&Vl(s,h,u)),e.beginPath();let d=!!i.pathSegment(e,l),p;if(m){d?e.closePath():Td(e,n,u,s);let g=!!n.pathSegment(e,c,{move:d,reverse:!0});p=d&&g,p||Td(e,n,h,s)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function Yv(e,t,i){let{top:n,bottom:s}=t.chart.chartArea,{property:o,start:r,end:a}=i||{};o==="x"&&(e.beginPath(),e.rect(r,n,a-r,s-n),e.clip())}function Td(e,t,i,n){let s=t.interpolate(i,n);s&&e.lineTo(s.x,s.y)}var qv={id:"filler",afterDatasetsUpdate(e,t,i){let n=(e.data.datasets||[]).length,s=[],o,r,a,l;for(r=0;r<n;++r)o=e.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Ne&&(l={visible:e.isDatasetVisible(r),index:r,fill:Iv(a,r,n),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,s.push(l);for(r=0;r<n;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=Cv(s,r,i.propagate))},beforeDraw(e,t,i){let n=i.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=s.length-1;r>=0;--r){let a=s[r].$filler;!a||(a.line.updateControlPoints(o,a.axis),n&&a.fill&&Cl(e.ctx,a,o))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;let n=e.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){let o=n[s].$filler;bd(o)&&Cl(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,i){let n=t.meta.$filler;!bd(n)||i.drawTime!=="beforeDatasetDraw"||Cl(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Md=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},Gv=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index,pr=class extends ie{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},i=ht(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){let{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}let n=t.labels,s=Ot(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Md(n,o),c,h;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(r,o,a,l)+10):(h=this.maxHeight,c=this._fitCols(r,o,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,s){let{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a,u=t;o.textAlign="left",o.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((d,p)=>{let g=n+i/2+o.measureText(d.text).width;(p===0||c[c.length-1]+g+2*a>r)&&(u+=h,c[c.length-(p>0?0:1)]=0,m+=h,f++),l[p]={left:0,top:m,row:f,width:g,height:s},c[c.length-1]+=g+a}),u}_fitCols(t,i,n,s){let{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=r-t,u=a,f=0,m=0,d=0,p=0;return this.legendItems.forEach((g,_)=>{let y=n+i/2+o.measureText(g.text).width;_>0&&m+s+2*a>h&&(u+=f+a,c.push({width:f,height:m}),d+=f+a,p++,f=m=0),l[_]={left:d,top:m,col:p,width:y,height:s},f=Math.max(f,y),m+=s+a}),u+=f,c.push({width:f,height:m}),u}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:o}}=this,r=Wi(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Nt(n,this.left+s,this.right-this.lineWidths[a]);for(let c of i)a!==c.row&&(a=c.row,l=Nt(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=Nt(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(let c of i)c.col!==a&&(a=c.col,l=Nt(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;Bs(t,this),this._draw(),Hs(t)}}_draw(){let{options:t,columnSizes:i,lineWidths:n,ctx:s}=this,{align:o,labels:r}=t,a=j.color,l=Wi(t.rtl,this.left,this.width),c=Ot(r.font),{color:h,padding:u}=r,f=c.size,m=f/2,d;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;let{boxWidth:p,boxHeight:g,itemHeight:_}=Md(r,f),y=function(T,w,k){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;s.save();let V=R(k.lineWidth,1);if(s.fillStyle=R(k.fillStyle,a),s.lineCap=R(k.lineCap,"butt"),s.lineDashOffset=R(k.lineDashOffset,0),s.lineJoin=R(k.lineJoin,"miter"),s.lineWidth=V,s.strokeStyle=R(k.strokeStyle,a),s.setLineDash(R(k.lineDash,[])),r.usePointStyle){let Y={radius:g*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:V},B=l.xPlus(T,p/2),at=w+m;hl(s,Y,B,at,r.pointStyleWidth&&p)}else{let Y=w+Math.max((f-g)/2,0),B=l.leftForLtr(T,p),at=xi(k.borderRadius);s.beginPath(),Object.values(at).some(Pt=>Pt!==0)?Ln(s,{x:B,y:Y,w:p,h:g,radius:at}):s.rect(B,Y,p,g),s.fill(),V!==0&&s.stroke()}s.restore()},x=function(T,w,k){bi(s,k.text,T,w+_/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},v=this.isHorizontal(),b=this._computeTitleHeight();v?d={x:Nt(o,this.left+u,this.right-n[0]),y:this.top+u+b,line:0}:d={x:this.left+u,y:Nt(o,this.top+b+u,this.bottom-i[0].height),line:0},vl(this.ctx,t.textDirection);let M=_+u;this.legendItems.forEach((T,w)=>{s.strokeStyle=T.fontColor||h,s.fillStyle=T.fontColor||h;let k=s.measureText(T.text).width,V=l.textAlign(T.textAlign||(T.textAlign=r.textAlign)),Y=p+m+k,B=d.x,at=d.y;l.setWidth(this.width),v?w>0&&B+Y+u>this.right&&(at=d.y+=M,d.line++,B=d.x=Nt(o,this.left+u,this.right-n[d.line])):w>0&&at+M>this.bottom&&(B=d.x=B+i[d.line].width+u,d.line++,at=d.y=Nt(o,this.top+b+u,this.bottom-i[d.line].height));let Pt=l.x(B);y(Pt,at,T),B=Su(V,B+p+m,v?B+Y:this.right,t.rtl),x(l.x(B),at,T),v?d.x+=Y+u:d.y+=M}),bl(this.ctx,t.textDirection)}drawTitle(){let t=this.options,i=t.title,n=Ot(i.font),s=Bt(i.padding);if(!i.display)return;let o=Wi(t.rtl,this.left,this.width),r=this.ctx,a=i.position,l=n.size/2,c=s.top+l,h,u=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,u=Nt(t.align,u,this.right-f);else{let d=this.columnSizes.reduce((p,g)=>Math.max(p,g.height),0);h=c+Nt(t.align,this.top,this.bottom-d-t.labels.padding-this._computeTitleHeight())}let m=Nt(a,u,u+f);r.textAlign=o.textAlign(Xo(a)),r.textBaseline="middle",r.strokeStyle=i.color,r.fillStyle=i.color,r.font=n.string,bi(r,i.text,m,h,n)}_computeTitleHeight(){let t=this.options.title,i=Ot(t.font),n=Bt(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,s,o;if(ze(t,this.left,this.right)&&ze(i,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],ze(t,s.left,s.left+s.width)&&ze(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){let i=this.options;if(!Xv(t.type,i))return;let n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let s=this._hoveredItem,o=Gv(s,n);s&&!o&&ht(i.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&ht(i.onHover,[t,n,this],this)}else n&&ht(i.onClick,[t,n,this],this)}};function Xv(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Kv={id:"legend",_element:pr,start(e,t,i){let n=e.legend=new pr({ctx:e.ctx,options:i,chart:e});Wt.configure(e,n,i),Wt.addBox(e,n)},stop(e){Wt.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){let n=e.legend;Wt.configure(e,n,i),n.options=i},afterUpdate(e){let t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){let n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:o}}=e.legend.options;return e._getSortedDatasetMetas().map(r=>{let a=r.controller.getStyle(i?0:void 0),l=Bt(a.borderWidth);return{text:t[r.index].label,fillStyle:a.backgroundColor,fontColor:o,hidden:!r.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:n||a.pointStyle,rotation:a.rotation,textAlign:s||a.textAlign,borderRadius:0,datasetIndex:r.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}},Ks=class extends ie{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;let s=ct(n.text)?n.text.length:1;this._padding=Bt(n.padding);let o=s*Ot(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:i,left:n,bottom:s,right:o,options:r}=this,a=r.align,l=0,c,h,u;return this.isHorizontal()?(h=Nt(a,n,o),u=i+t,c=o-n):(r.position==="left"?(h=n+t,u=Nt(a,s,i),l=ft*-.5):(h=o-t,u=Nt(a,i,s),l=ft*.5),c=s-i),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){let t=this.ctx,i=this.options;if(!i.display)return;let n=Ot(i.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);bi(t,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:c,textAlign:Xo(i.align),textBaseline:"middle",translation:[r,a]})}};function Jv(e,t){let i=new Ks({ctx:e.ctx,options:t,chart:e});Wt.configure(e,i,t),Wt.addBox(e,i),e.titleBlock=i}var Qv={id:"title",_element:Ks,start(e,t,i){Jv(e,i)},stop(e){let t=e.titleBlock;Wt.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){let n=e.titleBlock;Wt.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},rr=new WeakMap,t0={id:"subtitle",start(e,t,i){let n=new Ks({ctx:e.ctx,options:i,chart:e});Wt.configure(e,n,i),Wt.addBox(e,n),rr.set(e,n)},stop(e){Wt.removeBox(e,rr.get(e)),rr.delete(e)},beforeUpdate(e,t,i){let n=rr.get(e);Wt.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ys={average(e){if(!e.length)return!1;let t,i,n=0,s=0,o=0;for(t=0,i=e.length;t<i;++t){let r=e[t].element;if(r&&r.hasValue()){let a=r.tooltipPosition();n+=a.x,s+=a.y,++o}}return{x:n/o,y:s/o}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){let l=e[o].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),h=jo(t,c);h<s&&(s=h,a=l)}}if(a){let l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function Fe(e,t){return t&&(ct(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function si(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function e0(e,t){let{element:i,datasetIndex:n,index:s}=t,o=e.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:e,label:r,parsed:o.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function Sd(e,t){let i=e.chart.ctx,{body:n,footer:s,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=Ot(t.bodyFont),c=Ot(t.titleFont),h=Ot(t.footerFont),u=o.length,f=s.length,m=n.length,d=Bt(t.padding),p=d.height,g=0,_=n.reduce((v,b)=>v+b.before.length+b.lines.length+b.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_){let v=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=m*v+(_-m)*l.lineHeight+(_-1)*t.bodySpacing}f&&(p+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let y=0,x=function(v){g=Math.max(g,i.measureText(v).width+y)};return i.save(),i.font=c.string,et(e.title,x),i.font=l.string,et(e.beforeBody.concat(e.afterBody),x),y=t.displayColors?r+2+t.boxPadding:0,et(n,v=>{et(v.before,x),et(v.lines,x),et(v.after,x)}),y=0,i.font=h.string,et(e.footer,x),i.restore(),g+=d.width,{width:g,height:p}}function i0(e,t){let{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function n0(e,t,i,n){let{x:s,width:o}=n,r=i.caretSize+i.caretPadding;if(e==="left"&&s+o+r>t.width||e==="right"&&s-o-r<0)return!0}function s0(e,t,i,n){let{x:s,width:o}=i,{width:r,chartArea:{left:a,right:l}}=e,c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),n0(c,e,t,i)&&(c="center"),c}function Ld(e,t,i){let n=i.yAlign||t.yAlign||i0(e,i);return{xAlign:i.xAlign||t.xAlign||s0(e,t,i,n),yAlign:n}}function o0(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function r0(e,t,i){let{y:n,height:s}=e;return t==="top"?n+=i:t==="bottom"?n-=s+i:n-=s/2,n}function kd(e,t,i,n){let{caretSize:s,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=i,c=s+o,{topLeft:h,topRight:u,bottomLeft:f,bottomRight:m}=xi(r),d=o0(t,a),p=r0(t,l,c);return l==="center"?a==="left"?d+=c:a==="right"&&(d-=c):a==="left"?d-=Math.max(h,f)+s:a==="right"&&(d+=Math.max(u,m)+s),{x:At(d,0,n.width-t.width),y:At(p,0,n.height-t.height)}}function ar(e,t,i){let n=Bt(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Pd(e){return Fe([],si(e))}function a0(e,t,i){return ii(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function Ed(e,t){let i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}var Js=class extends ie{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,o=new hr(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=a0(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:n}=i,s=n.beforeTitle.apply(this,[t]),o=n.title.apply(this,[t]),r=n.afterTitle.apply(this,[t]),a=[];return a=Fe(a,si(s)),a=Fe(a,si(o)),a=Fe(a,si(r)),a}getBeforeBody(t,i){return Pd(i.callbacks.beforeBody.apply(this,[t]))}getBody(t,i){let{callbacks:n}=i,s=[];return et(t,o=>{let r={before:[],lines:[],after:[]},a=Ed(n,o);Fe(r.before,si(a.beforeLabel.call(this,o))),Fe(r.lines,a.label.call(this,o)),Fe(r.after,si(a.afterLabel.call(this,o))),s.push(r)}),s}getAfterBody(t,i){return Pd(i.callbacks.afterBody.apply(this,[t]))}getFooter(t,i){let{callbacks:n}=i,s=n.beforeFooter.apply(this,[t]),o=n.footer.apply(this,[t]),r=n.afterFooter.apply(this,[t]),a=[];return a=Fe(a,si(s)),a=Fe(a,si(o)),a=Fe(a,si(r)),a}_createItems(t){let i=this._active,n=this.chart.data,s=[],o=[],r=[],a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(e0(this.chart,i[l]));return t.filter&&(a=a.filter((h,u,f)=>t.filter(h,u,f,n))),t.itemSort&&(a=a.sort((h,u)=>t.itemSort(h,u,n))),et(a,h=>{let u=Ed(t.callbacks,h);s.push(u.labelColor.call(this,h)),o.push(u.labelPointStyle.call(this,h)),r.push(u.labelTextColor.call(this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,i){let n=this.options.setContext(this.getContext()),s=this._active,o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let a=Ys[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);let l=this._size=Sd(this,n),c=Object.assign({},a,l),h=Ld(this.chart,n,c),u=kd(n,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,s){let o=this.getCaretPosition(t,n,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,n){let{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=xi(a),{x:f,y:m}=t,{width:d,height:p}=i,g,_,y,x,v,b;return o==="center"?(v=m+p/2,s==="left"?(g=f,_=g-r,x=v+r,b=v-r):(g=f+d,_=g+r,x=v-r,b=v+r),y=g):(s==="left"?_=f+Math.max(l,h)+r:s==="right"?_=f+d-Math.max(c,u)-r:_=this.caretX,o==="top"?(x=m,v=x-r,g=_-r,y=_+r):(x=m+p,v=x+r,g=_+r,y=_-r),b=x),{x1:g,x2:_,x3:y,y1:x,y2:v,y3:b}}drawTitle(t,i,n){let s=this.title,o=s.length,r,a,l;if(o){let c=Wi(n.rtl,this.x,this.width);for(t.x=ar(this,n.titleAlign,n),i.textAlign=c.textAlign(n.titleAlign),i.textBaseline="middle",r=Ot(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=r.string,l=0;l<o;++l)i.fillText(s[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,i,n,s,o){let r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c,boxPadding:h}=o,u=Ot(o.bodyFont),f=ar(this,"left",o),m=s.x(f),d=l<u.lineHeight?(u.lineHeight-l)/2:0,p=i.y+d;if(o.usePointStyle){let g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=s.leftForLtr(m,c)+c/2,y=p+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Jo(t,g,_,y),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Jo(t,g,_,y)}else{t.lineWidth=$(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;let g=s.leftForLtr(m,c-h),_=s.leftForLtr(s.xPlus(m,1),c-h-2),y=xi(r.borderRadius);Object.values(y).some(x=>x!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Ln(t,{x:g,y:p,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Ln(t,{x:_,y:p+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,p,c,l),t.strokeRect(g,p,c,l),t.fillStyle=r.backgroundColor,t.fillRect(_,p+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){let{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=n,u=Ot(n.bodyFont),f=u.lineHeight,m=0,d=Wi(n.rtl,this.x,this.width),p=function(w){i.fillText(w,d.x(t.x+m),t.y+f/2),t.y+=f+o},g=d.textAlign(r),_,y,x,v,b,M,T;for(i.textAlign=r,i.textBaseline="middle",i.font=u.string,t.x=ar(this,g,n),i.fillStyle=n.bodyColor,et(this.beforeBody,p),m=a&&g!=="right"?r==="center"?c/2+h:c+2+h:0,v=0,M=s.length;v<M;++v){for(_=s[v],y=this.labelTextColors[v],i.fillStyle=y,et(_.before,p),x=_.lines,a&&x.length&&(this._drawColorBox(i,t,v,d,n),f=Math.max(u.lineHeight,l)),b=0,T=x.length;b<T;++b)p(x[b]),f=u.lineHeight;et(_.after,p)}m=0,f=u.lineHeight,et(this.afterBody,p),t.y-=o}drawFooter(t,i,n){let s=this.footer,o=s.length,r,a;if(o){let l=Wi(n.rtl,this.x,this.width);for(t.x=ar(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",r=Ot(n.footerFont),i.fillStyle=n.footerColor,i.font=r.string,a=0;a<o;++a)i.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,i,n,s){let{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:h}=n,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:d}=xi(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+u,l),r==="top"&&this.drawCaret(t,i,n,s),i.lineTo(a+c-f,l),i.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(t,i,n,s),i.lineTo(a+c,l+h-d),i.quadraticCurveTo(a+c,l+h,a+c-d,l+h),r==="bottom"&&this.drawCaret(t,i,n,s),i.lineTo(a+m,l+h),i.quadraticCurveTo(a,l+h,a,l+h-m),r==="center"&&o==="left"&&this.drawCaret(t,i,n,s),i.lineTo(a,l+u),i.quadraticCurveTo(a,l,a+u,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){let r=Ys[t.position].call(this,this._active,this._eventPosition);if(!r)return;let a=this._size=Sd(this,t),l=Object.assign({},r,this._size),c=Ld(i,t,l),h=kd(t,l,c,i);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let r=Bt(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,s,i),vl(t,i.textDirection),o.y+=r.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),bl(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let n=this._active,s=t.map(({datasetIndex:a,index:l})=>{let c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Rs(n,s),r=this._positionChanged(s,i);(o||r)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],r=this._getActiveElements(t,o,i,n),a=this._positionChanged(r,t),l=i||!Rs(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,n,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i;let r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,i){let{caretX:n,caretY:s,options:o}=this,r=Ys[o.position].call(this,t,i);return r!==!1&&(n!==r.x||s!==r.y)}};Js.positioners=Ys;var l0={id:"tooltip",_element:Js,positioners:Ys,afterInit(e,t,i){i&&(e.tooltip=new Js({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){let t=e.tooltip;if(t&&t._willRender()){let i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",i)===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){let i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Ae,title(e){if(e.length>0){let t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:Ae,beforeBody:Ae,beforeLabel:Ae,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");let i=e.formattedValue;return q(i)||(t+=i),t},labelColor(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Ae,afterBody:Ae,beforeFooter:Ae,footer:Ae,afterFooter:Ae}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},c0=Object.freeze({__proto__:null,Decimation:Pv,Filler:qv,Legend:Kv,SubTitle:t0,Title:Qv,Tooltip:l0}),h0=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function u0(e,t,i,n){let s=e.indexOf(t);if(s===-1)return h0(e,t,i,n);let o=e.lastIndexOf(t);return s!==o?i:s}var d0=(e,t)=>e===null?null:At(Math.round(e),0,t),Hn=class extends oi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let n=this.getLabels();for(let{index:s,label:o}of i)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(q(t))return null;let n=this.getLabels();return i=isFinite(i)&&n[i]===t?i:u0(n,t,R(i,t),this._addedLabels),d0(i,n.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){let t=this.min,i=this.max,n=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=i;r++)s.push({value:r});return s}getLabelForValue(t){let i=this.getLabels();return t>=0&&t<i.length?i[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}};Hn.id="category";Hn.defaults={ticks:{callback:Hn.prototype.getLabelForValue}};function f0(e,t){let i=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:f}=e,m=o||1,d=h-1,{min:p,max:g}=t,_=!q(r),y=!q(a),x=!q(c),v=(g-p)/(u+1),b=Ga((g-p)/d/m)*m,M,T,w,k;if(b<1e-14&&!_&&!y)return[{value:p},{value:g}];k=Math.ceil(g/b)-Math.floor(p/b),k>d&&(b=Ga(k*b/d/m)*m),q(l)||(M=Math.pow(10,l),b=Math.ceil(b*M)/M),s==="ticks"?(T=Math.floor(p/b)*b,w=Math.ceil(g/b)*b):(T=p,w=g),_&&y&&o&&yu((a-r)/o,b/1e3)?(k=Math.round(Math.min((a-r)/b,h)),b=(a-r)/k,T=r,w=a):x?(T=_?r:T,w=y?a:w,k=c-1,b=(w-T)/k):(k=(w-T)/b,Mn(k,Math.round(k),b/1e3)?k=Math.round(k):k=Math.ceil(k));let V=Math.max(Ka(b),Ka(T));M=Math.pow(10,q(l)?V:l),T=Math.round(T*M)/M,w=Math.round(w*M)/M;let Y=0;for(_&&(f&&T!==r?(i.push({value:r}),T<r&&Y++,Mn(Math.round((T+Y*b)*M)/M,r,Od(r,v,e))&&Y++):T<r&&Y++);Y<k;++Y)i.push({value:Math.round((T+Y*b)*M)/M});return y&&f&&w!==a?i.length&&Mn(i[i.length-1].value,a,Od(a,v,e))?i[i.length-1].value=a:i.push({value:a}):(!y||w===a)&&i.push({value:w}),i}function Od(e,t,{horizontal:i,minRotation:n}){let s=ue(n),o=(i?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}var Wn=class extends oi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return q(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds(),{min:s,max:o}=this,r=l=>s=i?s:l,a=l=>o=n?o:l;if(t){let l=we(s),c=we(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=1;(o>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(o*.05)),a(o+l),t||r(s-l)}this.min=s,this.max=o}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:i,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,i=t.ticks,n=this.getTickLimit();n=Math.max(2,n);let s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},o=this._range||this,r=f0(s,o);return t.bounds==="ticks"&&Xa(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){let t=this.ticks,i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){let s=(n-i)/Math.max(t.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return Pn(t,this.chart.options.locale,this.options.ticks.format)}},Qs=class extends Wn{determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=St(t)?t:0,this.max=St(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),i=t?this.width:this.height,n=ue(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}};Qs.id="linear";Qs.defaults={ticks:{callback:gr.formatters.numeric}};function Cd(e){return e/Math.pow(10,Math.floor(te(e)))===1}function m0(e,t){let i=Math.floor(te(t.max)),n=Math.ceil(t.max/Math.pow(10,i)),s=[],o=Qt(e.min,Math.pow(10,Math.floor(te(t.min)))),r=Math.floor(te(o)),a=Math.floor(o/Math.pow(10,r)),l=r<0?Math.pow(10,Math.abs(r)):1;do s.push({value:o,major:Cd(o)}),++a,a===10&&(a=1,++r,l=r>=0?1:l),o=Math.round(a*Math.pow(10,r)*l)/l;while(r<i||r===i&&a<n);let c=Qt(e.max,o);return s.push({value:c,major:Cd(o)}),s}var to=class extends oi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){let n=Wn.prototype.parse.apply(this,[t,i]);if(n===0){this._zero=!0;return}return St(n)&&n>0?n:null}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=St(t)?Math.max(0,t):null,this.max=St(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),n=this.min,s=this.max,o=l=>n=t?n:l,r=l=>s=i?s:l,a=(l,c)=>Math.pow(10,Math.floor(te(l))+c);n===s&&(n<=0?(o(1),r(10)):(o(a(n,-1)),r(a(s,1)))),n<=0&&o(a(s,-1)),s<=0&&r(a(n,1)),this._zero&&this.min!==this._suggestedMin&&n===a(this.min,0)&&o(a(n,-1)),this.min=n,this.max=s}buildTicks(){let t=this.options,i={min:this._userMin,max:this._userMax},n=m0(i,this);return t.bounds==="ticks"&&Xa(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":Pn(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=te(t),this._valueRange=te(this.max)-te(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(te(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}};to.id="logarithmic";to.defaults={ticks:{callback:gr.formatters.logarithmic,major:{enabled:!0}}};function $l(e){let t=e.ticks;if(t.display&&e.display){let i=Bt(t.backdropPadding);return R(t.font&&t.font.size,j.font.size)+i.height}return 0}function p0(e,t,i){return i=ct(i)?i:[i],{w:Cu(e,t.string,i),h:i.length*t.lineHeight}}function Id(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function g0(e){let t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],s=[],o=e._pointLabels.length,r=e.options.pointLabels,a=r.centerPointLabels?ft/o:0;for(let l=0;l<o;l++){let c=r.setContext(e.getPointLabelContext(l));s[l]=c.padding;let h=e.getPointPosition(l,e.drawingArea+s[l],a),u=Ot(c.font),f=p0(e.ctx,u,e._pointLabels[l]);n[l]=f;let m=jt(e.getIndexAngle(l)+a),d=Math.round(qo(m)),p=Id(d,h.x,f.w,0,180),g=Id(d,h.y,f.h,90,270);_0(i,t,m,p,g)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=y0(e,n,s)}function _0(e,t,i,n,s){let o=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i)),a=0,l=0;n.start<t.l?(a=(t.l-n.start)/o,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/r,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/r,e.b=Math.max(e.b,t.b+l))}function y0(e,t,i){let n=[],s=e._pointLabels.length,o=e.options,r=$l(o)/2,a=e.drawingArea,l=o.pointLabels.centerPointLabels?ft/s:0;for(let c=0;c<s;c++){let h=e.getPointPosition(c,a+r+i[c],l),u=Math.round(qo(jt(h.angle+xt))),f=t[c],m=x0(h.y,f.h,u),d=v0(u),p=b0(h.x,f.w,d);n.push({x:h.x,y:m,textAlign:d,left:p,top:m,right:p+f.w,bottom:m+f.h})}return n}function v0(e){return e===0||e===180?"center":e<180?"left":"right"}function b0(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function x0(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function w0(e,t){let{ctx:i,options:{pointLabels:n}}=e;for(let s=t-1;s>=0;s--){let o=n.setContext(e.getPointLabelContext(s)),r=Ot(o.font),{x:a,y:l,textAlign:c,left:h,top:u,right:f,bottom:m}=e._pointLabelItems[s],{backdropColor:d}=o;if(!q(d)){let p=xi(o.borderRadius),g=Bt(o.backdropPadding);i.fillStyle=d;let _=h-g.left,y=u-g.top,x=f-h+g.width,v=m-u+g.height;Object.values(p).some(b=>b!==0)?(i.beginPath(),Ln(i,{x:_,y,w:x,h:v,radius:p}),i.fill()):i.fillRect(_,y,x,v)}bi(i,e._pointLabels[s],a,l+r.lineHeight/2,r,{color:o.color,textAlign:c,textBaseline:"middle"})}}function ef(e,t,i,n){let{ctx:s}=e;if(i)s.arc(e.xCenter,e.yCenter,t,0,nt);else{let o=e.getPointPosition(0,t);s.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=e.getPointPosition(r,t),s.lineTo(o.x,o.y)}}function T0(e,t,i,n){let s=e.ctx,o=t.circular,{color:r,lineWidth:a}=t;!o&&!n||!r||!a||i<0||(s.save(),s.strokeStyle=r,s.lineWidth=a,s.setLineDash(t.borderDash),s.lineDashOffset=t.borderDashOffset,s.beginPath(),ef(e,i,o,n),s.closePath(),s.stroke(),s.restore())}function M0(e,t,i){return ii(e,{label:i,index:t,type:"pointLabel"})}var $i=class extends Wn{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=Bt($l(this.options)/2),i=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!1);this.min=St(t)&&!isNaN(t)?t:0,this.max=St(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/$l(this.options))}generateTickLabels(t){Wn.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,n)=>{let s=ht(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){let t=this.options;t.display&&t.pointLabels.display?g0(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,n,s){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,n,s))}getIndexAngle(t){let i=nt/(this._pointLabels.length||1),n=this.options.startAngle||0;return jt(t*i+ue(n))}getDistanceFromCenterForValue(t){if(q(t))return NaN;let i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(q(t))return NaN;let i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){let i=this._pointLabels||[];if(t>=0&&t<i.length){let n=i[t];return M0(this.getContext(),t,n)}}getPointPosition(t,i,n=0){let s=this.getIndexAngle(t)-xt+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:i,top:n,right:s,bottom:o}=this._pointLabelItems[t];return{left:i,top:n,right:s,bottom:o}}drawBackground(){let{backgroundColor:t,grid:{circular:i}}=this.options;if(t){let n=this.ctx;n.save(),n.beginPath(),ef(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){let t=this.ctx,i=this.options,{angleLines:n,grid:s}=i,o=this._pointLabels.length,r,a,l;if(i.pointLabels.display&&w0(this,o),s.display&&this.ticks.forEach((c,h)=>{if(h!==0){a=this.getDistanceFromCenterForValue(c.value);let u=s.setContext(this.getContext(h-1));T0(this,u,a,o)}}),n.display){for(t.save(),r=o-1;r>=0;r--){let c=n.setContext(this.getPointLabelContext(r)),{color:h,lineWidth:u}=c;!u||!h||(t.lineWidth=u,t.strokeStyle=h,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),l=this.getPointPosition(r,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;let s=this.getIndexAngle(0),o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!i.reverse)return;let c=n.setContext(this.getContext(l)),h=Ot(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,r=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let u=Bt(c.backdropPadding);t.fillRect(-r/2-u.left,-o-h.size/2-u.top,r+u.width,h.size+u.height)}bi(t,a.label,0,-o,h,{color:c.color})}),t.restore()}drawTitle(){}};$i.id="radialLinear";$i.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:gr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};$i.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};$i.descriptors={angleLines:{_fallback:"grid"}};var _r={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ut=Object.keys(_r);function S0(e,t){return e-t}function Dd(e,t){if(q(t))return null;let i=e._adapter,{parser:n,round:s,isoWeekday:o}=e._parseOpts,r=t;return typeof n=="function"&&(r=n(r)),St(r)||(r=typeof n=="string"?i.parse(r,n):i.parse(r)),r===null?null:(s&&(r=s==="week"&&(Hi(o)||o===!0)?i.startOf(r,"isoWeek",o):i.startOf(r,s)),+r)}function Ad(e,t,i,n){let s=Ut.length;for(let o=Ut.indexOf(e);o<s-1;++o){let r=_r[Ut[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((i-t)/(a*r.size))<=n)return Ut[o]}return Ut[s-1]}function L0(e,t,i,n,s){for(let o=Ut.length-1;o>=Ut.indexOf(i);o--){let r=Ut[o];if(_r[r].common&&e._adapter.diff(s,n,r)>=t-1)return r}return Ut[i?Ut.indexOf(i):0]}function k0(e){for(let t=Ut.indexOf(e)+1,i=Ut.length;t<i;++t)if(_r[Ut[t]].common)return Ut[t]}function zd(e,t,i){if(!i)e[t]=!0;else if(i.length){let{lo:n,hi:s}=Go(i,t),o=i[n]>=t?i[n]:i[s];e[o]=!0}}function P0(e,t,i,n){let s=e._adapter,o=+s.startOf(t[0].value,n),r=t[t.length-1].value,a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}function Fd(e,t,i){let n=[],s={},o=t.length,r,a;for(r=0;r<o;++r)a=t[r],s[a]=r,n.push({value:a,major:!1});return o===0||!i?n:P0(e,n,s,i)}var ji=class extends oi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i){let n=t.time||(t.time={}),s=this._adapter=new yy._date(t.adapters.date);s.init(i),Tn(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:Dd(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,n=t.time.unit||"day",{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=St(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),o=St(o)&&!isNaN(o)?o:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){let t=this.options,i=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,r=this.max,a=xu(s,o,r);return this._unit=i.unit||(n.autoSkip?Ad(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):L0(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:k0(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),Fd(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let i=0,n=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);let r=t.length<3?.5:.25;i=At(i,0,r),n=At(n,0,r),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){let t=this._adapter,i=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||Ad(o.minUnit,i,n,this._getLabelCapacity(i)),a=R(o.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Hi(l)||l===!0,h={},u=i,f,m;if(c&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,c?"day":r),t.diff(n,i,r)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+r);let d=s.ticks.source==="data"&&this.getDataTimestamps();for(f=u,m=0;f<n;f=+t.add(f,a,r),m++)zd(h,f,d);return(f===n||s.bounds==="ticks"||m===1)&&zd(h,f,d),Object.keys(h).sort((p,g)=>p-g).map(p=>+p)}getLabelForValue(t){let i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}_tickFormatFunction(t,i,n,s){let o=this.options,r=o.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&r[a],h=l&&r[l],u=n[i],f=l&&h&&u&&u.major,m=this._adapter.format(t,s||(f?h:c)),d=o.ticks.callback;return d?ht(d,[m,i,n],this):m}generateTickLabels(t){let i,n,s;for(i=0,n=t.length;i<n;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){let i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,n=this.ctx.measureText(t).width,s=ue(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){let i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,o=this._tickFormatFunction(t,0,Fd(this,[t],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,n;if(t.length)return t;let s=this.getLabels();for(i=0,n=s.length;i<n;++i)t.push(Dd(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return tl(t.sort(S0))}};ji.id="time";ji.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function lr(e,t,i){let n=0,s=e.length-1,o,r,a,l;i?(t>=e[n].pos&&t<=e[s].pos&&({lo:n,hi:s}=De(e,"pos",t)),{pos:o,time:a}=e[n],{pos:r,time:l}=e[s]):(t>=e[n].time&&t<=e[s].time&&({lo:n,hi:s}=De(e,"time",t)),{time:o,pos:a}=e[n],{time:r,pos:l}=e[s]);let c=r-o;return c?a+(l-a)*(t-o)/c:a}var eo=class extends ji{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=lr(i,this.min),this._tableRange=lr(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:i,max:n}=this,s=[],o=[],r,a,l,c,h;for(r=0,a=t.length;r<a;++r)c=t[r],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)h=s[r+1],l=s[r-1],c=s[r],Math.round((h+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(lr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return lr(this._table,n*this._tableRange+this._minPos,!0)}};eo.id="timeseries";eo.defaults=ji.defaults;var E0=Object.freeze({__proto__:null,CategoryScale:Hn,LinearScale:Qs,LogarithmicScale:to,RadialLinearScale:$i,TimeScale:ji,TimeSeriesScale:eo}),nf=[_y,Mv,c0,E0];var yr=Yr(Fa());var O0={animation:{duration:2e3,easing:"linear",loop:!1},responsive:!0,maintainAspectRatio:!1,layout:{autoPadding:!0},plugins:{title:{display:!1},legend:{position:"bottom",fullSize:!0,labels:{padding:14,color:"rgb(255, 255, 255)",font:{family:"CenturyGothic",size:12}}}},scales:{x:{display:!0,grid:{color:"#222222"},ticks:{color:"rgb(255, 255, 255)",font:{family:"CenturyGothic",size:12,lineHeight:1.6},autoSkip:!0,maxRotation:0,minRotation:0}},y:{display:!0,stacked:!1,min:0,grid:{color:"#222222"},ticks:{color:"rgb(255, 255, 255)",font:{family:"CenturyGothic",size:12,lineHeight:1.6},autoSkip:!0,maxRotation:0,minRotation:0}}}},Li={borderWidth:4,fill:!1,showLine:!0,pointRadius:0,cubicInterpolationMode:"monotone",tension:.4,stepped:!1},ki={type:"line",data:{labels:[],datasets:[{label:"TEMPERATURE",borderColor:"#ff9696",backgroundColor:"#ff9696",...Li,data:[],borderWidth:6},{label:"HUMIDITY",borderColor:"#ffe100",backgroundColor:"#ffe100",...Li,data:[],borderWidth:3},{label:"CLOUD",borderColor:"#cccccc",backgroundColor:"#cccccc",...Li,data:[]},{label:"RAIN",borderColor:"#52ff97",backgroundColor:"#52ff97",...Li,data:[],borderWidth:6},{label:"WIND",borderColor:"#00bbff",backgroundColor:"#00bbff",...Li,data:[]},{label:"FEEL",borderColor:"#b70053",backgroundColor:"#b70053",...Li,data:[]},{label:"SUN",borderColor:"#fec88220",backgroundColor:"#fec88220",...Li,tension:.9,fill:!0,borderWidth:0,data:[]},{label:"MOON",borderColor:"#0081a715",backgroundColor:"#0081a715",...Li,tension:.9,fill:!0,borderWidth:0,data:[]}]},options:O0},Ui;async function C0(){let e=document.getElementById("component-chart");I("initChart"),e&&(e.height=400,Vi.register(...nf),Ui=new Vi(e,ki))}async function vr(e){if(I("updateChart",e.hourly),!e||!e.hourly)return;Ui||await C0(),ki.data.labels&&(ki.data.labels.length=0);for(let i of ki.data.datasets)i.data.length=0;e.hourly.data.forEach(i=>{var o;(o=ki.data.labels)==null||o.push([P.fromSeconds(i.time).toFormat("ccc").toUpperCase(),P.fromSeconds(i.time).toFormat("HH:mm")]);let n=yr.getPosition(P.fromSeconds(i.time).toJSDate(),e.latitude,e.longitude),s=yr.getMoonPosition(P.fromSeconds(i.time).toJSDate(),e.latitude,e.longitude);ki.data.datasets.forEach(r=>{var a,l,c,h,u,f,m,d;((a=r.label)==null?void 0:a.toUpperCase())==="SUN"&&r.data.push(100*Math.sin(n.altitude)),((l=r.label)==null?void 0:l.toUpperCase())==="MOON"&&r.data.push(100*Math.sin(s.altitude)),((c=r.label)==null?void 0:c.toUpperCase())==="TEMPERATURE"&&r.data.push(i.temperature),((h=r.label)==null?void 0:h.toUpperCase())==="FEEL"&&r.data.push(i.apparentTemperature),((u=r.label)==null?void 0:u.toUpperCase())==="RAIN"&&r.data.push(Math.min(5*100*i.precipIntensity,100)),((f=r.label)==null?void 0:f.toUpperCase())==="WIND"&&r.data.push(i.windSpeed),((m=r.label)==null?void 0:m.toUpperCase())==="CLOUD"&&r.data.push(100*i.cloudCover),((d=r.label)==null?void 0:d.toUpperCase())==="HUMIDITY"&&r.data.push(100*i.humidity)})}),Ui.update();let t={};for(let i of ki.data.datasets){t[i.label]=Ui.ctx.createLinearGradient(0,Ui.chartArea.bottom,0,Ui.chartArea.top);let n=Math.min(...i.data),s=Math.max(...i.data);t[i.label].addColorStop(Math.max(n/120-.1,0),"#000000"),t[i.label].addColorStop(s/120,i.backgroundColor);let o=ki.data.datasets.find(r=>r.label===i.label);o&&(o.borderColor=t[i.label])}Ui.update()}var Ul=class extends HTMLElement{connectedCallback(){this.innerHTML=`
      <canvas id="component-chart" height="0" width="1000"></canvas>
    `}};customElements.define("component-chart",Ul);var I0="1.9.1";function rt(e){var t,i,n,s;for(i=1,n=arguments.length;i<n;i++){s=arguments[i];for(t in s)e[t]=s[t]}return e}var Mr=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function pt(e,t){var i=Array.prototype.slice;if(e.bind)return e.bind.apply(e,i.call(arguments,1));var n=i.call(arguments,2);return function(){return e.apply(t,n.length?n.concat(i.call(arguments)):arguments)}}var pf=0;function J(e){return"_leaflet_id"in e||(e._leaflet_id=++pf),e._leaflet_id}function gf(e,t,i){var n,s,o,r;return r=function(){n=!1,s&&(o.apply(i,s),s=!1)},o=function(){n?s=arguments:(e.apply(i,arguments),setTimeout(r,t),n=!0)},o}function ao(e,t,i){var n=t[1],s=t[0],o=n-s;return e===n&&i?e:((e-s)%o+o)%o+s}function Ct(){return!1}function Be(e,t){if(t===!1)return e;var i=Math.pow(10,t===void 0?6:t);return Math.round(e*i)/i}function sc(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Yi(e){return sc(e).split(/\s+/)}function gt(e,t){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?Mr(e.options):{});for(var i in t)e.options[i]=t[i];return e.options}function _f(e,t,i){var n=[];for(var s in e)n.push(encodeURIComponent(i?s.toUpperCase():s)+"="+encodeURIComponent(e[s]));return(!t||t.indexOf("?")===-1?"?":"&")+n.join("&")}var D0=/\{ *([\w_ -]+) *\}/g;function yf(e,t){return e.replace(D0,function(i,n){var s=t[n];if(s===void 0)throw new Error("No value provided for variable "+i);return typeof s=="function"&&(s=s(t)),s})}var Te=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function oc(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var br="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ql(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var sf=0;function vf(e){var t=+new Date,i=Math.max(0,16-(t-sf));return sf=t+i,window.setTimeout(e,i)}var Gl=window.requestAnimationFrame||ql("RequestAnimationFrame")||vf,bf=window.cancelAnimationFrame||ql("CancelAnimationFrame")||ql("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function qt(e,t,i){if(i&&Gl===vf)e.call(t);else return Gl.call(window,pt(e,t))}function fe(e){e&&bf.call(window,e)}var A0={__proto__:null,extend:rt,create:Mr,bind:pt,get lastId(){return pf},stamp:J,throttle:gf,wrapNum:ao,falseFn:Ct,formatNum:Be,trim:sc,splitWords:Yi,setOptions:gt,getParamString:_f,template:yf,isArray:Te,indexOf:oc,emptyImageUrl:br,requestFn:Gl,cancelFn:bf,requestAnimFrame:qt,cancelAnimFrame:fe};function li(){}li.extend=function(e){var t=function(){gt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,n=Mr(i);n.constructor=t,t.prototype=n;for(var s in this)Object.prototype.hasOwnProperty.call(this,s)&&s!=="prototype"&&s!=="__super__"&&(t[s]=this[s]);return e.statics&&rt(t,e.statics),e.includes&&(z0(e.includes),rt.apply(null,[n].concat(e.includes))),rt(n,e),delete n.statics,delete n.includes,n.options&&(n.options=i.options?Mr(i.options):{},rt(n.options,e.options)),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var o=0,r=n._initHooks.length;o<r;o++)n._initHooks[o].call(this)}},t};li.include=function(e){var t=this.prototype.options;return rt(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this};li.mergeOptions=function(e){return rt(this.prototype.options,e),this};li.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i=typeof e=="function"?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function z0(e){if(!(typeof L=="undefined"||!L||!L.Mixin)){e=Te(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ne={on:function(e,t,i){if(typeof e=="object")for(var n in e)this._on(n,e[n],t);else{e=Yi(e);for(var s=0,o=e.length;s<o;s++)this._on(e[s],t,i)}return this},off:function(e,t,i){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var n in e)this._off(n,e[n],t);else{e=Yi(e);for(var s=arguments.length===1,o=0,r=e.length;o<r;o++)s?this._off(e[o]):this._off(e[o],t,i)}return this},_on:function(e,t,i,n){if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}if(this._listens(e,t,i)===!1){i===this&&(i=void 0);var s={fn:t,ctx:i};n&&(s.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(s)}},_off:function(e,t,i){var n,s,o;if(!!this._events&&(n=this._events[e],!!n)){if(arguments.length===1){if(this._firingCount)for(s=0,o=n.length;s<o;s++)n[s].fn=Ct;delete this._events[e];return}if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}var r=this._listens(e,t,i);if(r!==!1){var a=n[r];this._firingCount&&(a.fn=Ct,this._events[e]=n=n.slice()),n.splice(r,1)}}},fire:function(e,t,i){if(!this.listens(e,i))return this;var n=rt({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var s=this._events[e];if(s){this._firingCount=this._firingCount+1||1;for(var o=0,r=s.length;o<r;o++){var a=s[o],l=a.fn;a.once&&this.off(e,l,a.ctx),l.call(a.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(e,t,i,n){typeof e!="string"&&console.warn('"string" type argument expected');var s=t;typeof t!="function"&&(n=!!t,s=void 0,i=void 0);var o=this._events&&this._events[e];if(o&&o.length&&this._listens(e,s,i)!==!1)return!0;if(n){for(var r in this._eventParents)if(this._eventParents[r].listens(e,t,i,n))return!0}return!1},_listens:function(e,t,i){if(!this._events)return!1;var n=this._events[e]||[];if(!t)return!!n.length;i===this&&(i=void 0);for(var s=0,o=n.length;s<o;s++)if(n[s].fn===t&&n[s].ctx===i)return s;return!1},once:function(e,t,i){if(typeof e=="object")for(var n in e)this._on(n,e[n],t,!0);else{e=Yi(e);for(var s=0,o=e.length;s<o;s++)this._on(e[s],t,i,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[J(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[J(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,rt({layer:e.target,propagatedFrom:e.target},e),!0)}};ne.addEventListener=ne.on;ne.removeEventListener=ne.clearAllEventListeners=ne.off;ne.addOneTimeEventListener=ne.once;ne.fireEvent=ne.fire;ne.hasEventListeners=ne.listens;var uo=li.extend(ne);function N(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t}var of=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(e){return this.clone()._add(z(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(z(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new N(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new N(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=of(this.x),this.y=of(this.y),this},distanceTo:function(e){e=z(e);var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return e=z(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=z(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+Be(this.x)+", "+Be(this.y)+")"}};function z(e,t,i){return e instanceof N?e:Te(e)?new N(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new N(e.x,e.y):new N(e,t,i)}function Tt(e,t){if(!!e)for(var i=t?[e,t]:e,n=0,s=i.length;n<s;n++)this.extend(i[n])}Tt.prototype={extend:function(e){var t,i;if(!e)return this;if(e instanceof N||typeof e[0]=="number"||"x"in e)t=i=z(e);else if(e=Yt(e),t=e.min,i=e.max,!t||!i)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=i.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(e){return z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return z(this.min.x,this.max.y)},getTopRight:function(){return z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return typeof e[0]=="number"||e instanceof N?e=z(e):e=Yt(e),e instanceof Tt?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=Yt(e);var t=this.min,i=this.max,n=e.min,s=e.max,o=s.x>=t.x&&n.x<=i.x,r=s.y>=t.y&&n.y<=i.y;return o&&r},overlaps:function(e){e=Yt(e);var t=this.min,i=this.max,n=e.min,s=e.max,o=s.x>t.x&&n.x<i.x,r=s.y>t.y&&n.y<i.y;return o&&r},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,i=this.max,n=Math.abs(t.x-i.x)*e,s=Math.abs(t.y-i.y)*e;return Yt(z(t.x-n,t.y-s),z(i.x+n,i.y+s))},equals:function(e){return e?(e=Yt(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function Yt(e,t){return!e||e instanceof Tt?e:new Tt(e,t)}function Gt(e,t){if(!!e)for(var i=t?[e,t]:e,n=0,s=i.length;n<s;n++)this.extend(i[n])}Gt.prototype={extend:function(e){var t=this._southWest,i=this._northEast,n,s;if(e instanceof tt)n=e,s=e;else if(e instanceof Gt){if(n=e._southWest,s=e._northEast,!n||!s)return this}else return e?this.extend(ut(e)||Rt(e)):this;return!t&&!i?(this._southWest=new tt(n.lat,n.lng),this._northEast=new tt(s.lat,s.lng)):(t.lat=Math.min(n.lat,t.lat),t.lng=Math.min(n.lng,t.lng),i.lat=Math.max(s.lat,i.lat),i.lng=Math.max(s.lng,i.lng)),this},pad:function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,s=Math.abs(t.lng-i.lng)*e;return new Gt(new tt(t.lat-n,t.lng-s),new tt(i.lat+n,i.lng+s))},getCenter:function(){return new tt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new tt(this.getNorth(),this.getWest())},getSouthEast:function(){return new tt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof tt||"lat"in e?e=ut(e):e=Rt(e);var t=this._southWest,i=this._northEast,n,s;return e instanceof Gt?(n=e.getSouthWest(),s=e.getNorthEast()):n=s=e,n.lat>=t.lat&&s.lat<=i.lat&&n.lng>=t.lng&&s.lng<=i.lng},intersects:function(e){e=Rt(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),s=e.getNorthEast(),o=s.lat>=t.lat&&n.lat<=i.lat,r=s.lng>=t.lng&&n.lng<=i.lng;return o&&r},overlaps:function(e){e=Rt(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),s=e.getNorthEast(),o=s.lat>t.lat&&n.lat<i.lat,r=s.lng>t.lng&&n.lng<i.lng;return o&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return e?(e=Rt(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Rt(e,t){return e instanceof Gt?e:new Gt(e,t)}function tt(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,i!==void 0&&(this.alt=+i)}tt.prototype={equals:function(e,t){if(!e)return!1;e=ut(e);var i=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return i<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+Be(this.lat,e)+", "+Be(this.lng,e)+")"},distanceTo:function(e){return Oi.distance(this,ut(e))},wrap:function(){return Oi.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return Rt([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])},clone:function(){return new tt(this.lat,this.lng,this.alt)}};function ut(e,t,i){return e instanceof tt?e:Te(e)&&typeof e[0]!="object"?e.length===3?new tt(e[0],e[1],e[2]):e.length===2?new tt(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new tt(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===void 0?null:new tt(e,t,i)}var ci={latLngToPoint:function(e,t){var i=this.projection.project(e),n=this.scale(t);return this.transformation._transform(i,n)},pointToLatLng:function(e,t){var i=this.scale(t),n=this.transformation.untransform(e,i);return this.projection.unproject(n)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,i=this.scale(e),n=this.transformation.transform(t.min,i),s=this.transformation.transform(t.max,i);return new Tt(n,s)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?ao(e.lng,this.wrapLng,!0):e.lng,i=this.wrapLat?ao(e.lat,this.wrapLat,!0):e.lat,n=e.alt;return new tt(i,t,n)},wrapLatLngBounds:function(e){var t=e.getCenter(),i=this.wrapLatLng(t),n=t.lat-i.lat,s=t.lng-i.lng;if(n===0&&s===0)return e;var o=e.getSouthWest(),r=e.getNorthEast(),a=new tt(o.lat-n,o.lng-s),l=new tt(r.lat-n,r.lng-s);return new Gt(a,l)}},Oi=rt({},ci,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var i=Math.PI/180,n=e.lat*i,s=t.lat*i,o=Math.sin((t.lat-e.lat)*i/2),r=Math.sin((t.lng-e.lng)*i/2),a=o*o+Math.cos(n)*Math.cos(s)*r*r,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),rf=6378137,Xl={R:rf,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),s=Math.sin(n*t);return new N(this.R*e.lng*t,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(e){var t=180/Math.PI;return new tt((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=rf*Math.PI;return new Tt([-e,-e],[e,e])}()};function rc(e,t,i,n){if(Te(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=i,this._d=n}rc.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new N((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function fo(e,t,i,n){return new rc(e,t,i,n)}var ac=rt({},Oi,{code:"EPSG:3857",projection:Xl,transformation:function(){var e=.5/(Math.PI*Xl.R);return fo(e,.5,-e,.5)}()}),F0=rt({},ac,{code:"EPSG:900913"});function xf(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function wf(e,t){var i="",n,s,o,r,a,l;for(n=0,o=e.length;n<o;n++){for(a=e[n],s=0,r=a.length;s<r;s++)l=a[s],i+=(s?"L":"M")+l.x+" "+l.y;i+=t?O.svg?"z":"x":""}return i||"M0 0"}var lc=document.documentElement.style,Or="ActiveXObject"in window,R0=Or&&!document.addEventListener,Tf="msLaunchUri"in navigator&&!("documentMode"in document),cc=Ze("webkit"),Mf=Ze("android"),Sf=Ze("android 2")||Ze("android 3"),N0=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),B0=Mf&&Ze("Google")&&N0<537&&!("AudioNode"in window),hc=!!window.opera,Lf=!Tf&&Ze("chrome"),kf=Ze("gecko")&&!cc&&!hc&&!Or,H0=!Lf&&Ze("safari"),Pf=Ze("phantom"),Ef="OTransition"in lc,W0=navigator.platform.indexOf("Win")===0,Of=Or&&"transition"in lc,uc="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Sf,Cf="MozPerspective"in lc,Z0=!window.L_DISABLE_3D&&(Of||uc||Cf)&&!Ef&&!Pf,mo=typeof orientation!="undefined"||Ze("mobile"),V0=mo&&cc,$0=mo&&uc,If=!window.PointerEvent&&window.MSPointerEvent,Df=!!(window.PointerEvent||If),Af="ontouchstart"in window||!!window.TouchEvent,j0=!window.L_NO_TOUCH&&(Af||Df),U0=mo&&hc,Y0=mo&&kf,q0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,G0=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",Ct,t),window.removeEventListener("testPassiveEventSupport",Ct,t)}catch(i){}return e}(),X0=function(){return!!document.createElement("canvas").getContext}(),dc=!!(document.createElementNS&&xf("svg").createSVGRect),K0=!!dc&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),J0=!dc&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&typeof t.adj=="object"}catch(i){return!1}}(),Q0=navigator.platform.indexOf("Mac")===0,tb=navigator.platform.indexOf("Linux")===0;function Ze(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var O={ie:Or,ielt9:R0,edge:Tf,webkit:cc,android:Mf,android23:Sf,androidStock:B0,opera:hc,chrome:Lf,gecko:kf,safari:H0,phantom:Pf,opera12:Ef,win:W0,ie3d:Of,webkit3d:uc,gecko3d:Cf,any3d:Z0,mobile:mo,mobileWebkit:V0,mobileWebkit3d:$0,msPointer:If,pointer:Df,touch:j0,touchNative:Af,mobileOpera:U0,mobileGecko:Y0,retina:q0,passiveEvents:G0,canvas:X0,svg:dc,vml:J0,inlineSvg:K0,mac:Q0,linux:tb},zf=O.msPointer?"MSPointerDown":"pointerdown",Ff=O.msPointer?"MSPointerMove":"pointermove",Rf=O.msPointer?"MSPointerUp":"pointerup",Nf=O.msPointer?"MSPointerCancel":"pointercancel",Kl={touchstart:zf,touchmove:Ff,touchend:Rf,touchcancel:Nf},af={touchstart:rb,touchmove:xr,touchend:xr,touchcancel:xr},$n={},lf=!1;function eb(e,t,i){return t==="touchstart"&&ob(),af[t]?(i=af[t].bind(this,i),e.addEventListener(Kl[t],i,!1),i):(console.warn("wrong event specified:",t),L.Util.falseFn)}function ib(e,t,i){if(!Kl[t]){console.warn("wrong event specified:",t);return}e.removeEventListener(Kl[t],i,!1)}function nb(e){$n[e.pointerId]=e}function sb(e){$n[e.pointerId]&&($n[e.pointerId]=e)}function cf(e){delete $n[e.pointerId]}function ob(){lf||(document.addEventListener(zf,nb,!0),document.addEventListener(Ff,sb,!0),document.addEventListener(Rf,cf,!0),document.addEventListener(Nf,cf,!0),lf=!0)}function xr(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){t.touches=[];for(var i in $n)t.touches.push($n[i]);t.changedTouches=[t],e(t)}}function rb(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Ht(t),xr(e,t)}function ab(e){var t={},i,n;for(n in e)i=e[n],t[n]=i&&i.bind?i.bind(e):i;return e=t,t.type="dblclick",t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var lb=200;function cb(e,t){e.addEventListener("dblclick",t);var i=0,n;function s(o){if(o.detail!==1){n=o.detail;return}if(!(o.pointerType==="mouse"||o.sourceCapabilities&&!o.sourceCapabilities.firesTouchEvents)){var r=Zf(o);if(!(r.some(function(l){return l instanceof HTMLLabelElement&&l.attributes.for})&&!r.some(function(l){return l instanceof HTMLInputElement||l instanceof HTMLSelectElement}))){var a=Date.now();a-i<=lb?(n++,n===2&&t(ab(o))):n=1,i=a}}}return e.addEventListener("click",s),{dblclick:t,simDblclick:s}}function hb(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var fc=Ir(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),so=Ir(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Bf=so==="webkitTransition"||so==="OTransition"?so+"End":"transitionend";function Hf(e){return typeof e=="string"?document.getElementById(e):e}function lo(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!i||i==="auto")&&document.defaultView){var n=document.defaultView.getComputedStyle(e,null);i=n?n[t]:null}return i==="auto"?null:i}function K(e,t,i){var n=document.createElement(e);return n.className=t||"",i&&i.appendChild(n),n}function wt(e){var t=e.parentNode;t&&t.removeChild(e)}function Sr(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function qn(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function Gn(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function mc(e,t){if(e.classList!==void 0)return e.classList.contains(t);var i=Cr(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)}function Z(e,t){if(e.classList!==void 0)for(var i=Yi(t),n=0,s=i.length;n<s;n++)e.classList.add(i[n]);else if(!mc(e,t)){var o=Cr(e);pc(e,(o?o+" ":"")+t)}}function kt(e,t){e.classList!==void 0?e.classList.remove(t):pc(e,sc((" "+Cr(e)+" ").replace(" "+t+" "," ")))}function pc(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function Cr(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function de(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&ub(e,t)}function ub(e,t){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(n)}catch(s){if(t===1)return}t=Math.round(t*100),i?(i.Enabled=t!==100,i.Opacity=t):e.style.filter+=" progid:"+n+"(opacity="+t+")"}function Ir(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}function Ki(e,t,i){var n=t||new N(0,0);e.style[fc]=(O.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function It(e,t){e._leaflet_pos=t,O.any3d?Ki(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Ji(e){return e._leaflet_pos||new N(0,0)}var co,ho,Yl;"onselectstart"in document?(co=function(){F(window,"selectstart",Ht)},ho=function(){dt(window,"selectstart",Ht)}):(Zn=Ir(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),co=function(){if(Zn){var e=document.documentElement.style;Yl=e[Zn],e[Zn]="none"}},ho=function(){Zn&&(document.documentElement.style[Zn]=Yl,Yl=void 0)});var Zn;function gc(){F(window,"dragstart",Ht)}function _c(){dt(window,"dragstart",Ht)}var wr,Jl;function yc(e){for(;e.tabIndex===-1;)e=e.parentNode;!e.style||(Lr(),wr=e,Jl=e.style.outline,e.style.outline="none",F(window,"keydown",Lr))}function Lr(){!wr||(wr.style.outline=Jl,wr=void 0,Jl=void 0,dt(window,"keydown",Lr))}function Wf(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function vc(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var hi={__proto__:null,TRANSFORM:fc,TRANSITION:so,TRANSITION_END:Bf,get:Hf,getStyle:lo,create:K,remove:wt,empty:Sr,toFront:qn,toBack:Gn,hasClass:mc,addClass:Z,removeClass:kt,setClass:pc,getClass:Cr,setOpacity:de,testProp:Ir,setTransform:Ki,setPosition:It,getPosition:Ji,get disableTextSelection(){return co},get enableTextSelection(){return ho},disableImageDrag:gc,enableImageDrag:_c,preventOutline:yc,restoreOutline:Lr,getSizedParentNode:Wf,getScale:vc};function F(e,t,i,n){if(t&&typeof t=="object")for(var s in t)tc(e,s,t[s],i);else{t=Yi(t);for(var o=0,r=t.length;o<r;o++)tc(e,t[o],i,n)}return this}var He="_leaflet_events";function dt(e,t,i,n){if(arguments.length===1)hf(e),delete e[He];else if(t&&typeof t=="object")for(var s in t)ec(e,s,t[s],i);else if(t=Yi(t),arguments.length===2)hf(e,function(a){return oc(t,a)!==-1});else for(var o=0,r=t.length;o<r;o++)ec(e,t[o],i,n);return this}function hf(e,t){for(var i in e[He]){var n=i.split(/\d/)[0];(!t||t(n))&&ec(e,n,null,null,i)}}var Ql={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function tc(e,t,i,n){var s=t+J(i)+(n?"_"+J(n):"");if(e[He]&&e[He][s])return this;var o=function(a){return i.call(n||e,a||window.event)},r=o;!O.touchNative&&O.pointer&&t.indexOf("touch")===0?o=eb(e,t,o):O.touch&&t==="dblclick"?o=cb(e,o):"addEventListener"in e?t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"?e.addEventListener(Ql[t]||t,o,O.passiveEvents?{passive:!1}:!1):t==="mouseenter"||t==="mouseleave"?(o=function(a){a=a||window.event,xc(e,a)&&r(a)},e.addEventListener(Ql[t],o,!1)):e.addEventListener(t,r,!1):e.attachEvent("on"+t,o),e[He]=e[He]||{},e[He][s]=o}function ec(e,t,i,n,s){s=s||t+J(i)+(n?"_"+J(n):"");var o=e[He]&&e[He][s];if(!o)return this;!O.touchNative&&O.pointer&&t.indexOf("touch")===0?ib(e,t,o):O.touch&&t==="dblclick"?hb(e,o):"removeEventListener"in e?e.removeEventListener(Ql[t]||t,o,!1):e.detachEvent("on"+t,o),e[He][s]=null}function qi(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function bc(e){return tc(e,"wheel",qi),this}function po(e){return F(e,"mousedown touchstart dblclick contextmenu",qi),e._leaflet_disable_click=!0,this}function Ht(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Qi(e){return Ht(e),qi(e),this}function Zf(e){if(e.composedPath)return e.composedPath();for(var t=[],i=e.target;i;)t.push(i),i=i.parentNode;return t}function Vf(e,t){if(!t)return new N(e.clientX,e.clientY);var i=vc(t),n=i.boundingClientRect;return new N((e.clientX-n.left)/i.x-t.clientLeft,(e.clientY-n.top)/i.y-t.clientTop)}var db=O.linux&&O.chrome?window.devicePixelRatio:O.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $f(e){return O.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/db:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function xc(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch(n){return!1}return i!==e}var Me={__proto__:null,on:F,off:dt,stopPropagation:qi,disableScrollPropagation:bc,disableClickPropagation:po,preventDefault:Ht,stop:Qi,getPropagationPath:Zf,getMousePosition:Vf,getWheelDelta:$f,isExternalTarget:xc,addListener:F,removeListener:dt},jf=uo.extend({run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Ji(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=qt(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,i=this._duration*1e3;t<i?this._runFrame(this._easeOut(t/i),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var i=this._startPos.add(this._offset.multiplyBy(e));t&&i._round(),It(this._el,i),this.fire("step")},_complete:function(){fe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),U=uo.extend({options:{crs:ac,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=gt(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=pt(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(ut(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=so&&O.any3d&&!O.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),F(this._proxy,Bf,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){if(t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(ut(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=rt({animate:i.animate},i.zoom),i.pan=rt({animate:i.animate,duration:i.duration},i.pan));var n=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan);if(n)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t,i.pan&&i.pan.noMoveStart),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(O.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(O.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,i){var n=this.getZoomScale(t),s=this.getSize().divideBy(2),o=e instanceof N?e:this.latLngToContainerPoint(e),r=o.subtract(s).multiplyBy(1-1/n),a=this.containerPointToLatLng(s.add(r));return this.setView(a,t,{zoom:i})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():Rt(e);var i=z(t.paddingTopLeft||t.padding||[0,0]),n=z(t.paddingBottomRight||t.padding||[0,0]),s=this.getBoundsZoom(e,!1,i.add(n));if(s=typeof t.maxZoom=="number"?Math.min(t.maxZoom,s):s,s===1/0)return{center:e.getCenter(),zoom:s};var o=n.subtract(i).divideBy(2),r=this.project(e.getSouthWest(),s),a=this.project(e.getNorthEast(),s),l=this.unproject(r.add(a).divideBy(2).add(o),s);return{center:l,zoom:s}},fitBounds:function(e,t){if(e=Rt(e),!e.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(e,t);return this.setView(i.center,i.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=z(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){Z(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,i){if(i=i||{},i.animate===!1||!O.any3d)return this.setView(e,t,i);this._stop();var n=this.project(this.getCenter()),s=this.project(e),o=this.getSize(),r=this._zoom;e=ut(e),t=t===void 0?r:t;var a=Math.max(o.x,o.y),l=a*this.getZoomScale(r,t),c=s.distanceTo(n)||1,h=1.42,u=h*h;function f(w){var k=w?-1:1,V=w?l:a,Y=l*l-a*a+k*u*u*c*c,B=2*V*u*c,at=Y/B,Pt=Math.sqrt(at*at+1)-at,A=Pt<1e-9?-18:Math.log(Pt);return A}function m(w){return(Math.exp(w)-Math.exp(-w))/2}function d(w){return(Math.exp(w)+Math.exp(-w))/2}function p(w){return m(w)/d(w)}var g=f(0);function _(w){return a*(d(g)/d(g+h*w))}function y(w){return a*(d(g)*p(g+h*w)-m(g))/u}function x(w){return 1-Math.pow(1-w,1.5)}var v=Date.now(),b=(f(1)-g)/h,M=i.duration?1e3*i.duration:1e3*b*.8;function T(){var w=(Date.now()-v)/M,k=x(w)*b;w<=1?(this._flyToFrame=qt(T,this),this._move(this.unproject(n.add(s.subtract(n).multiplyBy(y(k)/c)),r),this.getScaleZoom(a/_(k),r),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),T.call(this),this},flyToBounds:function(e,t){var i=this._getBoundsCenterZoom(e,t);return this.flyTo(i.center,i.zoom,t)},setMaxBounds:function(e){return e=Rt(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,Rt(e));return i.equals(n)||this.panTo(n,t),this._enforcingBounds=!1,this},panInside:function(e,t){t=t||{};var i=z(t.paddingTopLeft||t.padding||[0,0]),n=z(t.paddingBottomRight||t.padding||[0,0]),s=this.project(this.getCenter()),o=this.project(e),r=this.getPixelBounds(),a=Yt([r.min.add(i),r.max.subtract(n)]),l=a.getSize();if(!a.contains(o)){this._enforcingBounds=!0;var c=o.subtract(a.getCenter()),h=a.extend(o).getSize().subtract(l);s.x+=c.x<0?-h.x:h.x,s.y+=c.y<0?-h.y:h.y,this.panTo(this.unproject(s),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=rt({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=t.divideBy(2).round(),s=i.divideBy(2).round(),o=n.subtract(s);return!o.x&&!o.y?this:(e.animate&&e.pan?this.panBy(o):(e.pan&&this._rawPanBy(o),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(pt(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=rt({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=pt(this._handleGeolocationResponse,this),i=pt(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(!!this._container._leaflet_id){var t=e.code,i=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(e){if(!!this._container._leaflet_id){var t=e.coords.latitude,i=e.coords.longitude,n=new tt(t,i),s=n.toBounds(e.coords.accuracy*2),o=this._locateOptions;if(o.setView){var r=this.getBoundsZoom(s);this.setView(n,o.maxZoom?Math.min(r,o.maxZoom):r)}var a={latlng:n,bounds:s,timestamp:e.timestamp};for(var l in e.coords)typeof e.coords[l]=="number"&&(a[l]=e.coords[l]);this.fire("locationfound",a)}},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(fe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)wt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var i="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),n=K("div",i,t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new Gt(t,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=Rt(e),i=z(i||[0,0]);var n=this.getZoom()||0,s=this.getMinZoom(),o=this.getMaxZoom(),r=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(i),c=Yt(this.project(a,n),this.project(r,n)).getSize(),h=O.any3d?this.options.zoomSnap:1,u=l.x/c.x,f=l.y/c.y,m=t?Math.max(u,f):Math.min(u,f);return n=this.getScaleZoom(m,n),h&&(n=Math.round(n/(h/100))*(h/100),n=t?Math.ceil(n/h)*h:Math.floor(n/h)*h),Math.max(s,Math.min(o,n))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var i=this._getTopLeftPoint(e,t);return new Tt(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var i=this.options.crs;return t=t===void 0?this._zoom:t,i.scale(e)/i.scale(t)},getScaleZoom:function(e,t){var i=this.options.crs;t=t===void 0?this._zoom:t;var n=i.zoom(e*i.scale(t));return isNaN(n)?1/0:n},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(ut(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(z(e),t)},layerPointToLatLng:function(e){var t=z(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(ut(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(ut(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(Rt(e))},distance:function(e,t){return this.options.crs.distance(ut(e),ut(t))},containerPointToLayerPoint:function(e){return z(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return z(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(z(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ut(e)))},mouseEventToContainerPoint:function(e){return Vf(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=Hf(e);if(t){if(t._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");F(t,"scroll",this._onScroll,this),this._containerId=J(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&O.any3d,Z(e,"leaflet-container"+(O.touch?" leaflet-touch":"")+(O.retina?" leaflet-retina":"")+(O.ielt9?" leaflet-oldie":"")+(O.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=lo(e,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),It(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Z(e.markerPane,"leaflet-zoom-hide"),Z(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,i){It(this._mapPane,new N(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var s=this._zoom!==t;this._moveStart(s,i)._move(e,t)._moveEnd(s),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,i,n){t===void 0&&(t=this._zoom);var s=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),n?i&&i.pinch&&this.fire("zoom",i):((s||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return fe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){It(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[J(this._container)]=this;var t=e?dt:F;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),O.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){fe(this._resizeRequest),this._resizeRequest=qt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var i=[],n,s=t==="mouseout"||t==="mouseover",o=e.target||e.srcElement,r=!1;o;){if(n=this._targets[J(o)],n&&(t==="click"||t==="preclick")&&this._draggableMoved(n)){r=!0;break}if(n&&n.listens(t,!0)&&(s&&!xc(o,e)||(i.push(n),s))||o===this._container)break;o=o.parentNode}return!i.length&&!r&&!s&&this.listens(t,!0)&&(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(t))){var i=e.type;i==="mousedown"&&yc(t),this._fireDOMEvent(e,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if(e.type==="click"){var n=rt({},e);n.type="preclick",this._fireDOMEvent(n,n.type,i)}var s=this._findEventTargets(e,t);if(i){for(var o=[],r=0;r<i.length;r++)i[r].listens(t,!0)&&o.push(i[r]);s=o.concat(s)}if(!!s.length){t==="contextmenu"&&Ht(e);var a=s[0],l={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var c=a.getLatLng&&(!a._radius||a._radius<=10);l.containerPoint=c?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(e),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=c?a.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(r=0;r<s.length;r++)if(s[r].fire(t,l,!0),l.originalEvent._stopped||s[r].options.bubblingMouseEvents===!1&&oc(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Ji(this._mapPane)||new N(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var i=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(n)},_latLngBoundsToNewLayerBounds:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return Yt([this.project(e.getSouthWest(),t)._subtract(n),this.project(e.getNorthWest(),t)._subtract(n),this.project(e.getSouthEast(),t)._subtract(n),this.project(e.getNorthEast(),t)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var n=this.project(e,t),s=this.getSize().divideBy(2),o=new Tt(n.subtract(s),n.add(s)),r=this._getBoundsOffset(o,i,t);return r.round().equals([0,0])?e:this.unproject(n.add(r),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),n=new Tt(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(n,t))},_getBoundsOffset:function(e,t,i){var n=Yt(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),s=n.min.subtract(e.min),o=n.max.subtract(e.max),r=this._rebound(s.x,-o.x),a=this._rebound(s.y,-o.y);return new N(r,a)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),n=O.any3d?this.options.zoomSnap:1;return n&&(e=Math.round(e/n)*n),Math.max(t,Math.min(i,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){kt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,t),!0)},_createAnimProxy:function(){var e=this._proxy=K("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var i=fc,n=this._proxy.style[i];Ki(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Ki(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),s=this._getCenterOffset(e)._divideBy(1-1/n);return i.animate!==!0&&!this.getSize().contains(s)?!1:(qt(function(){this._moveStart(!0,!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,i,n){!this._mapPane||(i&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,Z(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:n}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(pt(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&kt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fb(e,t){return new U(e,t)}var se=li.extend({options:{position:"topright"},initialize:function(e){gt(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),n=e._controlCorners[i];return Z(t,"leaflet-control"),i.indexOf("bottom")!==-1?n.insertBefore(t,n.firstChild):n.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),go=function(e){return new se(e)};U.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",i=this._controlContainer=K("div",t+"control-container",this._container);function n(s,o){var r=t+s+" "+t+o;e[s+o]=K("div",r,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)wt(this._controlCorners[e]);wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Uf=se.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,i,n){return i<n?-1:n<i?1:0}},initialize:function(e,t,i){gt(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return se.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(J(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){Z(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(Z(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):kt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return kt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=K("div",e),i=this.options.collapsed;t.setAttribute("aria-haspopup",!0),po(t),bc(t);var n=this._section=K("section",e+"-list");i&&(this._map.on("click",this.collapse,this),F(t,{mouseenter:function(){F(n,"click",Ht),this.expand(),setTimeout(function(){dt(n,"click",Ht)})},mouseleave:this.collapse},this));var s=this._layersLink=K("a",e+"-toggle",t);s.href="#",s.title="Layers",s.setAttribute("role","button"),F(s,"click",Ht),F(s,"focus",this.expand,this),i||this.expand(),this._baseLayersList=K("div",e+"-base",n),this._separator=K("div",e+"-separator",n),this._overlaysList=K("div",e+"-overlays",n),t.appendChild(n)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&J(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,i){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:i}),this.options.sortLayers&&this._layers.sort(pt(function(n,s){return this.options.sortFunction(n.layer,s.layer,n.name,s.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Sr(this._baseLayersList),Sr(this._overlaysList),this._layerControlInputs=[];var e,t,i,n,s=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),t=t||n.overlay,e=e||!n.overlay,s+=n.overlay?0:1;return this.options.hideSingleBase&&(e=e&&s>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(J(e.target)),i=t.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;i&&this._map.fire(i,t)},_createRadioElement:function(e,t){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(e){var t=document.createElement("label"),i=this._map.hasLayer(e.layer),n;e.overlay?(n=document.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=i):n=this._createRadioElement("leaflet-base-layers_"+J(this),i),this._layerControlInputs.push(n),n.layerId=J(e.layer),F(n,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+e.name;var o=document.createElement("span");t.appendChild(o),o.appendChild(n),o.appendChild(s);var r=e.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){var e=this._layerControlInputs,t,i,n=[],s=[];this._handlingClick=!0;for(var o=e.length-1;o>=0;o--)t=e[o],i=this._getLayer(t.layerId).layer,t.checked?n.push(i):t.checked||s.push(i);for(o=0;o<s.length;o++)this._map.hasLayer(s[o])&&this._map.removeLayer(s[o]);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])||this._map.addLayer(n[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,i,n=this._map.getZoom(),s=e.length-1;s>=0;s--)t=e[s],i=this._getLayer(t.layerId).layer,t.disabled=i.options.minZoom!==void 0&&n<i.options.minZoom||i.options.maxZoom!==void 0&&n>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),mb=function(e,t,i){return new Uf(e,t,i)},wc=se.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=K("div",t+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,t+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,t+"-out",i,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,i,n,s){var o=K("a",i,n);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),po(o),F(o,"click",Qi),F(o,"click",s,this),F(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";kt(this._zoomInButton,t),kt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(Z(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(Z(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});U.mergeOptions({zoomControl:!0});U.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wc,this.addControl(this.zoomControl))});var pb=function(e){return new wc(e)},Yf=se.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",i=K("div",t),n=this.options;return this._addScales(n,t+"-line",i),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=K("div",t,i)),e.imperial&&(this._iScale=K("div",t,i))},_update:function(){var e=this._map,t=e.getSize().y/2,i=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),i=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/e)},_updateImperial:function(e){var t=e*3.2808399,i,n,s;t>5280?(i=t/5280,n=this._getRoundNum(i),this._updateScale(this._iScale,n+" mi",n/i)):(s=this._getRoundNum(t),this._updateScale(this._iScale,s+" ft",s/t))},_updateScale:function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,t*i}}),gb=function(e){return new Yf(e)},_b='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Tc=se.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(O.inlineSvg?_b+" ":"")+"Leaflet</a>"},initialize:function(e){gt(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=K("div","leaflet-control-attribution"),po(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(!!this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});U.mergeOptions({attributionControl:!0});U.addInitHook(function(){this.options.attributionControl&&new Tc().addTo(this)});var yb=function(e){return new Tc(e)};se.Layers=Uf;se.Zoom=wc;se.Scale=Yf;se.Attribution=Tc;go.layers=mb;go.zoom=pb;go.scale=gb;go.attribution=yb;var Ve=li.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ve.addTo=function(e,t){return e.addHandler(t,this),this};var vb={Events:ne},uf=O.touch?"touchstart mousedown":"mousedown",Pi=uo.extend({options:{clickTolerance:3},initialize:function(e,t,i,n){gt(this,n),this._element=e,this._dragStartTarget=t||e,this._preventOutline=i},enable:function(){this._enabled||(F(this._dragStartTarget,uf,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Pi._dragging===this&&this.finishDrag(!0),dt(this._dragStartTarget,uf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!!this._enabled&&(this._moved=!1,!mc(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Pi._dragging===this&&this.finishDrag();return}if(!(Pi._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Pi._dragging=this,this._preventOutline&&yc(this._element),gc(),co(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,i=Wf(this._element);this._startPoint=new N(t.clientX,t.clientY),this._startPos=Ji(this._element),this._parentScale=vc(i);var n=e.type==="mousedown";F(document,n?"mousemove":"touchmove",this._onMove,this),F(document,n?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(!!this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,i=new N(t.clientX,t.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ht(e),this._moved||(this.fire("dragstart"),this._moved=!0,Z(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Z(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),It(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(e){kt(document.body,"leaflet-dragging"),this._lastTarget&&(kt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),dt(document,"mousemove touchmove",this._onMove,this),dt(document,"mouseup touchend touchcancel",this._onUp,this),_c(),ho(),this._moved&&this._moving&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Pi._dragging=!1}});function qf(e,t){if(!t||!e.length)return e.slice();var i=t*t;return e=wb(e,i),e=xb(e,i),e}function Gf(e,t,i){return Math.sqrt(_o(e,t,i,!0))}function bb(e,t,i){return _o(e,t,i)}function xb(e,t){var i=e.length,n=typeof Uint8Array!=void 0+""?Uint8Array:Array,s=new n(i);s[0]=s[i-1]=1,ic(e,s,t,0,i-1);var o,r=[];for(o=0;o<i;o++)s[o]&&r.push(e[o]);return r}function ic(e,t,i,n,s){var o=0,r,a,l;for(a=n+1;a<=s-1;a++)l=_o(e[a],e[n],e[s],!0),l>o&&(r=a,o=l);o>i&&(t[r]=1,ic(e,t,i,n,r),ic(e,t,i,r,s))}function wb(e,t){for(var i=[e[0]],n=1,s=0,o=e.length;n<o;n++)Tb(e[n],e[s])>t&&(i.push(e[n]),s=n);return s<o-1&&i.push(e[o-1]),i}var df;function Xf(e,t,i,n,s){var o=n?df:Gi(e,i),r=Gi(t,i),a,l,c;for(df=r;;){if(!(o|r))return[e,t];if(o&r)return!1;a=o||r,l=kr(e,t,a,i,s),c=Gi(l,i),a===o?(e=l,o=c):(t=l,r=c)}}function kr(e,t,i,n,s){var o=t.x-e.x,r=t.y-e.y,a=n.min,l=n.max,c,h;return i&8?(c=e.x+o*(l.y-e.y)/r,h=l.y):i&4?(c=e.x+o*(a.y-e.y)/r,h=a.y):i&2?(c=l.x,h=e.y+r*(l.x-e.x)/o):i&1&&(c=a.x,h=e.y+r*(a.x-e.x)/o),new N(c,h,s)}function Gi(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i}function Tb(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function _o(e,t,i,n){var s=t.x,o=t.y,r=i.x-s,a=i.y-o,l=r*r+a*a,c;return l>0&&(c=((e.x-s)*r+(e.y-o)*a)/l,c>1?(s=i.x,o=i.y):c>0&&(s+=r*c,o+=a*c)),r=e.x-s,a=e.y-o,n?r*r+a*a:new N(s,o)}function me(e){return!Te(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]!="undefined"}function Kf(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),me(e)}function Jf(e,t){var i,n,s,o,r,a,l,c;if(!e||e.length===0)throw new Error("latlngs not passed");me(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var h=[];for(var u in e)h.push(t.project(ut(e[u])));var f=h.length;for(i=0,n=0;i<f-1;i++)n+=h[i].distanceTo(h[i+1])/2;if(n===0)c=h[0];else for(i=0,o=0;i<f-1;i++)if(r=h[i],a=h[i+1],s=r.distanceTo(a),o+=s,o>n){l=(o-n)/s,c=[a.x-l*(a.x-r.x),a.y-l*(a.y-r.y)];break}return t.unproject(z(c))}var Mb={__proto__:null,simplify:qf,pointToSegmentDistance:Gf,closestPointOnSegment:bb,clipSegment:Xf,_getEdgeIntersection:kr,_getBitCode:Gi,_sqClosestPointOnSegment:_o,isFlat:me,_flat:Kf,polylineCenter:Jf};function Qf(e,t,i){var n,s=[1,4,2,8],o,r,a,l,c,h,u,f;for(o=0,h=e.length;o<h;o++)e[o]._code=Gi(e[o],t);for(a=0;a<4;a++){for(u=s[a],n=[],o=0,h=e.length,r=h-1;o<h;r=o++)l=e[o],c=e[r],l._code&u?c._code&u||(f=kr(c,l,u,t,i),f._code=Gi(f,t),n.push(f)):(c._code&u&&(f=kr(c,l,u,t,i),f._code=Gi(f,t),n.push(f)),n.push(l));e=n}return e}function tm(e,t){var i,n,s,o,r,a,l,c,h;if(!e||e.length===0)throw new Error("latlngs not passed");me(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=[];for(var f in e)u.push(t.project(ut(e[f])));var m=u.length;for(a=l=c=0,i=0,n=m-1;i<m;n=i++)s=u[i],o=u[n],r=s.y*o.x-o.y*s.x,l+=(s.x+o.x)*r,c+=(s.y+o.y)*r,a+=r*3;return a===0?h=u[0]:h=[l/a,c/a],t.unproject(z(h))}var Sb={__proto__:null,clipPolygon:Qf,polygonCenter:tm},Mc={project:function(e){return new N(e.lng,e.lat)},unproject:function(e){return new tt(e.y,e.x)},bounds:new Tt([-180,-90],[180,90])},nc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Tt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var t=Math.PI/180,i=this.R,n=e.lat*t,s=this.R_MINOR/i,o=Math.sqrt(1-s*s),r=o*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),o/2);return n=-i*Math.log(Math.max(a,1e-10)),new N(e.lng*t*i,n)},unproject:function(e){for(var t=180/Math.PI,i=this.R,n=this.R_MINOR/i,s=Math.sqrt(1-n*n),o=Math.exp(-e.y/i),r=Math.PI/2-2*Math.atan(o),a=0,l=.1,c;a<15&&Math.abs(l)>1e-7;a++)c=s*Math.sin(r),c=Math.pow((1-c)/(1+c),s/2),l=Math.PI/2-2*Math.atan(o*c)-r,r+=l;return new tt(r*t,e.x*t/i)}},Lb={__proto__:null,LonLat:Mc,Mercator:nc,SphericalMercator:Xl},kb=rt({},Oi,{code:"EPSG:3395",projection:nc,transformation:function(){var e=.5/(Math.PI*nc.R);return fo(e,.5,-e,.5)}()}),em=rt({},Oi,{code:"EPSG:4326",projection:Mc,transformation:fo(1/180,1,-1/180,.5)}),Pb=rt({},ci,{projection:Mc,transformation:fo(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var i=t.lng-e.lng,n=t.lat-e.lat;return Math.sqrt(i*i+n*n)},infinite:!0});ci.Earth=Oi;ci.EPSG3395=kb;ci.EPSG3857=ac;ci.EPSG900913=F0;ci.EPSG4326=em;ci.Simple=Pb;var Se=uo.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[J(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[J(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(!!t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var i=this.getEvents();t.on(i,this),this.once("remove",function(){t.off(i,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});U.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=J(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=J(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return J(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},_addLayers:function(e){e=e?Te(e)?e:[e]:[];for(var t=0,i=e.length;t<i;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[J(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=J(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var s=this._zoomBoundLayers[n].options;e=s.minZoom===void 0?e:Math.min(e,s.minZoom),t=s.maxZoom===void 0?t:Math.max(t,s.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vn=Se.extend({initialize:function(e,t){gt(this,t),this._layers={};var i,n;if(e)for(i=0,n=e.length;i<n;i++)this.addLayer(e[i])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){var t=typeof e=="number"?e:this.getLayerId(e);return t in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),i,n;for(i in this._layers)n=this._layers[i],n[e]&&n[e].apply(n,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return J(e)}}),Eb=function(e,t){return new Vn(e,t)},Xi=Vn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Vn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Vn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new Gt;for(var t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}}),Ob=function(e,t){return new Xi(e,t)},jn=li.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){gt(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,t&&t.tagName==="IMG"?t:null);return this._setIconStyles(n,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),n},_setIconStyles:function(e,t){var i=this.options,n=i[t+"Size"];typeof n=="number"&&(n=[n,n]);var s=z(n),o=z(t==="shadow"&&i.shadowAnchor||i.iconAnchor||s&&s.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(i.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),s&&(e.style.width=s.x+"px",e.style.height=s.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return O.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Sc(e){return new jn(e)}var oo=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof oo.imagePath!="string"&&(oo.imagePath=this._detectIconPath()),(this.options.imagePath||oo.imagePath)+jn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(i,n,s){var o=n.exec(i);return o&&o[s]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=K("div","leaflet-default-icon-path",document.body),t=lo(e,"background-image")||lo(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),ff=Ve.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Pi(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Z(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&kt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,i=t._map,n=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,o=Ji(t._icon),r=i.getPixelBounds(),a=i.getPixelOrigin(),l=Yt(r.min._subtract(a).add(s),r.max._subtract(a).subtract(s));if(!l.contains(o)){var c=z((Math.max(l.max.x,o.x)-l.max.x)/(r.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(r.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(r.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(r.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),It(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=qt(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(fe(this._panRequest),this._panRequest=qt(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,i=t._shadow,n=Ji(t._icon),s=t._map.layerPointToLatLng(n);i&&It(i,n),t._latlng=s,e.latlng=s,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){fe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Xn=Se.extend({options:{icon:new oo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){gt(this,t),this._latlng=ut(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=ut(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,e.title&&(i.title=e.title),i.tagName==="IMG"&&(i.alt=e.alt||"")),Z(i,t),e.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&F(i,"focus",this._panOnFocus,this);var s=e.icon.createShadow(this._shadow),o=!1;s!==this._shadow&&(this._removeShadow(),o=!0),s&&(Z(s,t),s.alt=""),this._shadow=s,e.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&o&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&dt(this._icon,"focus",this._panOnFocus,this),wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&It(this._icon,e),this._shadow&&It(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(!!this.options.interactive&&(Z(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ff)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ff(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&de(this._icon,e),this._shadow&&de(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(!!e){var t=this.options.icon.options,i=t.iconSize?z(t.iconSize):z(0,0),n=t.iconAnchor?z(t.iconAnchor):z(0,0);e.panInside(this._latlng,{paddingTopLeft:n,paddingBottomRight:i.subtract(n)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Cb(e,t){return new Xn(e,t)}var Ci=Se.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return gt(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Dr=Ci.extend({options:{fill:!0,radius:10},initialize:function(e,t){gt(this,t),this._latlng=ut(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=ut(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Ci.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),n=[e+i,t+i];this._pxBounds=new Tt(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ib(e,t){return new Dr(e,t)}var Lc=Dr.extend({initialize:function(e,t,i){if(typeof t=="number"&&(t=rt({},i,{radius:t})),gt(this,t),this._latlng=ut(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new Gt(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Ci.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===Oi.distance){var s=Math.PI/180,o=this._mRadius/Oi.R/s,r=i.project([t+o,e]),a=i.project([t-o,e]),l=r.add(a).divideBy(2),c=i.unproject(l).lat,h=Math.acos((Math.cos(o*s)-Math.sin(t*s)*Math.sin(c*s))/(Math.cos(t*s)*Math.cos(c*s)))/s;(isNaN(h)||h===0)&&(h=o/Math.cos(Math.PI/180*t)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(h)?0:l.x-i.project([c,e-h]).x,this._radiusY=l.y-r.y}else{var u=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(u).x}this._updateBounds()}});function Db(e,t,i){return new Lc(e,t,i)}var ai=Ci.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){gt(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,i=null,n=_o,s,o,r=0,a=this._parts.length;r<a;r++)for(var l=this._parts[r],c=1,h=l.length;c<h;c++){s=l[c-1],o=l[c];var u=n(e,s,o,!0);u<t&&(t=u,i=n(e,s,o))}return i&&(i.distance=Math.sqrt(t)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jf(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=ut(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new Gt,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return me(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],i=me(e),n=0,s=e.length;n<s;n++)i?(t[n]=ut(e[n]),this._bounds.extend(t[n])):t[n]=this._convertLatLngs(e[n]);return t},_project:function(){var e=new Tt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new N(e,e);!this._rawPxBounds||(this._pxBounds=new Tt([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,i){var n=e[0]instanceof tt,s=e.length,o,r;if(n){for(r=[],o=0;o<s;o++)r[o]=this._map.latLngToLayerPoint(e[o]),i.extend(r[o]);t.push(r)}else for(o=0;o<s;o++)this._projectLatlngs(e[o],t,i)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,i,n,s,o,r,a,l;for(i=0,s=0,o=this._rings.length;i<o;i++)for(l=this._rings[i],n=0,r=l.length;n<r-1;n++)a=Xf(l[n],l[n+1],e,n,!0),a&&(t[s]=t[s]||[],t[s].push(a[0]),(a[1]!==l[n+1]||n===r-2)&&(t[s].push(a[1]),s++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,i=0,n=e.length;i<n;i++)e[i]=qf(e[i],t)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var i,n,s,o,r,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,o=this._parts.length;i<o;i++)for(a=this._parts[i],n=0,r=a.length,s=r-1;n<r;s=n++)if(!(!t&&n===0)&&Gf(e,a[s],a[n])<=l)return!0;return!1}});function Ab(e,t){return new ai(e,t)}ai._flat=Kf;var Un=ai.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tm(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=ai.prototype._convertLatLngs.call(this,e),i=t.length;return i>=2&&t[0]instanceof tt&&t[0].equals(t[i-1])&&t.pop(),t},_setLatLngs:function(e){ai.prototype._setLatLngs.call(this,e),me(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return me(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,i=new N(t,t);if(e=new Tt(e.min.subtract(i),e.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var n=0,s=this._rings.length,o;n<s;n++)o=Qf(this._rings[n],e,!0),o.length&&this._parts.push(o)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,i,n,s,o,r,a,l,c;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(o=0,l=this._parts.length;o<l;o++)for(i=this._parts[o],r=0,c=i.length,a=c-1;r<c;a=r++)n=i[r],s=i[a],n.y>e.y!=s.y>e.y&&e.x<(s.x-n.x)*(e.y-n.y)/(s.y-n.y)+n.x&&(t=!t);return t||ai.prototype._containsPoint.call(this,e,!0)}});function zb(e,t){return new Un(e,t)}var ui=Xi.extend({initialize:function(e,t){gt(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=Te(e)?e:e.features,i,n,s;if(t){for(i=0,n=t.length;i<n;i++)s=t[i],(s.geometries||s.geometry||s.features||s.coordinates)&&this.addData(s);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var r=Pr(e,o);return r?(r.feature=zr(e),r.defaultOptions=r.options,this.resetStyle(r),o.onEachFeature&&o.onEachFeature(e,r),this.addLayer(r)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=rt({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t=="function"&&(t=t(e.feature)),e.setStyle(t))}});function Pr(e,t){var i=e.type==="Feature"?e.geometry:e,n=i?i.coordinates:null,s=[],o=t&&t.pointToLayer,r=t&&t.coordsToLatLng||kc,a,l,c,h;if(!n&&!i)return null;switch(i.type){case"Point":return a=r(n),mf(o,e,a,t);case"MultiPoint":for(c=0,h=n.length;c<h;c++)a=r(n[c]),s.push(mf(o,e,a,t));return new Xi(s);case"LineString":case"MultiLineString":return l=Er(n,i.type==="LineString"?0:1,r),new ai(l,t);case"Polygon":case"MultiPolygon":return l=Er(n,i.type==="Polygon"?1:2,r),new Un(l,t);case"GeometryCollection":for(c=0,h=i.geometries.length;c<h;c++){var u=Pr({geometry:i.geometries[c],type:"Feature",properties:e.properties},t);u&&s.push(u)}return new Xi(s);case"FeatureCollection":for(c=0,h=i.features.length;c<h;c++){var f=Pr(i.features[c],t);f&&s.push(f)}return new Xi(s);default:throw new Error("Invalid GeoJSON object.")}}function mf(e,t,i,n){return e?e(t,i):new Xn(i,n&&n.markersInheritOptions&&n)}function kc(e){return new tt(e[1],e[0],e[2])}function Er(e,t,i){for(var n=[],s=0,o=e.length,r;s<o;s++)r=t?Er(e[s],t-1,i):(i||kc)(e[s]),n.push(r);return n}function Pc(e,t){return e=ut(e),e.alt!==void 0?[Be(e.lng,t),Be(e.lat,t),Be(e.alt,t)]:[Be(e.lng,t),Be(e.lat,t)]}function Ar(e,t,i,n){for(var s=[],o=0,r=e.length;o<r;o++)s.push(t?Ar(e[o],me(e[o])?0:t-1,i,n):Pc(e[o],n));return!t&&i&&s.push(s[0]),s}function Yn(e,t){return e.feature?rt({},e.feature,{geometry:t}):zr(t)}function zr(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var Ec={toGeoJSON:function(e){return Yn(this,{type:"Point",coordinates:Pc(this.getLatLng(),e)})}};Xn.include(Ec);Lc.include(Ec);Dr.include(Ec);ai.include({toGeoJSON:function(e){var t=!me(this._latlngs),i=Ar(this._latlngs,t?1:0,!1,e);return Yn(this,{type:(t?"Multi":"")+"LineString",coordinates:i})}});Un.include({toGeoJSON:function(e){var t=!me(this._latlngs),i=t&&!me(this._latlngs[0]),n=Ar(this._latlngs,i?2:t?1:0,!0,e);return t||(n=[n]),Yn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}});Vn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(i){t.push(i.toGeoJSON(e).geometry.coordinates)}),Yn(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint")return this.toMultiPoint(e);var i=t==="GeometryCollection",n=[];return this.eachLayer(function(s){if(s.toGeoJSON){var o=s.toGeoJSON(e);if(i)n.push(o.geometry);else{var r=zr(o);r.type==="FeatureCollection"?n.push.apply(n,r.features):n.push(r)}}}),i?Yn(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});function im(e,t){return new ui(e,t)}var Fb=im,Fr=Se.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,i){this._url=e,this._bounds=Rt(t),gt(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Z(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&qn(this._image),this},bringToBack:function(){return this._map&&Gn(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=Rt(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",t=this._image=e?this._url:K("img");if(Z(t,"leaflet-image-layer"),this._zoomAnimated&&Z(t,"leaflet-zoom-animated"),this.options.className&&Z(t,this.options.className),t.onselectstart=Ct,t.onmousemove=Ct,t.onload=pt(this.fire,this,"load"),t.onerror=pt(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(t.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Ki(this._image,i,t)},_reset:function(){var e=this._image,t=new Tt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();It(e,t.min),e.style.width=i.x+"px",e.style.height=i.y+"px"},_updateOpacity:function(){de(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Rb=function(e,t,i){return new Fr(e,t,i)},nm=Fr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",t=this._image=e?this._url:K("video");if(Z(t,"leaflet-image-layer"),this._zoomAnimated&&Z(t,"leaflet-zoom-animated"),this.options.className&&Z(t,this.options.className),t.onselectstart=Ct,t.onmousemove=Ct,t.onloadeddata=pt(this.fire,this,"load"),e){for(var i=t.getElementsByTagName("source"),n=[],s=0;s<i.length;s++)n.push(i[s].src);this._url=i.length>0?n:[t.src];return}Te(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var r=K("source");r.src=this._url[o],t.appendChild(r)}}});function Nb(e,t,i){return new nm(e,t,i)}var sm=Fr.extend({_initImage:function(){var e=this._image=this._url;Z(e,"leaflet-image-layer"),this._zoomAnimated&&Z(e,"leaflet-zoom-animated"),this.options.className&&Z(e,this.options.className),e.onselectstart=Ct,e.onmousemove=Ct}});function Bb(e,t,i){return new sm(e,t,i)}var We=Se.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof L.LatLng||Te(e))?(this._latlng=ut(e),gt(this,t)):(gt(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&de(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&de(this._container,1),this.bringToFront(),this.options.interactive&&(Z(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(de(this._container,0),this._removeTimeout=setTimeout(pt(wt,void 0,this._container),200)):wt(this._container),this.options.interactive&&(kt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=ut(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&qn(this._container),this},bringToBack:function(){return this._map&&Gn(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Xi){t=null;var i=this._source._layers;for(var n in i)if(i[n]._map){t=i[n];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var e=this._contentNode,t=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof t=="string")e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=z(this.options.offset),i=this._getAnchor();this._zoomAnimated?It(this._container,e.add(i)):t=t.add(e).add(i);var n=this._containerBottom=-t.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=n+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}});U.include({_initOverlay:function(e,t,i,n){var s=t;return s instanceof e||(s=new e(n).setContent(t)),i&&s.setLatLng(i),s}});Se.include({_initOverlay:function(e,t,i,n){var s=i;return s instanceof e?(gt(s,n),s._source=this):(s=t&&!n?t:new e(n,this),s.setContent(i)),s}});var Rr=We.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,We.prototype.openOn.call(this,e)},onAdd:function(e){We.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ci||this._source.on("preclick",qi))},onRemove:function(e){We.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ci||this._source.off("preclick",qi))},getEvents:function(){var e=We.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=K("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=K("div",e+"-content-wrapper",t);if(this._contentNode=K("div",e+"-content",i),po(t),bc(this._contentNode),F(t,"contextmenu",qi),this._tipContainer=K("div",e+"-tip-container",t),this._tip=K("div",e+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=K("a",e+"-close-button",t);n.setAttribute("role","button"),n.setAttribute("aria-label","Close popup"),n.href="#close",n.innerHTML='<span aria-hidden="true">&#215;</span>',F(n,"click",function(s){Ht(s),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var n=e.offsetHeight,s=this.options.maxHeight,o="leaflet-popup-scrolled";s&&n>s?(t.height=s+"px",Z(e,o)):kt(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),i=this._getAnchor();It(this._container,t.add(i))},_adjustPan:function(e){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,i=parseInt(lo(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+i,s=this._containerWidth,o=new N(this._containerLeft,-n-this._containerBottom);o._add(Ji(this._container));var r=t.layerPointToContainerPoint(o),a=z(this.options.autoPanPadding),l=z(this.options.autoPanPaddingTopLeft||a),c=z(this.options.autoPanPaddingBottomRight||a),h=t.getSize(),u=0,f=0;r.x+s+c.x>h.x&&(u=r.x+s-h.x+c.x),r.x-u-l.x<0&&(u=r.x-l.x),r.y+n+c.y>h.y&&(f=r.y+n-h.y+c.y),r.y-f-l.y<0&&(f=r.y-l.y),(u||f)&&t.fire("autopanstart").panBy([u,f],{animate:e&&e.type==="moveend"})}},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Hb=function(e,t){return new Rr(e,t)};U.mergeOptions({closePopupOnClick:!0});U.include({openPopup:function(e,t,i){return this._initOverlay(Rr,e,t,i).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}});Se.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Rr,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&this._popup._prepareOpen(e)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){Qi(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof Ci)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var Nr=We.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){We.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){We.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=We.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=K("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+J(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,i,n=this._map,s=this._container,o=n.latLngToContainerPoint(n.getCenter()),r=n.layerPointToContainerPoint(e),a=this.options.direction,l=s.offsetWidth,c=s.offsetHeight,h=z(this.options.offset),u=this._getAnchor();a==="top"?(t=l/2,i=c):a==="bottom"?(t=l/2,i=0):a==="center"?(t=l/2,i=c/2):a==="right"?(t=0,i=c/2):a==="left"?(t=l,i=c/2):r.x<o.x?(a="right",t=0,i=c/2):(a="left",t=l+(h.x+u.x)*2,i=c/2),e=e.subtract(z(t,i,!0)).add(h).add(u),kt(s,"leaflet-tooltip-right"),kt(s,"leaflet-tooltip-left"),kt(s,"leaflet-tooltip-top"),kt(s,"leaflet-tooltip-bottom"),Z(s,"leaflet-tooltip-"+a),It(s,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&de(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Wb=function(e,t){return new Nr(e,t)};U.include({openTooltip:function(e,t,i){return this._initOverlay(Nr,e,t,i).openOn(this),this},closeTooltip:function(e){return e.close(),this}});Se.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Nr,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[t](i),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){F(e.getElement(),"focus",function(){this._tooltip._source=e,this.openTooltip()},this),F(e.getElement(),"blur",this.closeTooltip,this)},_setAriaDescribedByOnLayer:function(e){e.getElement().setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0))},_moveTooltip:function(e){var t=e.latlng,i,n;this._tooltip.options.sticky&&e.originalEvent&&(i=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(i),t=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(t)}});var om=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&e.tagName==="DIV"?e:document.createElement("div"),i=this.options;if(i.html instanceof Element?(Sr(t),t.appendChild(i.html)):t.innerHTML=i.html!==!1?i.html:"",i.bgPos){var n=z(i.bgPos);t.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Zb(e){return new om(e)}jn.Default=oo;var ro=Se.extend({options:{tileSize:256,opacity:1,updateWhenIdle:O.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){gt(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),wt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(qn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Gn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=gf(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof N?e:new N(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,i=-e(-1/0,1/0),n=0,s=t.length,o;n<s;n++)o=t[n].style.zIndex,t[n]!==this._container&&o&&(i=e(i,+o));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!O.ielt9){de(this._container,this.options.opacity);var e=+new Date,t=!1,i=!1;for(var n in this._tiles){var s=this._tiles[n];if(!(!s.current||!s.loaded)){var o=Math.min(1,(e-s.loaded)/200);de(s.el,o),o<1?t=!0:(s.active?i=!0:this._onOpaqueTile(s),s.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),t&&(fe(this._fadeFrame),this._fadeFrame=qt(this._updateOpacity,this))}},_onOpaqueTile:Ct,_initContainer:function(){this._container||(this._container=K("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===e?(this._levels[i].el.style.zIndex=t-Math.abs(e-i),this._onUpdateLevel(i)):(wt(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[e],s=this._map;return n||(n=this._levels[e]={},n.el=K("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=t,n.origin=s.project(s.unproject(s.getPixelOrigin()),e).round(),n.zoom=e,this._setZoomTransform(n,s.getCenter(),s.getZoom()),Ct(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:Ct,_onRemoveLevel:Ct,_onCreateLevel:Ct,_pruneTiles:function(){if(!!this._map){var e,t,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var n=t.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)wt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,i,n){var s=Math.floor(e/2),o=Math.floor(t/2),r=i-1,a=new N(+s,+o);a.z=+r;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),r>n?this._retainParent(s,o,r,n):!1)},_retainChildren:function(e,t,i,n){for(var s=2*e;s<2*e+2;s++)for(var o=2*t;o<2*t+2;o++){var r=new N(s,o);r.z=i+1;var a=this._tileCoordsToKey(r),l=this._tiles[a];if(l&&l.active){l.retain=!0;continue}else l&&l.loaded&&(l.retain=!0);i+1<n&&this._retainChildren(s,o,i+1,n)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,i,n){var s=Math.round(t);this.options.maxZoom!==void 0&&s>this.options.maxZoom||this.options.minZoom!==void 0&&s<this.options.minZoom?s=void 0:s=this._clampZoom(s);var o=this.options.updateWhenZooming&&s!==this._tileZoom;(!n||o)&&(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),s!==void 0&&this._update(e),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],e,t)},_setZoomTransform:function(e,t,i){var n=this._map.getZoomScale(i,e.zoom),s=e.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(t,i)).round();O.any3d?Ki(e.el,s,n):It(e.el,s)},_resetGrid:function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,s=this._map.getPixelWorldBounds(this._tileZoom);s&&(this._globalTileRange=this._pxBoundsToTileRange(s)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],n).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],n).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],n).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),n=t.getZoomScale(i,this._tileZoom),s=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(n*2);return new Tt(s.subtract(o),s.add(o))},_update:function(e){var t=this._map;if(!!t){var i=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var n=this._getTiledPixelBounds(e),s=this._pxBoundsToTileRange(n),o=s.getCenter(),r=[],a=this.options.keepBuffer,l=new Tt(s.getBottomLeft().subtract([a,-a]),s.getTopRight().add([a,-a]));if(!(isFinite(s.min.x)&&isFinite(s.min.y)&&isFinite(s.max.x)&&isFinite(s.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var h=this._tiles[c].coords;(h.z!==this._tileZoom||!l.contains(new N(h.x,h.y)))&&(this._tiles[c].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(e,i);return}for(var u=s.min.y;u<=s.max.y;u++)for(var f=s.min.x;f<=s.max.x;f++){var m=new N(f,u);if(m.z=this._tileZoom,!!this._isValidTile(m)){var d=this._tiles[this._tileCoordsToKey(m)];d?d.current=!0:r.push(m)}}if(r.sort(function(g,_){return g.distanceTo(o)-_.distanceTo(o)}),r.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var p=document.createDocumentFragment();for(f=0;f<r.length;f++)this._addTile(r[f],p);this._level.el.appendChild(p)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(e);return Rt(this.options.bounds).overlaps(n)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,i=this.getTileSize(),n=e.scaleBy(i),s=n.add(i),o=t.unproject(n,e.z),r=t.unproject(s,e.z);return[o,r]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),i=new Gt(t[0],t[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),i=new N(+t[0],+t[1]);return i.z=+t[2],i},_removeTile:function(e){var t=this._tiles[e];!t||(wt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){Z(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=Ct,e.onmousemove=Ct,O.ielt9&&this.options.opacity<1&&de(e,this.options.opacity)},_addTile:function(e,t){var i=this._getTilePos(e),n=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),pt(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&qt(pt(this._tileReady,this,e,null,s)),It(s,i),this._tiles[n]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,i){t&&this.fire("tileerror",{error:t,tile:i,coords:e});var n=this._tileCoordsToKey(e);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(de(i.el,0),fe(this._fadeFrame),this._fadeFrame=qt(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),t||(Z(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),O.ielt9||!this._map._fadeAnimated?qt(this._pruneTiles,this):setTimeout(pt(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new N(this._wrapX?ao(e.x,this._wrapX):e.x,this._wrapY?ao(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new Tt(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Vb(e){return new ro(e)}var Ei=ro.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=gt(this,t),t.detectRetina&&O.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains=="string"&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var i=document.createElement("img");return F(i,"load",pt(this._tileOnLoad,this,t,i)),F(i,"error",pt(this._tileOnError,this,t,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(e),i},getTileUrl:function(e){var t={r:O.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return yf(this._url,rt(t,this.options))},_tileOnLoad:function(e,t){O.ielt9?setTimeout(pt(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,i){var n=this.options.errorTileUrl;n&&t.getAttribute("src")!==n&&(t.src=n),e(i,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;return i&&(e=t-e),e+n},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=Ct,t.onerror=Ct,!t.complete)){t.src=br;var i=this._tiles[e].coords;wt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:i})}},_removeTile:function(e){var t=this._tiles[e];if(!!t)return t.el.setAttribute("src",br),ro.prototype._removeTile.call(this,e)},_tileReady:function(e,t,i){if(!(!this._map||i&&i.getAttribute("src")===br))return ro.prototype._tileReady.call(this,e,t,i)}});function Br(e,t){return new Ei(e,t)}var rm=Ei.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=rt({},this.defaultWmsParams);for(var n in t)n in this.options||(i[n]=t[n]);t=gt(this,t);var s=t.detectRetina&&O.retina?2:1,o=this.getTileSize();i.width=o.x*s,i.height=o.y*s,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Ei.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,n=Yt(i.project(t[0]),i.project(t[1])),s=n.min,o=n.max,r=(this._wmsVersion>=1.3&&this._crs===em?[s.y,s.x,o.y,o.x]:[s.x,s.y,o.x,o.y]).join(","),a=Ei.prototype.getTileUrl.call(this,e);return a+_f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(e,t){return rt(this.wmsParams,e),t||this.redraw(),this}});function $b(e,t){return new rm(e,t)}Ei.WMS=rm;Br.wms=$b;var ri=Se.extend({options:{padding:.1},initialize:function(e){gt(this,e),J(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Z(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var i=this._map.getZoomScale(t,this._zoom),n=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,t),o=n.multiplyBy(-i).add(s).subtract(this._map._getNewPixelOrigin(e,t));O.any3d?Ki(this._container,o,i):It(this._container,o)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new Tt(i,i.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),am=ri.extend({options:{tolerance:0},getEvents:function(){var e=ri.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");F(e,"mousemove",this._onMouseMove,this),F(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),F(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){fe(this._redrawRequest),delete this._ctx,wt(this._container),dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var t in this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ri.prototype._update.call(this);var e=this._bounds,t=this._container,i=e.getSize(),n=O.retina?2:1;It(t,e.min),t.width=n*i.x,t.height=n*i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",O.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[J(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,i=t.next,n=t.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete e._order,delete this._layers[J(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var t=e.options.dashArray.split(/[, ]+/),i=[],n,s;for(s=0;s<t.length;s++){if(n=Number(t[s]),isNaN(n))return;i.push(n)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){!this._map||(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||qt(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Tt,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var i=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)e=n.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(!!this._drawing){var i,n,s,o,r=e._parts,a=r.length,l=this._ctx;if(!!a){for(l.beginPath(),i=0;i<a;i++){for(n=0,s=r[i].length;n<s;n++)o=r[i][n],l[n?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,i=this._ctx,n=Math.max(Math.round(e._radius),1),s=(Math.max(Math.round(e._radiusY),1)||n)/n;s!==1&&(i.save(),i.scale(1,s)),i.beginPath(),i.arc(t.x,t.y/s,n,0,Math.PI*2,!1),s!==1&&i.restore(),this._fillStroke(i,e)}},_fillStroke:function(e,t){var i=t.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),i,n,s=this._drawFirst;s;s=s.next)i=s.layer,i.options.interactive&&i._containsPoint(t)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(i))&&(n=i);this._fireEvent(n?[n]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(kt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var i,n,s=this._drawFirst;s;s=s.next)i=s.layer,i.options.interactive&&i._containsPoint(t)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(e),n&&(Z(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseover"),this._hoveredLayer=n)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(pt(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},_bringToFront:function(e){var t=e._order;if(!!t){var i=t.next,n=t.prev;if(i)i.prev=n;else return;n?n.next=i:i&&(this._drawFirst=i),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(!!t){var i=t.next,n=t.prev;if(n)n.next=i;else return;i?i.prev=n:n&&(this._drawLast=n),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function lm(e){return O.canvas?new am(e):null}var no=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),jb={_initContainer:function(){this._container=K("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ri.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=no("shape");Z(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=no("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[J(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;wt(t),e.removeInteractiveTarget(t),delete this._layers[J(e)]},_updateStyle:function(e){var t=e._stroke,i=e._fill,n=e.options,s=e._container;s.stroked=!!n.stroke,s.filled=!!n.fill,n.stroke?(t||(t=e._stroke=no("stroke")),s.appendChild(t),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=Te(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=n.lineCap.replace("butt","flat"),t.joinstyle=n.lineJoin):t&&(s.removeChild(t),e._stroke=null),n.fill?(i||(i=e._fill=no("fill")),s.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(s.removeChild(i),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),i=Math.round(e._radius),n=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+n+" 0,"+65535*360)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){qn(e._container)},_bringToBack:function(e){Gn(e._container)}},Tr=O.vml?no:xf,yo=ri.extend({_initContainer:function(){this._container=Tr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Tr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wt(this._container),dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ri.prototype._update.call(this);var e=this._bounds,t=e.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,i.setAttribute("width",t.x),i.setAttribute("height",t.y)),It(i,e.min),i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Tr("path");e.options.className&&Z(t,e.options.className),e.options.interactive&&Z(t,"leaflet-interactive"),this._updateStyle(e),this._layers[J(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){wt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[J(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,i=e.options;!t||(i.stroke?(t.setAttribute("stroke",i.color),t.setAttribute("stroke-opacity",i.opacity),t.setAttribute("stroke-width",i.weight),t.setAttribute("stroke-linecap",i.lineCap),t.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?t.setAttribute("stroke-dasharray",i.dashArray):t.removeAttribute("stroke-dasharray"),i.dashOffset?t.setAttribute("stroke-dashoffset",i.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),i.fill?(t.setAttribute("fill",i.fillColor||i.color),t.setAttribute("fill-opacity",i.fillOpacity),t.setAttribute("fill-rule",i.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,wf(e._parts,t))},_updateCircle:function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),n=Math.max(Math.round(e._radiusY),1)||i,s="a"+i+","+n+" 0 1,0 ",o=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+s+i*2+",0 "+s+-i*2+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){qn(e._path)},_bringToBack:function(e){Gn(e._path)}});O.vml&&yo.include(jb);function cm(e){return O.svg||O.vml?new yo(e):null}U.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&lm(e)||cm(e)}});var hm=Un.extend({initialize:function(e,t){Un.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=Rt(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Ub(e,t){return new hm(e,t)}yo.create=Tr;yo.pointsToPath=wf;ui.geometryToLayer=Pr;ui.coordsToLatLng=kc;ui.coordsToLatLngs=Er;ui.latLngToCoords=Pc;ui.latLngsToCoords=Ar;ui.getFeature=Yn;ui.asFeature=zr;U.mergeOptions({boxZoom:!0});var um=Ve.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){F(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),co(),gc(),this._startPoint=this._map.mouseEventToContainerPoint(e),F(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=K("div","leaflet-zoom-box",this._container),Z(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new Tt(this._point,this._startPoint),i=t.getSize();It(this._box,t.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(wt(this._box),kt(this._container,"leaflet-crosshair")),ho(),_c(),dt(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(pt(this._resetState,this),0);var t=new Gt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});U.addInitHook("addHandler","boxZoom",um);U.mergeOptions({doubleClickZoom:!0});var dm=Ve.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom(),n=t.options.zoomDelta,s=e.originalEvent.shiftKey?i-n:i+n;t.options.doubleClickZoom==="center"?t.setZoom(s):t.setZoomAround(e.containerPoint,s)}});U.addInitHook("addHandler","doubleClickZoom",dm);U.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var fm=Ve.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Pi(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}Z(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){kt(this._map._container,"leaflet-grab"),kt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=Rt(this._map.options.maxBounds);this._offsetLimit=Yt(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,s=(n-t+i)%e+t-i,o=(n+t+i)%e-t-i,r=Math.abs(s+i)<Math.abs(o+i)?s:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(e){var t=this._map,i=t.options,n=!i.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),n)t.fire("moveend");else{this._prunePositions(+new Date);var s=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,r=i.easeLinearity,a=s.multiplyBy(r/o),l=a.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,l),h=a.multiplyBy(c/l),u=c/(i.inertiaDeceleration*r),f=h.multiplyBy(-u/2).round();!f.x&&!f.y?t.fire("moveend"):(f=t._limitOffset(f,t.options.maxBounds),qt(function(){t.panBy(f,{duration:u,easeLinearity:r,noMoveStart:!0,animate:!0})}))}}});U.addInitHook("addHandler","dragging",fm);U.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mm=Ve.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),F(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,i=e.scrollTop||t.scrollTop,n=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},i=this.keyCodes,n,s;for(n=0,s=i.left.length;n<s;n++)t[i.left[n]]=[-1*e,0];for(n=0,s=i.right.length;n<s;n++)t[i.right[n]]=[e,0];for(n=0,s=i.down.length;n<s;n++)t[i.down[n]]=[0,e];for(n=0,s=i.up.length;n<s;n++)t[i.up[n]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},i=this.keyCodes,n,s;for(n=0,s=i.zoomIn.length;n<s;n++)t[i.zoomIn[n]]=e;for(n=0,s=i.zoomOut.length;n<s;n++)t[i.zoomOut[n]]=-e},_addHooks:function(){F(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,i=this._map,n;if(t in this._panKeys)(!i._panAnim||!i._panAnim._inProgress)&&(n=this._panKeys[t],e.shiftKey&&(n=z(n).multiplyBy(3)),i.panBy(n),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(t in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;Qi(e)}}});U.addInitHook("addHandler","keyboard",mm);U.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pm=Ve.extend({addHooks:function(){F(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=$f(e),i=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(pt(this._performZoom,this),n),Qi(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0;e._stop();var n=this._delta/(this._map.options.wheelPxPerZoomLevel*4),s=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,o=i?Math.ceil(s/i)*i:s,r=e._limitZoom(t+(this._delta>0?o:-o))-t;this._delta=0,this._startTime=null,r&&(e.options.scrollWheelZoom==="center"?e.setZoom(t+r):e.setZoomAround(this._lastMousePos,t+r))}});U.addInitHook("addHandler","scrollWheelZoom",pm);var Yb=600;U.mergeOptions({tapHold:O.touchNative&&O.safari&&O.mobile,tapTolerance:15});var gm=Ve.extend({addHooks:function(){F(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new N(t.clientX,t.clientY),this._holdTimeout=setTimeout(pt(function(){this._cancel(),this._isTapValid()&&(F(document,"touchend",Ht),F(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),Yb),F(document,"touchend touchcancel contextmenu",this._cancel,this),F(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){dt(document,"touchend",Ht),dt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),dt(document,"touchend touchcancel contextmenu",this._cancel,this),dt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new N(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var i=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});i._simulated=!0,t.target.dispatchEvent(i)}});U.addInitHook("addHandler","tapHold",gm);U.mergeOptions({touchZoom:O.touch,bounceAtZoomLimits:!0});var _m=Ve.extend({addHooks:function(){Z(this._map._container,"leaflet-touch-zoom"),F(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){kt(this._map._container,"leaflet-touch-zoom"),dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!=="center"&&(this._pinchStartLatLng=t.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),F(document,"touchmove",this._onTouchMove,this),F(document,"touchend touchcancel",this._onTouchEnd,this),Ht(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]),s=i.distanceTo(n)/this._startDist;if(this._zoom=t.getScaleZoom(s,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&s<1||this._zoom>t.getMaxZoom()&&s>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom==="center"){if(this._center=this._startLatLng,s===1)return}else{var o=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(s===1&&o.x===0&&o.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),fe(this._animRequest);var r=pt(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=qt(r,this,!0),Ht(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,fe(this._animRequest),dt(document,"touchmove",this._onTouchMove,this),dt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});U.addInitHook("addHandler","touchZoom",_m);U.BoxZoom=um;U.DoubleClickZoom=dm;U.Drag=fm;U.Keyboard=mm;U.ScrollWheelZoom=pm;U.TapHold=gm;U.TouchZoom=_m;var qb={__proto__:null,version:I0,Control:se,control:go,Class:li,Handler:Ve,extend:rt,bind:pt,stamp:J,setOptions:gt,Browser:O,Evented:uo,Mixin:vb,Util:A0,PosAnimation:jf,Draggable:Pi,DomEvent:Me,DomUtil:hi,Point:N,point:z,Bounds:Tt,bounds:Yt,Transformation:rc,transformation:fo,LineUtil:Mb,PolyUtil:Sb,LatLng:tt,latLng:ut,LatLngBounds:Gt,latLngBounds:Rt,CRS:ci,Projection:Lb,Layer:Se,LayerGroup:Vn,layerGroup:Eb,FeatureGroup:Xi,featureGroup:Ob,ImageOverlay:Fr,imageOverlay:Rb,VideoOverlay:nm,videoOverlay:Nb,SVGOverlay:sm,svgOverlay:Bb,DivOverlay:We,Popup:Rr,popup:Hb,Tooltip:Nr,tooltip:Wb,icon:Sc,DivIcon:om,divIcon:Zb,Marker:Xn,marker:Cb,Icon:jn,GridLayer:ro,gridLayer:Vb,TileLayer:Ei,tileLayer:Br,Renderer:ri,Canvas:am,canvas:lm,Path:Ci,CircleMarker:Dr,circleMarker:Ib,Circle:Lc,circle:Db,Polyline:ai,polyline:Ab,Polygon:Un,polygon:zb,Rectangle:hm,rectangle:Ub,SVG:yo,svg:cm,GeoJSON:ui,geoJSON:im,geoJson:Fb,Map:U,map:fb},ym=rt(qb,{noConflict:Xb}),Oc=Kb(),Gb=Oc.L;Oc.L=ym;function Xb(){return Oc.L=Gb,ym}function Kb(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}var Kn,Jb=se.extend({timestamps:[],radarLayers:[],currentTimestamp:0,nextTimestamp:0,animationPosition:0,animationTimer:0,rainviewerActive:!1,controlContainer:void 0,container:void 0,positionSlider:void 0,positionSliderLabel:void 0,map:void 0,options:{position:"topright",animationInterval:150,opacity:.75},onAdd(e){return this.timestamps=[],this.radarLayers=[],this.currentTimestamp=0,this.nextTimestamp=0,this.animationPosition=0,this.animationTimer=0,this.rainviewerActive=!1,this.map=e,this.container=hi.create("div","leaflet-control-rainviewer leaflet-bar leaflet-control"),this.container.style.border="none",this.container.style.background="rgba(100, 100, 100, 0.4)",this.container},load(){this.container&&hi.addClass(this.container,"leaflet-control-rainviewer-active"),this.controlContainer=hi.create("div","leaflet-control-rainviewer-container",this.container),this.positionSliderLabel=hi.create("label","leaflet-control-rainviewer-label leaflet-bar-part",this.controlContainer),this.positionSliderLabel.htmlFor="rainviewer-positionslider",this.positionSlider=hi.create("input","leaflet-control-rainviewer-positionslider leaflet-bar-part",this.controlContainer),this.positionSlider.type="range",this.positionSlider.id="rainviewer-positionslider",this.positionSlider.min="0",this.positionSlider.max="11",this.positionSlider.valueAsNumber=this.animationPosition,Me.on(this.positionSlider,"input",this.setPosition,this),Me.disableClickPropagation(this.positionSlider);let e='<div id="timestamp" class="leaflet-control-rainviewer-timestamp"></div>';this.controlContainer.insertAdjacentHTML("beforeend",e),Me.disableClickPropagation(this.controlContainer)},refresh(){let e=new XMLHttpRequest;e.timeout=3e3,e.open("GET","https://tilecache.rainviewer.com/api/maps.json",!0),e.onload=()=>{let t=JSON.parse(e.response);I("rainviewer refresh",t),t&&t.length>0&&(this.stop(),this.timestamps=t,this.showFrame(-1),this.play())},e.ontimeout=()=>I("rainviewer timeout"),e.send()},unload(){this.controlContainer&&hi.remove(this.controlContainer),this.container&&hi.removeClass(this.container,"leaflet-control-rainviewer-active");let e=this.radarLayers,t=this.map;Object.keys(e).forEach(i=>{t!=null&&t.hasLayer(e[i])&&t.removeLayer(e[i])})},addLayer(e){let t=this.map;this.radarLayers[e]||(this.radarLayers[e]=new Ei("https://tilecache.rainviewer.com/v2/radar/"+e+"/256/{z}/{x}/{y}/2/1_1.png",{tileSize:256,opacity:.001,attribution:'<a href="https://rainviewer.com" target="_blank">rainnviewer.com</a>',zIndex:e})),t&&!t.hasLayer(this.radarLayers[e])&&t.addLayer(this.radarLayers[e])},changeRadarPosition(e,t){for(;e>=this.timestamps.length;)e-=this.timestamps.length;for(;e<0;)e+=this.timestamps.length;if(this.currentTimestamp=this.timestamps[this.animationPosition],this.nextTimestamp=this.timestamps[e],this.addLayer(this.nextTimestamp),t)return;this.animationPosition=e,this.positionSlider&&(this.positionSlider.valueAsNumber=e),this.radarLayers[this.currentTimestamp]&&this.radarLayers[this.currentTimestamp].setOpacity(0),this.radarLayers[this.nextTimestamp].setOpacity(this.options.opacity);let i=document.getElementById("timestamp");i.innerHTML=new Date(this.nextTimestamp*1e3).toLocaleString()},showFrame(e){let t=e-this.animationPosition>0?1:-1;this.changeRadarPosition(e,!1),this.changeRadarPosition(e+t,!0)},setOpacity(e){this.radarLayers[this.currentTimestamp]&&this.radarLayers[this.currentTimestamp].setOpacity(e.srcElement.value/100)},setPosition(e){this.showFrame(e.srcElement.value)},stop(){return this.animationTimer>0?(clearTimeout(this.animationTimer),this.animationTimer=0,!0):!1},play(){this.timestamps.length<1||(this.showFrame(this.animationPosition+1),this.animationTimer=setTimeout(()=>{this.play()},this.options.animationInterval))},playStop(){this.stop()||this.play()},prev(e){this.timestamps.length<1||(Me.stopPropagation(e),Me.preventDefault(e),this.stop(),this.showFrame(this.animationPosition-1))},startstop(e){this.timestamps.length<1||(Me.stopPropagation(e),Me.preventDefault(e),this.playStop())},next(e){this.timestamps.length<1||(Me.stopPropagation(e),Me.preventDefault(e),this.stop(),this.showFrame(this.animationPosition+1))},onRemove(){}});function bm(e){return Kn=new Jb,Kn.addTo(e),Kn.load(),Kn}function xm(){Kn&&Kn.refresh()}var wm="https://{s}.google.com/vt/lyrs=y,h&x={x}&y={y}&z={z}",Qb={maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]},Jn,Hr,Tm;async function Wr(e,t){let i=document.getElementById("weather-radar");if(!i)return;i.style.height=`${window.innerHeight}px`;let n=new IntersectionObserver(s=>{if(s[0].intersectionRatio<=0)return;if(n.unobserve(i),Jn||(I("createRadar",{lat:e,lon:t,mapUrl:wm}),Jn=new U(i,{center:new tt(e,t),zoom:9,zoomControl:!1,attributionControl:!1}),Br(wm,Qb).addTo(Jn),Tm=bm(Jn),i.onclick=()=>{Tm.playStop()}),!Hr){let r=Sc({iconUrl:"../assets/marker.png",iconSize:[64,64]});Hr=new Xn(new tt(e,t),{icon:r}),Hr.addTo(Jn)}let o=new tt(e,t);Jn.setView(o),Hr.setLatLng(o),xm()});n.observe(i)}var Cc=class extends HTMLElement{connectedCallback(){this.innerHTML=`
      <div id="weather-radar" style="width: 1000px; height: 1000px; margin: 40px 0 40px 0"></div>
    `}};customElements.define("component-radar",Cc);async function $e(e,t=!0){if(t){let s=await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(e)}`);if(!s||!s.ok)return{};let o=(await s.json()).contents;return o?JSON.parse(o):{}}let i=await fetch(`${e}`);return!i||!i.ok?{}:i.json()||{}}var Mm={"&":"&#38;","<":"&lt;",">":"&gt;",'"':"&quot;","#":"&#35;","'":"&#39;","`":"&#x60;","(":"&#40;",")":"&#41;"},tx=e=>{let t={};for(let i in e)i in e&&(t[e[i]]=i);return t},ex=tx(Mm),Sm=e=>{let t=r=>e[r],i=[];for(let r in e)r in e&&i.push(r);let n=i.join("|");n=n.replace(/\(/g,"\\("),n=n.replace(/\)/g,"\\)"),n=`(?:${n})`;let s=RegExp(n),o=RegExp(n,"g");return r=>(r=r?""+r:"",s.test(r)?r.replace(o,t):r)},je=Sm(Mm),zT=Sm(ex);async function Zr(e,t,i){var l,c,h,u,f;let n=document.getElementById("component-aqi");if(!n)return;let s=await $e(`https://api.waqi.info/feed/geo:${e};${t}/?token=${i}`,!1);if(I("updateAQI",{lat:e,lon:t,aqi:s}),!((l=s.data)!=null&&l.city))return;let o=m=>m>300?`<span style="color: white; background: purple; padding: 2px">${m} - hazardous</span>`:m>200?`<span style="color: white; background: maroon; padding: 2px">${m} - very Unhealthy</span>`:m>150?`<span style="color: white; background: darkred; padding: 2px">${m} - unhealthy</span>`:m>100?`<span style="color: white; background: coral; padding: 2px">${m} - moderatly unhealthy</span>`:m>50?`<span style="color: white; background: yellowgreen; padding: 2px">${m} - moderate</span>`:m>0?`<span style="color: white; background: darkgreen; padding: 0px 8px 1px 8px">${m} - good</span>`:'<span style="color: white; background: maroon; padding: 2px">error</span>',a=`<span style="font-size: 1.4rem" title="${je(`${((c=s.data.attributions)==null?void 0:c[0].name)||""}
${((u=(h=s.data)==null?void 0:h.city)==null?void 0:u.name)||""}`)}"><a href="https://en.wikipedia.org/wiki/Air_quality_index">air quality index</a> ${o(s.data.aqi)}</span><br>`;a+='<span style="margin-right: 20px">';for(let[m,d]of Object.entries(((f=s==null?void 0:s.data)==null?void 0:f.iaqi)||{})){let p=je(d.v);m==="co"&&(a+=`<span title="Carbon Monoxide" style="margin-right: 20px">CO <span style="color: white">${p}</span></span>`),m==="no2"&&(a+=`<span title="Nitrogen Dioxide" style="margin-right: 20px">NO<span style="font-size: 0.5rem">2</span> <span style="color: white">${p}</span></span>`),m==="so2"&&(a+=`<span title="Sulfur Dioxide" style="margin-right: 20px">SO<span style="font-size: 0.5rem">2</span> <span style="color: white">${p}</span></span>`),m==="o3"&&(a+=`<span title="Ground-level Ozone" style="margin-right: 20px">O<span style="font-size: 0.5rem">3</span> <span style="color: white">${p}</span></span>`),m==="pm10"&&(a+=`<span title="Particulates < 10 microns" style="margin-right: 20px">PM<span style="font-size: 0.5rem">10.0</span> <span style="color: white">${p}</span></span>`),m==="pm25"&&(a+=`<span title="Particulates < 2.5 microns" style="margin-right: 20px">PM<span style="font-size: 0.5rem">2.5</span> <span style="color: white">${p}</span></span>`)}a+="</span>",n.innerHTML=a}var Ic=class extends HTMLElement{connectedCallback(){this.innerHTML=`
      <div id="component-aqi" class="component-aqi"></div>
    `}};customElements.define("component-aqi",Ic);function ix(e){switch(e.toLowerCase()){case"advistory":return"yellowgreen";case"watch":return"coral";case"warning":return"darkred";default:return"beige"}}function Vr(e){I("updateAlerts",{alerts:e.alerts});let t=document.getElementById("component-alerts");if(!t)return;let i="";if(e!=null&&e.alerts){i+='<span style="font-size: 1.8rem">Alerts</span><br>';for(let n of e.alerts)i+=`
      <div style="text-align: justify" title="${JSON.stringify(n,null,2).replace(/{|}|"|,/g,"").replace("  "," ")}">
        <a href="${n.uri}" target="_blank">
          <span style="color: bisque; -webkit-box-decoration-break: clone">\u25AA ${P.fromSeconds(n.time).toFormat("ccc LLL d T")} to ${P.fromSeconds(n.expires).toFormat("ccc LLL d T")}</span>
          <span style="padding: 2px; background: ${ix(n.severity)}"> ${n.severity}</span><br>
          <span style="color: beige; -webkit-box-decoration-break: clone; margin-left: 10px">for ${n.regions.join(", ")}</span><br>
          <span style="margin-left: 10px; -webkit-box-decoration-break: clone; font-weight: bold">${n.title}</span><br>
          <div style="margin-left: 10px; max-height: 3.8rem; overflow-y: auto; -webkit-box-decoration-break: clone">${n.description.toLowerCase()}</div>
        </a>
      </div>
    `}t.innerHTML=i}var Dc=class extends HTMLElement{static get observedAttributes(){return["loc"]}connectedCallback(){this.innerHTML='<div class="component-alerts" id="component-alerts"></div>'}};customElements.define("component-alerts",Dc);var Qn=document.createElement("iframe");Qn.id="weather-windy-iframe";Qn.width="1000";Qn.height="1000";Qn.frameBorder="0";async function Lm(e,t){I("updateWindy",{lat:e,lon:t}),Qn.src=`https://embed.windy.com/embed2.html?lat=${e}&lon=${t}&detailLat=${e}&detailLon=${t}&width=800&height=800&zoom=7&level=surface&overlay=radar&product=radar&menu=&message=true&marker=&calendar=now&pressure=true&type=map&location=coordinates&detail=&metricWind=mph&metricTemp=%C2%B0F&radarRange=-1`}var Ac=class extends HTMLElement{connectedCallback(){this.innerHTML='<div class=windy" id="weather-windy" style="margin-top: 20px; margin-bottom: 20px; font-size: 1.4rem; cursor: pointer; letter-spacing: 3px; background: rgba(50, 0, 50, 0.5); padding: 4px;">windy maps</div>',this.addEventListener("click",()=>{if(this.children.length>1){I("removeWindy");for(let t=1;t<this.children.length;t++)this.removeChild(this.children[t])}else I("appendWindy"),this.appendChild(Qn)})}};customElements.define("component-windy",Ac);var ts=document.createElement("iframe");ts.id="weather-darksky-iframe";ts.width="1000";ts.height="1000";ts.frameBorder="0";async function km(e,t){I("updateDarkSky",{lat:e,lon:t}),ts.src=`https://maps.darksky.net/@precipitation_rate,${e},${t}`}var zc=class extends HTMLElement{connectedCallback(){this.innerHTML='<div class=darksky" id="weather-darksky" style="margin-top: 20px; margin-bottom: 20px; font-size: 1.4rem; cursor: pointer; letter-spacing: 3px; background: rgba(50, 0, 50, 0.5); padding: 4px;">darksky maps</div>',this.addEventListener("click",()=>{if(this.children.length>1){I("removeDarkSky");for(let t=1;t<this.children.length;t++)this.removeChild(this.children[t])}else I("appendDarkSky"),this.appendChild(ts)})}};customElements.define("component-darksky",zc);var Fc=async e=>{var i;Ao(e.lat,e.lon),Dm(e.name),Zr(e.lat,e.lon,Et.aqicn);let t=await $e(`https://api.darksky.net/forecast/${Et.darksky}/${e.lat},${e.lon}`);I("weatherData",t),document.getElementById("main").style.display="block",Om(t==null?void 0:t.flags),Cm((i=t==null?void 0:t.currently)==null?void 0:i.time),Fo(t),Ro(t),zo(t),vr(t),Vr(t),Wr(e.lat,e.lon),Lm(e.lat,e.lon),km(e.lat,e.lon),document.getElementById("loader-container").style.display="none";for(let n of Array.from(document.getElementsByTagName("img"))){let s=0;n.style.visibility="visible";let o=r=>{s+=.01,r.style.opacity=s.toString(),s<1&&setTimeout(()=>o(r),20)};o(n)}};async function Pm(){document.getElementById("main").style.display="none",document.getElementById("loader-container").style.display="block";let e=null;if(!e){let t=new URLSearchParams(window.location.search);t.has("location")&&(e=await Im(t.get("location"),Et.google))}e||(e=await jr(Et.google),e.lat!==0&&Em(e)),e||(e=await Rc(),e.lat!==0&&$r(e)),(e==null?void 0:e.lat)!==0?e.name=await vo(e.lat,e.lon,Et.google):document.getElementById("weather-info-ip").innerHTML="cannot automatically determine location",Fc(e)}function $r(e){I("updateGPSInfo",{loc:e}),document.getElementById("weather-info-gps").innerHTML=je(`GPS ${Math.round(1e3*e.lat)/1e3}, ${Math.round(1e3*e.lon)/1e3} \xB1${Math.round(e.accuracy)}m`)}function Em(e){I("updateIPInfo",{loc:e}),document.getElementById("weather-info-ip").innerHTML=je(`IP ${e.ip||""} at ${Math.round(1e3*e.lat)/1e3}, ${Math.round(1e3*e.lon)/1e3} \xB1${Math.round(e.accuracy)}m`)}function Om(e){I("updateStationInfo",{flags:e});let t=(e==null?void 0:e["nearest-station"])||"Number.POSITIVE_INFINITY";document.getElementById("weather-info-station").innerHTML=je(`nearest station ${t} mi`)}var Am;function Cm(e){I("updateForecastAge",{time:e});let t=()=>Math.max(0,Math.round((new Date().getSeconds()-new Date(1e3*e).getSeconds())/60));e&&(document.getElementById("weather-info-age").innerHTML=je(`forecast data age ${t()} min`)),!Am&&(Am=setInterval(()=>{e&&(document.getElementById("weather-info-age").innerHTML=je(`forecast data age ${t()} min`))},5e3))}function nx(){setInterval(()=>{let e=document.getElementById("weather-info-time");e&&(e.innerHTML=je(`${P.now().toLocaleString(P.DATETIME_HUGE)}`))},1e3)}var Nc=class extends HTMLElement{connectedCallback(){this.innerHTML=`
      <div id="weather-info" title="click to reinitialize weather" style="margin: 20px 0 0 0; color: beige; font-size: 1.2rem">
        <div id="weather-info-time"></div>
        <br>
        <div id="weather-info-gps"></div>
        <div id="weather-info-ip"></div>
        <div style="display: flex; justify-content: center">
          <div id="weather-info-station"></div>&nbsp
          <div id="weather-info-age"></div>
        </div>
      </div>`,nx();let t=document.getElementById("weather-info");t&&(t.onclick=async()=>Pm())}};customElements.define("component-info",Nc);async function Im(e,t){let i={name:"",lat:0,lon:0,accuracy:0},n=await $e(`https://maps.googleapis.com/maps/api/geocode/json?key=${t}&address=${e}`,!1);return I("findByAddress",n),n.results&&n.results[0]?i={name:n.results[0].formatted_address,lat:n.results[0].geometry.location.lat,lon:n.results[0].geometry.location.lng,accuracy:0}:I("findByAddress failed"),i}async function vo(e,t,i){let n=await $e(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${t}&key=${i}`,!1),s="";if(n.results){let o=n.results?n.results.filter(r=>r.types.includes("locality")||r.types.includes("neighborhood")):[];if(o.length>0){let r=o[0].address_components.map(l=>l.short_name);s=[...new Set(r)].join(", ")}I("findByLocation",n,s)}else I("findByLocation failed");return s}async function Rc(){let e={lat:0,lon:0,accuracy:0,name:""};return navigator.geolocation?new Promise(t=>{setTimeout(()=>{I("getGPSLocation timeout"),t(e)},1e4);try{navigator.geolocation.getCurrentPosition(i=>{I("getGPSLocation",i),t({lat:i.coords.latitude,lon:i.coords.longitude,name:"",accuracy:i.coords.accuracy})},i=>{I("getGPSLocation error",i),t(e)})}catch(i){I("getGPSLocation exception",i),t(e)}}):(I("getGPSLocation denied"),e)}async function jr(e){var s,o;let i=(await $e("https://api.ipify.org?format=json",!1)).ip,n={ip:i,accuracy:0,lat:25.76,lon:-80.19,name:""};if(e&&e!==""){let a=await(await fetch(`https://www.googleapis.com/geolocation/v1/geolocate?key=${e}`,{method:"POST",body:JSON.stringify({considerIp:!0}),headers:{"Content-Type":"application/json"}})).json();n={ip:i,accuracy:(a==null?void 0:a.accuracy)||n.accuracy,lat:((s=a==null?void 0:a.location)==null?void 0:s.lat)||n.lat,lon:((o=a==null?void 0:a.location)==null?void 0:o.lng)||n.lon,name:""}}return I("getIPLocation",n),n}function Dm(e){I("updateAddress",{address:e});let t=document.getElementsByTagName("component-address");for(let i=0;i<t.length;i++)t[i].setAttribute("address",e)}var Bc=class extends HTMLElement{static get observedAttributes(){return["address"]}connectedCallback(){this.innerHTML=""}attributeChangedCallback(t,i,n){if(t!=="address")return;this.innerHTML=`
      <div id="weather-info-text" title="click to detect gps location" style="margin: 20px 0 0 0; font-size: 2rem; color: beige">${n}</div>
    `;let s=document.getElementById("weather-info-text");s.onclick=async()=>{s.innerHTML="detecting gps location";let o=await Rc();o.lat!==0?(o.name=await vo(o.lat,o.lon,Et.google),$r(o),Fc(o)):s.innerHTML="gps location failed"}}};customElements.define("component-address",Bc);var es;function zm(e,t){let i=e.lastElementChild.cloneNode(!0);i.textContent=t,e.classList.add("component-clock-move"),e.appendChild(i),setTimeout(()=>{e.classList.remove("component-clock-move"),e.removeChild(e.firstElementChild)},750)}function Hc(e,t){let i=t.toString().padStart(2,"0").split(""),n=e.firstElementChild;n.lastElementChild.textContent!==i[0]&&zm(n,i[0]);let s=e.lastElementChild;s.lastElementChild.textContent!==i[1]&&zm(s,i[1])}function Zc(e){let t=new Date;es||(e=!0,es=t),document.getElementById("component-clock")&&((e||es.getHours()!==t.getHours())&&Hc(document.getElementById("component-clock-hours"),t.getHours()),(e||es.getMinutes()!==t.getMinutes())&&Hc(document.getElementById("component-clock-minutes"),t.getMinutes()),(e||es.getSeconds()!==t.getSeconds())&&Hc(document.getElementById("component-clock-seconds"),t.getSeconds()),es=t)}var Wc=class extends HTMLElement{connectedCallback(){this.innerHTML=`
      <div id="component-clock" class="component-clock">
        <div id="component-clock-hours"><div><div>0</div></div><div><div>0</div></div></div>
        <span>:</span>
        <div id="component-clock-minutes"><div><div>0</div></div><div><div>0</div></div></div>
        <span>:</span>
        <div id="component-clock-seconds"><div><div>0</div></div><div><div>0</div></div></div>   
      </div>`,setInterval(()=>Zc(!1),1e3)}};customElements.define("component-clock",Wc);function $c(){let e=new Date,t=i=>i.toString().padStart(2,"0");document.getElementById("component-clock-overlay").innerText=window.scrollY>0?t(e.getHours())+":"+t(e.getMinutes()):""}var Vc=class extends HTMLElement{connectedCallback(){this.innerHTML=`
      <div id="component-clock-overlay" class="component-clock-overlay">
      </div>`,setInterval(()=>$c(),1e3)}};customElements.define("component-clock-overlay",Vc);var Rm=0,jc=async()=>{Rm=new Date().getTime();let e=await jr(Et.google);e.name=await vo(e.lat,e.lon,Et.google);let t=await $e(`https://api.darksky.net/forecast/${Et.darksky}/${e.lat},${e.lon}`);I("weatherData",t),await Fo(t),await Ro(t),await zo(t),await Ao(e.lat,e.lon),await Zr(e.lat,e.lon,Et.aqicn),await vr(t),await Vr(t),await Wr(e.lat,e.lon),window.scroll(0,0)},Nm=new Date().getTime();async function Bm(){Nm=new Date().getTime();let e=Array.from(document.getElementById("main").children),t=0;for(let s=0;s<e.length;s++)Math.round(window.scrollY)>=Math.round(e[s].offsetTop)&&(t=s+1);t>=e.length&&(t=0);let i=e[t].offsetTop,n=()=>{let s=Math.round(10-10*Math.abs(Math.cos(Math.PI*window.scrollY/(i+1))));i===0&&window.scrollY>0?window.scroll(0,0):window.scrollY<i&&(window.scroll(0,window.scrollY+s+1),setTimeout(n,10))};n()}async function sx(){Fm.default.init({mainElement:"body",onRefresh(){jc()}}),document.body.onclick=()=>Bm()}async function ox(){I("weather app"),Zc(!0),$c(),await Et.init(),sx(),jc();for(let e of Array.from(document.getElementsByClassName("page")))e.style.minHeight=`${window.innerHeight}px`;setInterval(()=>{let e=Math.round(new Date().getTime()/1e3);e>=15+Nm/1e3&&Bm(),e>=15+Rm/1e3&&e%(60*15)===0&&jc()},100)}window.onload=ox;
//# sourceMappingURL=nightstand.js.map
